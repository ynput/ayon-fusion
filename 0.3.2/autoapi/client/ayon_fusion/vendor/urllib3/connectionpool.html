<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=connection.html><link rel=next href=contrib/index.html><link rel=icon href=../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.9"><title>connectionpool - ayon-fusion</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../css/custom.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../../index.html title=ayon-fusion class="md-header__button md-logo" aria-label=ayon-fusion data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-fusion </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> connectionpool </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-fusion title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../index.html title=ayon-fusion class="md-nav__button md-logo" aria-label=ayon-fusion data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-fusion </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-fusion title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_fusion </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_fusion </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../addon.html class=md-nav__link> <span class=md-ellipsis> addon </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../api/action.html class=md-nav__link> <span class=md-ellipsis> api </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../deploy/MenuScripts/install_pyside2.html class=md-nav__link> <span class=md-ellipsis> deploy </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../hooks/pre_fusion_launch_menu_hook.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../plugins/create/create_image_saver.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../scripts/duplicate_with_inputs.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> vendor </span> </a> <label class="md-nav__link " for=__nav_3_1_1_7 id=__nav_3_1_1_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_7_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7> <span class="md-nav__icon md-icon"></span> vendor </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../attr/_cmp.html class=md-nav__link> <span class=md-ellipsis> attr </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7_2 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link "> <span class=md-ellipsis> urllib3 </span> </a> <label class="md-nav__link " for=__nav_3_1_1_7_2 id=__nav_3_1_1_7_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_1_1_7_2_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7_2> <span class="md-nav__icon md-icon"></span> urllib3 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=_collections.html class=md-nav__link> <span class=md-ellipsis> _collections </span> </a> </li> <li class=md-nav__item> <a href=_version.html class=md-nav__link> <span class=md-ellipsis> _version </span> </a> </li> <li class=md-nav__item> <a href=connection.html class=md-nav__link> <span class=md-ellipsis> connection </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> connectionpool </span> <span class="md-nav__icon md-icon"></span> </label> <a href=connectionpool.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> connectionpool </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool class=md-nav__link> <span class=md-ellipsis> connectionpool </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.ConnectionPool class=md-nav__link> <span class=md-ellipsis> ConnectionPool </span> </a> <nav class=md-nav aria-label=ConnectionPool> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.ConnectionPool.close class=md-nav__link> <span class=md-ellipsis> close </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool class=md-nav__link> <span class=md-ellipsis> HTTPConnectionPool </span> </a> <nav class=md-nav aria-label=HTTPConnectionPool> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool.close class=md-nav__link> <span class=md-ellipsis> close </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool.is_same_host class=md-nav__link> <span class=md-ellipsis> is_same_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool.urlopen class=md-nav__link> <span class=md-ellipsis> urlopen </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPSConnectionPool class=md-nav__link> <span class=md-ellipsis> HTTPSConnectionPool </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.connection_from_url class=md-nav__link> <span class=md-ellipsis> connection_from_url </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=contrib/_appengine_environ.html class=md-nav__link> <span class=md-ellipsis> contrib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=exceptions.html class=md-nav__link> <span class=md-ellipsis> exceptions </span> </a> </li> <li class=md-nav__item> <a href=fields.html class=md-nav__link> <span class=md-ellipsis> fields </span> </a> </li> <li class=md-nav__item> <a href=filepost.html class=md-nav__link> <span class=md-ellipsis> filepost </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=packages/backports/makefile.html class=md-nav__link> <span class=md-ellipsis> packages </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=poolmanager.html class=md-nav__link> <span class=md-ellipsis> poolmanager </span> </a> </li> <li class=md-nav__item> <a href=request.html class=md-nav__link> <span class=md-ellipsis> request </span> </a> </li> <li class=md-nav__item> <a href=response.html class=md-nav__link> <span class=md-ellipsis> response </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=util/connection.html class=md-nav__link> <span class=md-ellipsis> util </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../server/imageio.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool class=md-nav__link> <span class=md-ellipsis> connectionpool </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.ConnectionPool class=md-nav__link> <span class=md-ellipsis> ConnectionPool </span> </a> <nav class=md-nav aria-label=ConnectionPool> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.ConnectionPool.close class=md-nav__link> <span class=md-ellipsis> close </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool class=md-nav__link> <span class=md-ellipsis> HTTPConnectionPool </span> </a> <nav class=md-nav aria-label=HTTPConnectionPool> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool.close class=md-nav__link> <span class=md-ellipsis> close </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool.is_same_host class=md-nav__link> <span class=md-ellipsis> is_same_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool.urlopen class=md-nav__link> <span class=md-ellipsis> urlopen </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPSConnectionPool class=md-nav__link> <span class=md-ellipsis> HTTPSConnectionPool </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connectionpool.connection_from_url class=md-nav__link> <span class=md-ellipsis> connection_from_url </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>connectionpool</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_fusion.vendor.urllib3.connectionpool></a> <div class="doc doc-contents first"> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_fusion.vendor.urllib3.connectionpool.ConnectionPool class="doc doc-heading"> <code>ConnectionPool</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>Base class for all connection pools, such as :class:<code>.HTTPConnectionPool</code> and :class:<code>.HTTPSConnectionPool</code>.</p> <p>.. note:: ConnectionPool.urlopen() does not normalize or percent-encode target URIs which is useful if your target server doesn't support percent-encoded target URIs.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ConnectionPool</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Base class for all connection pools, such as</span>
<span class=sd>    :class:`.HTTPConnectionPool` and :class:`.HTTPSConnectionPool`.</span>

<span class=sd>    .. note::</span>
<span class=sd>       ConnectionPool.urlopen() does not normalize or percent-encode target URIs</span>
<span class=sd>       which is useful if your target server doesn&#39;t support percent-encoded</span>
<span class=sd>       target URIs.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>scheme</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>QueueCls</span> <span class=o>=</span> <span class=n>LifoQueue</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>host</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>LocationValueError</span><span class=p>(</span><span class=s2>&quot;No host specified.&quot;</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>host</span> <span class=o>=</span> <span class=n>_normalize_host</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>scheme</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_proxy_host</span> <span class=o>=</span> <span class=n>host</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=o>=</span> <span class=n>port</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__str__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=s2>&quot;</span><span class=si>%s</span><span class=s2>(host=</span><span class=si>%r</span><span class=s2>, port=</span><span class=si>%r</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__enter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__exit__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_val</span><span class=p>,</span> <span class=n>exc_tb</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
        <span class=c1># Return False to re-raise any potential exceptions</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Close all pooled connections and disable the pool.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.connectionpool.ConnectionPool.close class="doc doc-heading"> <code class="highlight language-python"><span class=n>close</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Close all pooled connections and disable the pool.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Close all pooled connections and disable the pool.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool class="doc doc-heading"> <code>HTTPConnectionPool</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="ConnectionPool (client.ayon_fusion.vendor.urllib3.connectionpool.ConnectionPool)" href=#client.ayon_fusion.vendor.urllib3.connectionpool.ConnectionPool>ConnectionPool</a></code>, <code><a class="autorefs autorefs-internal" title="RequestMethods (client.ayon_fusion.vendor.urllib3.request.RequestMethods)" href=request.html#client.ayon_fusion.vendor.urllib3.request.RequestMethods>RequestMethods</a></code></p> <p>Thread-safe connection pool for one host.</p> <p>:param host: Host used for this HTTP Connection (e.g. "localhost"), passed into :class:<code>http.client.HTTPConnection</code>.</p> <p>:param port: Port used for this HTTP Connection (None is equivalent to 80), passed into :class:<code>http.client.HTTPConnection</code>.</p> <p>:param strict: Causes BadStatusLine to be raised if the status line can't be parsed as a valid HTTP/1.0 or 1.1 status line, passed into :class:<code>http.client.HTTPConnection</code>.</p> <pre><code>.. note::
   Only works in Python 2. This parameter is ignored in Python 3.
</code></pre> <p>:param timeout: Socket timeout in seconds for each individual connection. This can be a float or integer, which sets the timeout for the HTTP request, or an instance of :class:<code>urllib3.util.Timeout</code> which gives you more fine-grained control over request timeouts. After the constructor has been parsed, this is always a <code>urllib3.util.Timeout</code> object.</p> <p>:param maxsize: Number of connections to save that can be reused. More than 1 is useful in multithreaded situations. If <code>block</code> is set to False, more connections will be created but they will not be saved once they've been used.</p> <p>:param block: If set to True, no more than <code>maxsize</code> connections will be used at a time. When no free connections are available, the call will block until a connection has been released. This is a useful side effect for particular multithreaded situations where one does not want to use more than maxsize connections per host to prevent flooding.</p> <p>:param headers: Headers to include with all requests, unless other headers are given explicitly.</p> <p>:param retries: Retry configuration to use by default with requests in this pool.</p> <p>:param _proxy: Parsed proxy URL, should not be used directly, instead, see :class:<code>urllib3.ProxyManager</code></p> <p>:param _proxy_headers: A dictionary with proxy headers, should not be used directly, instead, see :class:<code>urllib3.ProxyManager</code></p> <p>:param **conn_kw: Additional parameters are used to create fresh :class:<code>urllib3.connection.HTTPConnection</code>, :class:<code>urllib3.connection.HTTPSConnection</code> instances.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>HTTPConnectionPool</span><span class=p>(</span><span class=n>ConnectionPool</span><span class=p>,</span> <span class=n>RequestMethods</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Thread-safe connection pool for one host.</span>

<span class=sd>    :param host:</span>
<span class=sd>        Host used for this HTTP Connection (e.g. &quot;localhost&quot;), passed into</span>
<span class=sd>        :class:`http.client.HTTPConnection`.</span>

<span class=sd>    :param port:</span>
<span class=sd>        Port used for this HTTP Connection (None is equivalent to 80), passed</span>
<span class=sd>        into :class:`http.client.HTTPConnection`.</span>

<span class=sd>    :param strict:</span>
<span class=sd>        Causes BadStatusLine to be raised if the status line can&#39;t be parsed</span>
<span class=sd>        as a valid HTTP/1.0 or 1.1 status line, passed into</span>
<span class=sd>        :class:`http.client.HTTPConnection`.</span>

<span class=sd>        .. note::</span>
<span class=sd>           Only works in Python 2. This parameter is ignored in Python 3.</span>

<span class=sd>    :param timeout:</span>
<span class=sd>        Socket timeout in seconds for each individual connection. This can</span>
<span class=sd>        be a float or integer, which sets the timeout for the HTTP request,</span>
<span class=sd>        or an instance of :class:`urllib3.util.Timeout` which gives you more</span>
<span class=sd>        fine-grained control over request timeouts. After the constructor has</span>
<span class=sd>        been parsed, this is always a `urllib3.util.Timeout` object.</span>

<span class=sd>    :param maxsize:</span>
<span class=sd>        Number of connections to save that can be reused. More than 1 is useful</span>
<span class=sd>        in multithreaded situations. If ``block`` is set to False, more</span>
<span class=sd>        connections will be created but they will not be saved once they&#39;ve</span>
<span class=sd>        been used.</span>

<span class=sd>    :param block:</span>
<span class=sd>        If set to True, no more than ``maxsize`` connections will be used at</span>
<span class=sd>        a time. When no free connections are available, the call will block</span>
<span class=sd>        until a connection has been released. This is a useful side effect for</span>
<span class=sd>        particular multithreaded situations where one does not want to use more</span>
<span class=sd>        than maxsize connections per host to prevent flooding.</span>

<span class=sd>    :param headers:</span>
<span class=sd>        Headers to include with all requests, unless other headers are given</span>
<span class=sd>        explicitly.</span>

<span class=sd>    :param retries:</span>
<span class=sd>        Retry configuration to use by default with requests in this pool.</span>

<span class=sd>    :param _proxy:</span>
<span class=sd>        Parsed proxy URL, should not be used directly, instead, see</span>
<span class=sd>        :class:`urllib3.ProxyManager`</span>

<span class=sd>    :param _proxy_headers:</span>
<span class=sd>        A dictionary with proxy headers, should not be used directly,</span>
<span class=sd>        instead, see :class:`urllib3.ProxyManager`</span>

<span class=sd>    :param \\**conn_kw:</span>
<span class=sd>        Additional parameters are used to create fresh :class:`urllib3.connection.HTTPConnection`,</span>
<span class=sd>        :class:`urllib3.connection.HTTPSConnection` instances.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>scheme</span> <span class=o>=</span> <span class=s2>&quot;http&quot;</span>
    <span class=n>ConnectionCls</span> <span class=o>=</span> <span class=n>HTTPConnection</span>
    <span class=n>ResponseCls</span> <span class=o>=</span> <span class=n>HTTPResponse</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>host</span><span class=p>,</span>
        <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>strict</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>timeout</span><span class=o>=</span><span class=n>Timeout</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span><span class=p>,</span>
        <span class=n>maxsize</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
        <span class=n>block</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_proxy</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_proxy_headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_proxy_config</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>conn_kw</span>
    <span class=p>):</span>
        <span class=n>ConnectionPool</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>)</span>
        <span class=n>RequestMethods</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>headers</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>strict</span> <span class=o>=</span> <span class=n>strict</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>timeout</span><span class=p>,</span> <span class=n>Timeout</span><span class=p>):</span>
            <span class=n>timeout</span> <span class=o>=</span> <span class=n>Timeout</span><span class=o>.</span><span class=n>from_float</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>retries</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>Retry</span><span class=o>.</span><span class=n>DEFAULT</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>QueueCls</span><span class=p>(</span><span class=n>maxsize</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>block</span> <span class=o>=</span> <span class=n>block</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=o>=</span> <span class=n>_proxy</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>proxy_headers</span> <span class=o>=</span> <span class=n>_proxy_headers</span> <span class=ow>or</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span> <span class=o>=</span> <span class=n>_proxy_config</span>

        <span class=c1># Fill the queue up so that doing get() on it will block properly</span>
        <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>xrange</span><span class=p>(</span><span class=n>maxsize</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span>

        <span class=c1># These are mostly for testing and debugging purposes.</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num_connections</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num_requests</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span> <span class=o>=</span> <span class=n>conn_kw</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>:</span>
            <span class=c1># Enable Nagle&#39;s algorithm for proxies, to avoid packet fragmentation.</span>
            <span class=c1># We cannot know if the user has added default socket options, so we cannot replace the</span>
            <span class=c1># list.</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=s2>&quot;socket_options&quot;</span><span class=p>,</span> <span class=p>[])</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span><span class=p>[</span><span class=s2>&quot;proxy&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span><span class=p>[</span><span class=s2>&quot;proxy_config&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_new_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Return a fresh :class:`HTTPConnection`.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num_connections</span> <span class=o>+=</span> <span class=mi>1</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s2>&quot;Starting new HTTP connection (</span><span class=si>%d</span><span class=s2>): </span><span class=si>%s</span><span class=s2>:</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>num_connections</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>or</span> <span class=s2>&quot;80&quot;</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ConnectionCls</span><span class=p>(</span>
            <span class=n>host</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span>
            <span class=n>port</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>timeout</span><span class=o>.</span><span class=n>connect_timeout</span><span class=p>,</span>
            <span class=n>strict</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>strict</span><span class=p>,</span>
            <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=n>conn</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Get a connection. Will return a pooled connection if one is available.</span>

<span class=sd>        If no connections are available and :prop:`.block` is ``False``, then a</span>
<span class=sd>        fresh connection is returned.</span>

<span class=sd>        :param timeout:</span>
<span class=sd>            Seconds to wait before giving up and raising</span>
<span class=sd>            :class:`urllib3.exceptions.EmptyPoolError` if the pool is empty and</span>
<span class=sd>            :prop:`.block` is ``True``.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>conn</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>block</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>block</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span>

        <span class=k>except</span> <span class=ne>AttributeError</span><span class=p>:</span>  <span class=c1># self.pool is None</span>
            <span class=k>raise</span> <span class=n>ClosedPoolError</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;Pool is closed.&quot;</span><span class=p>)</span>

        <span class=k>except</span> <span class=n>queue</span><span class=o>.</span><span class=n>Empty</span><span class=p>:</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>block</span><span class=p>:</span>
                <span class=k>raise</span> <span class=n>EmptyPoolError</span><span class=p>(</span>
                    <span class=bp>self</span><span class=p>,</span>
                    <span class=s2>&quot;Pool reached maximum size and no more connections are allowed.&quot;</span><span class=p>,</span>
                <span class=p>)</span>
            <span class=k>pass</span>  <span class=c1># Oh well, we&#39;ll create a new connection then</span>

        <span class=c1># If this is a persistent connection, check if it got disconnected</span>
        <span class=k>if</span> <span class=n>conn</span> <span class=ow>and</span> <span class=n>is_connection_dropped</span><span class=p>(</span><span class=n>conn</span><span class=p>):</span>
            <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Resetting dropped connection: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>)</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
            <span class=k>if</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;auto_open&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
                <span class=c1># This is a proxied connection that has been mutated by</span>
                <span class=c1># http.client._tunnel() and cannot be reused (since it would</span>
                <span class=c1># attempt to bypass the proxy)</span>
                <span class=n>conn</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=k>return</span> <span class=n>conn</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_new_conn</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_put_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Put a connection back into the pool.</span>

<span class=sd>        :param conn:</span>
<span class=sd>            Connection object for the current host and port as returned by</span>
<span class=sd>            :meth:`._new_conn` or :meth:`._get_conn`.</span>

<span class=sd>        If the pool is already full, the connection is closed and discarded</span>
<span class=sd>        because we exceeded maxsize. If connections are discarded frequently,</span>
<span class=sd>        then maxsize should be increased.</span>

<span class=sd>        If the pool is closed, then the connection will be closed and discarded.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>block</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
            <span class=k>return</span>  <span class=c1># Everything is dandy, done.</span>
        <span class=k>except</span> <span class=ne>AttributeError</span><span class=p>:</span>
            <span class=c1># self.pool is None.</span>
            <span class=k>pass</span>
        <span class=k>except</span> <span class=n>queue</span><span class=o>.</span><span class=n>Full</span><span class=p>:</span>
            <span class=c1># This should never happen if self.block == True</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Connection pool is full, discarding connection: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>)</span>

        <span class=c1># Connection never got put back into the pool, close it.</span>
        <span class=k>if</span> <span class=n>conn</span><span class=p>:</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_validate_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Called right before a request is made, after the socket is created.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_prepare_proxy</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
        <span class=c1># Nothing to do for HTTP connections.</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_timeout</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>timeout</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Helper that always returns a :class:`urllib3.util.Timeout`&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>timeout</span> <span class=ow>is</span> <span class=n>_Default</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span><span class=o>.</span><span class=n>clone</span><span class=p>()</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>timeout</span><span class=p>,</span> <span class=n>Timeout</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>timeout</span><span class=o>.</span><span class=n>clone</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=c1># User passed us an int/float. This is for backwards compatibility,</span>
            <span class=c1># can be removed later</span>
            <span class=k>return</span> <span class=n>Timeout</span><span class=o>.</span><span class=n>from_float</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_raise_timeout</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>err</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>timeout_value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Is the error actually a timeout? Will raise a ReadTimeout or pass&quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>err</span><span class=p>,</span> <span class=n>SocketTimeout</span><span class=p>):</span>
            <span class=k>raise</span> <span class=n>ReadTimeoutError</span><span class=p>(</span>
                <span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=s2>&quot;Read timed out. (read timeout=</span><span class=si>%s</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=n>timeout_value</span>
            <span class=p>)</span>

        <span class=c1># See the above comment about EAGAIN in Python 3. In Python 2 we have</span>
        <span class=c1># to specifically catch it and throw the timeout error</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>err</span><span class=p>,</span> <span class=s2>&quot;errno&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>err</span><span class=o>.</span><span class=n>errno</span> <span class=ow>in</span> <span class=n>_blocking_errnos</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ReadTimeoutError</span><span class=p>(</span>
                <span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=s2>&quot;Read timed out. (read timeout=</span><span class=si>%s</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=n>timeout_value</span>
            <span class=p>)</span>

        <span class=c1># Catch possible read timeouts thrown as SSL errors. If not the</span>
        <span class=c1># case, rethrow the original. We need to do this because of:</span>
        <span class=c1># http://bugs.python.org/issue10272</span>
        <span class=k>if</span> <span class=s2>&quot;timed out&quot;</span> <span class=ow>in</span> <span class=nb>str</span><span class=p>(</span><span class=n>err</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;did not complete (read)&quot;</span> <span class=ow>in</span> <span class=nb>str</span><span class=p>(</span>
            <span class=n>err</span>
        <span class=p>):</span>  <span class=c1># Python &lt; 2.7.4</span>
            <span class=k>raise</span> <span class=n>ReadTimeoutError</span><span class=p>(</span>
                <span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=s2>&quot;Read timed out. (read timeout=</span><span class=si>%s</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=n>timeout_value</span>
            <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_make_request</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>,</span> <span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span> <span class=n>chunked</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=o>**</span><span class=n>httplib_request_kw</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Perform a request on a given urllib connection object taken from our</span>
<span class=sd>        pool.</span>

<span class=sd>        :param conn:</span>
<span class=sd>            a connection from one of our connection pools</span>

<span class=sd>        :param timeout:</span>
<span class=sd>            Socket timeout in seconds for the request. This can be a</span>
<span class=sd>            float or integer, which will set the same timeout value for</span>
<span class=sd>            the socket connect and the socket read, or an instance of</span>
<span class=sd>            :class:`urllib3.util.Timeout`, which gives you more fine-grained</span>
<span class=sd>            control over your timeouts.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num_requests</span> <span class=o>+=</span> <span class=mi>1</span>

        <span class=n>timeout_obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_timeout</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span>
        <span class=n>timeout_obj</span><span class=o>.</span><span class=n>start_connect</span><span class=p>()</span>
        <span class=n>conn</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout_obj</span><span class=o>.</span><span class=n>connect_timeout</span>

        <span class=c1># Trigger any extra validation we need to do.</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_validate_conn</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>
        <span class=k>except</span> <span class=p>(</span><span class=n>SocketTimeout</span><span class=p>,</span> <span class=n>BaseSSLError</span><span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
            <span class=c1># Py2 raises this as a BaseSSLError, Py3 raises it as socket timeout.</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_raise_timeout</span><span class=p>(</span><span class=n>err</span><span class=o>=</span><span class=n>e</span><span class=p>,</span> <span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span> <span class=n>timeout_value</span><span class=o>=</span><span class=n>conn</span><span class=o>.</span><span class=n>timeout</span><span class=p>)</span>
            <span class=k>raise</span>

        <span class=c1># conn.request() calls http.client.*.request, not the method in</span>
        <span class=c1># urllib3.request. It also calls makefile (recv) on the socket.</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>chunked</span><span class=p>:</span>
                <span class=n>conn</span><span class=o>.</span><span class=n>request_chunked</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=o>**</span><span class=n>httplib_request_kw</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>conn</span><span class=o>.</span><span class=n>request</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=o>**</span><span class=n>httplib_request_kw</span><span class=p>)</span>

        <span class=c1># We are swallowing BrokenPipeError (errno.EPIPE) since the server is</span>
        <span class=c1># legitimately able to close the connection after sending a valid response.</span>
        <span class=c1># With this behaviour, the received response is still readable.</span>
        <span class=k>except</span> <span class=ne>BrokenPipeError</span><span class=p>:</span>
            <span class=c1># Python 3</span>
            <span class=k>pass</span>
        <span class=k>except</span> <span class=ne>IOError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
            <span class=c1># Python 2 and macOS/Linux</span>
            <span class=c1># EPIPE and ESHUTDOWN are BrokenPipeError on Python 2, and EPROTOTYPE is needed on macOS</span>
            <span class=c1># https://erickt.github.io/blog/2014/11/19/adventures-in-debugging-a-potential-osx-kernel-bug/</span>
            <span class=k>if</span> <span class=n>e</span><span class=o>.</span><span class=n>errno</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span>
                <span class=n>errno</span><span class=o>.</span><span class=n>EPIPE</span><span class=p>,</span>
                <span class=n>errno</span><span class=o>.</span><span class=n>ESHUTDOWN</span><span class=p>,</span>
                <span class=n>errno</span><span class=o>.</span><span class=n>EPROTOTYPE</span><span class=p>,</span>
            <span class=p>}:</span>
                <span class=k>raise</span>

        <span class=c1># Reset the timeout for the recv() on the socket</span>
        <span class=n>read_timeout</span> <span class=o>=</span> <span class=n>timeout_obj</span><span class=o>.</span><span class=n>read_timeout</span>

        <span class=c1># App Engine doesn&#39;t have a sock attr</span>
        <span class=k>if</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;sock&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>
            <span class=c1># In Python 3 socket.py will catch EAGAIN and return None when you</span>
            <span class=c1># try and read into the file pointer created by http.client, which</span>
            <span class=c1># instead raises a BadStatusLine exception. Instead of catching</span>
            <span class=c1># the exception and assuming all BadStatusLine exceptions are read</span>
            <span class=c1># timeouts, check for a zero timeout before making the request.</span>
            <span class=k>if</span> <span class=n>read_timeout</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
                <span class=k>raise</span> <span class=n>ReadTimeoutError</span><span class=p>(</span>
                    <span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=s2>&quot;Read timed out. (read timeout=</span><span class=si>%s</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=n>read_timeout</span>
                <span class=p>)</span>
            <span class=k>if</span> <span class=n>read_timeout</span> <span class=ow>is</span> <span class=n>Timeout</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span><span class=p>:</span>
                <span class=n>conn</span><span class=o>.</span><span class=n>sock</span><span class=o>.</span><span class=n>settimeout</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>getdefaulttimeout</span><span class=p>())</span>
            <span class=k>else</span><span class=p>:</span>  <span class=c1># None or a value</span>
                <span class=n>conn</span><span class=o>.</span><span class=n>sock</span><span class=o>.</span><span class=n>settimeout</span><span class=p>(</span><span class=n>read_timeout</span><span class=p>)</span>

        <span class=c1># Receive the response from the server</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=c1># Python 2.7, use buffering of HTTP responses</span>
                <span class=n>httplib_response</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>getresponse</span><span class=p>(</span><span class=n>buffering</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
            <span class=k>except</span> <span class=ne>TypeError</span><span class=p>:</span>
                <span class=c1># Python 3</span>
                <span class=k>try</span><span class=p>:</span>
                    <span class=n>httplib_response</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>getresponse</span><span class=p>()</span>
                <span class=k>except</span> <span class=ne>BaseException</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
                    <span class=c1># Remove the TypeError from the exception chain in</span>
                    <span class=c1># Python 3 (including for exceptions like SystemExit).</span>
                    <span class=c1># Otherwise it looks like a bug in the code.</span>
                    <span class=n>six</span><span class=o>.</span><span class=n>raise_from</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>except</span> <span class=p>(</span><span class=n>SocketTimeout</span><span class=p>,</span> <span class=n>BaseSSLError</span><span class=p>,</span> <span class=n>SocketError</span><span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_raise_timeout</span><span class=p>(</span><span class=n>err</span><span class=o>=</span><span class=n>e</span><span class=p>,</span> <span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span> <span class=n>timeout_value</span><span class=o>=</span><span class=n>read_timeout</span><span class=p>)</span>
            <span class=k>raise</span>

        <span class=c1># AppEngine doesn&#39;t have a version attr.</span>
        <span class=n>http_version</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;_http_vsn_str&quot;</span><span class=p>,</span> <span class=s2>&quot;HTTP/?&quot;</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s1>&#39;</span><span class=si>%s</span><span class=s1>://</span><span class=si>%s</span><span class=s1>:</span><span class=si>%s</span><span class=s1> &quot;</span><span class=si>%s</span><span class=s1> </span><span class=si>%s</span><span class=s1> </span><span class=si>%s</span><span class=s1>&quot; </span><span class=si>%s</span><span class=s1> </span><span class=si>%s</span><span class=s1>&#39;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>,</span>
            <span class=n>method</span><span class=p>,</span>
            <span class=n>url</span><span class=p>,</span>
            <span class=n>http_version</span><span class=p>,</span>
            <span class=n>httplib_response</span><span class=o>.</span><span class=n>status</span><span class=p>,</span>
            <span class=n>httplib_response</span><span class=o>.</span><span class=n>length</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>assert_header_parsing</span><span class=p>(</span><span class=n>httplib_response</span><span class=o>.</span><span class=n>msg</span><span class=p>)</span>
        <span class=k>except</span> <span class=p>(</span><span class=n>HeaderParsingError</span><span class=p>,</span> <span class=ne>TypeError</span><span class=p>)</span> <span class=k>as</span> <span class=n>hpe</span><span class=p>:</span>  <span class=c1># Platform-specific: Python 3</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;Failed to parse headers (url=</span><span class=si>%s</span><span class=s2>): </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_absolute_url</span><span class=p>(</span><span class=n>url</span><span class=p>),</span>
                <span class=n>hpe</span><span class=p>,</span>
                <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
            <span class=p>)</span>

        <span class=k>return</span> <span class=n>httplib_response</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_absolute_url</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>Url</span><span class=p>(</span><span class=n>scheme</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>,</span> <span class=n>path</span><span class=o>=</span><span class=n>path</span><span class=p>)</span><span class=o>.</span><span class=n>url</span>

    <span class=k>def</span><span class=w> </span><span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Close all pooled connections and disable the pool.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=c1># Disable access to the pool</span>
        <span class=n>old_pool</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=p>,</span> <span class=kc>None</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
                <span class=n>conn</span> <span class=o>=</span> <span class=n>old_pool</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>block</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>conn</span><span class=p>:</span>
                    <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

        <span class=k>except</span> <span class=n>queue</span><span class=o>.</span><span class=n>Empty</span><span class=p>:</span>
            <span class=k>pass</span>  <span class=c1># Done.</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_same_host</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Check if the given ``url`` is a member of the same host as this</span>
<span class=sd>        connection pool.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>url</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>True</span>

        <span class=c1># TODO: Add optional support for socket.gethostbyname checking.</span>
        <span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span> <span class=o>=</span> <span class=n>get_host</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>host</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>host</span> <span class=o>=</span> <span class=n>_normalize_host</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=n>scheme</span><span class=p>)</span>

        <span class=c1># Use explicit default port for comparison when none is given</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>port</span><span class=p>:</span>
            <span class=n>port</span> <span class=o>=</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>)</span>
        <span class=k>elif</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>and</span> <span class=n>port</span> <span class=o>==</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>):</span>
            <span class=n>port</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=k>return</span> <span class=p>(</span><span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>)</span> <span class=o>==</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>urlopen</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>method</span><span class=p>,</span>
        <span class=n>url</span><span class=p>,</span>
        <span class=n>body</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
        <span class=n>assert_same_host</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
        <span class=n>timeout</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span>
        <span class=n>pool_timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>release_conn</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>chunked</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>body_pos</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>response_kw</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Get a connection from the pool and perform an HTTP request. This is the</span>
<span class=sd>        lowest level call for making a request, so you&#39;ll need to specify all</span>
<span class=sd>        the raw details.</span>

<span class=sd>        .. note::</span>

<span class=sd>           More commonly, it&#39;s appropriate to use a convenience method provided</span>
<span class=sd>           by :class:`.RequestMethods`, such as :meth:`request`.</span>

<span class=sd>        .. note::</span>

<span class=sd>           `release_conn` will only behave as expected if</span>
<span class=sd>           `preload_content=False` because we want to make</span>
<span class=sd>           `preload_content=False` the default behaviour someday soon without</span>
<span class=sd>           breaking backwards compatibility.</span>

<span class=sd>        :param method:</span>
<span class=sd>            HTTP request method (such as GET, POST, PUT, etc.)</span>

<span class=sd>        :param url:</span>
<span class=sd>            The URL to perform the request on.</span>

<span class=sd>        :param body:</span>
<span class=sd>            Data to send in the request body, either :class:`str`, :class:`bytes`,</span>
<span class=sd>            an iterable of :class:`str`/:class:`bytes`, or a file-like object.</span>

<span class=sd>        :param headers:</span>
<span class=sd>            Dictionary of custom headers to send, such as User-Agent,</span>
<span class=sd>            If-None-Match, etc. If None, pool headers are used. If provided,</span>
<span class=sd>            these headers completely replace any pool-specific headers.</span>

<span class=sd>        :param retries:</span>
<span class=sd>            Configure the number of retries to allow before raising a</span>
<span class=sd>            :class:`~urllib3.exceptions.MaxRetryError` exception.</span>

<span class=sd>            Pass ``None`` to retry until you receive a response. Pass a</span>
<span class=sd>            :class:`~urllib3.util.retry.Retry` object for fine-grained control</span>
<span class=sd>            over different types of retries.</span>
<span class=sd>            Pass an integer number to retry connection errors that many times,</span>
<span class=sd>            but no other types of errors. Pass zero to never retry.</span>

<span class=sd>            If ``False``, then retries are disabled and any exception is raised</span>
<span class=sd>            immediately. Also, instead of raising a MaxRetryError on redirects,</span>
<span class=sd>            the redirect response will be returned.</span>

<span class=sd>        :type retries: :class:`~urllib3.util.retry.Retry`, False, or an int.</span>

<span class=sd>        :param redirect:</span>
<span class=sd>            If True, automatically handle redirects (status codes 301, 302,</span>
<span class=sd>            303, 307, 308). Each redirect counts as a retry. Disabling retries</span>
<span class=sd>            will disable redirect, too.</span>

<span class=sd>        :param assert_same_host:</span>
<span class=sd>            If ``True``, will make sure that the host of the pool requests is</span>
<span class=sd>            consistent else will raise HostChangedError. When ``False``, you can</span>
<span class=sd>            use the pool on an HTTP proxy and request foreign hosts.</span>

<span class=sd>        :param timeout:</span>
<span class=sd>            If specified, overrides the default timeout for this one</span>
<span class=sd>            request. It may be a float (in seconds) or an instance of</span>
<span class=sd>            :class:`urllib3.util.Timeout`.</span>

<span class=sd>        :param pool_timeout:</span>
<span class=sd>            If set and the pool is set to block=True, then this method will</span>
<span class=sd>            block for ``pool_timeout`` seconds and raise EmptyPoolError if no</span>
<span class=sd>            connection is available within the time period.</span>

<span class=sd>        :param release_conn:</span>
<span class=sd>            If False, then the urlopen call will not release the connection</span>
<span class=sd>            back into the pool once a response is received (but will release if</span>
<span class=sd>            you read the entire contents of the response such as when</span>
<span class=sd>            `preload_content=True`). This is useful if you&#39;re not preloading</span>
<span class=sd>            the response&#39;s content immediately. You will need to call</span>
<span class=sd>            ``r.release_conn()`` on the response ``r`` to return the connection</span>
<span class=sd>            back into the pool. If None, it takes the value of</span>
<span class=sd>            ``response_kw.get(&#39;preload_content&#39;, True)``.</span>

<span class=sd>        :param chunked:</span>
<span class=sd>            If True, urllib3 will send the body using chunked transfer</span>
<span class=sd>            encoding. Otherwise, urllib3 will send the body using the standard</span>
<span class=sd>            content-length form. Defaults to False.</span>

<span class=sd>        :param int body_pos:</span>
<span class=sd>            Position to seek to in file-like body in the event of a retry or</span>
<span class=sd>            redirect. Typically this won&#39;t need to be set because urllib3 will</span>
<span class=sd>            auto-populate the value when needed.</span>

<span class=sd>        :param \\**response_kw:</span>
<span class=sd>            Additional parameters are passed to</span>
<span class=sd>            :meth:`urllib3.response.HTTPResponse.from_httplib`</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>parsed_url</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
        <span class=n>destination_scheme</span> <span class=o>=</span> <span class=n>parsed_url</span><span class=o>.</span><span class=n>scheme</span>

        <span class=k>if</span> <span class=n>headers</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>headers</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>Retry</span><span class=p>):</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>Retry</span><span class=o>.</span><span class=n>from_int</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>retries</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>release_conn</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>release_conn</span> <span class=o>=</span> <span class=n>response_kw</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;preload_content&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>

        <span class=c1># Check host</span>
        <span class=k>if</span> <span class=n>assert_same_host</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_same_host</span><span class=p>(</span><span class=n>url</span><span class=p>):</span>
            <span class=k>raise</span> <span class=n>HostChangedError</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>retries</span><span class=p>)</span>

        <span class=c1># Ensure that the URL we&#39;re connecting to is properly encoded</span>
        <span class=k>if</span> <span class=n>url</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>):</span>
            <span class=n>url</span> <span class=o>=</span> <span class=n>six</span><span class=o>.</span><span class=n>ensure_str</span><span class=p>(</span><span class=n>_encode_target</span><span class=p>(</span><span class=n>url</span><span class=p>))</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>url</span> <span class=o>=</span> <span class=n>six</span><span class=o>.</span><span class=n>ensure_str</span><span class=p>(</span><span class=n>parsed_url</span><span class=o>.</span><span class=n>url</span><span class=p>)</span>

        <span class=n>conn</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=c1># Track whether `conn` needs to be released before</span>
        <span class=c1># returning/raising/recursing. Update this variable if necessary, and</span>
        <span class=c1># leave `release_conn` constant throughout the function. That way, if</span>
        <span class=c1># the function recurses, the original value of `release_conn` will be</span>
        <span class=c1># passed down into the recursive call, and its value will be respected.</span>
        <span class=c1>#</span>
        <span class=c1># See issue #651 [1] for details.</span>
        <span class=c1>#</span>
        <span class=c1># [1] &lt;https://github.com/urllib3/urllib3/issues/651&gt;</span>
        <span class=n>release_this_conn</span> <span class=o>=</span> <span class=n>release_conn</span>

        <span class=n>http_tunnel_required</span> <span class=o>=</span> <span class=n>connection_requires_http_tunnel</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span><span class=p>,</span> <span class=n>destination_scheme</span>
        <span class=p>)</span>

        <span class=c1># Merge the proxy headers. Only done when not using HTTP CONNECT. We</span>
        <span class=c1># have to copy the headers dict so we can safely change it without those</span>
        <span class=c1># changes being reflected in anyone else&#39;s copy.</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>http_tunnel_required</span><span class=p>:</span>
            <span class=n>headers</span> <span class=o>=</span> <span class=n>headers</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
            <span class=n>headers</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>proxy_headers</span><span class=p>)</span>

        <span class=c1># Must keep the exception bound to a separate variable or else Python 3</span>
        <span class=c1># complains about UnboundLocalError.</span>
        <span class=n>err</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=c1># Keep track of whether we cleanly exited the except block. This</span>
        <span class=c1># ensures we do proper cleanup in finally.</span>
        <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=c1># Rewind body position, if needed. Record current position</span>
        <span class=c1># for future rewinds in the event of a redirect/retry.</span>
        <span class=n>body_pos</span> <span class=o>=</span> <span class=n>set_file_position</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=n>body_pos</span><span class=p>)</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=c1># Request a connection from the queue.</span>
            <span class=n>timeout_obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_timeout</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span>
            <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_conn</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>)</span>

            <span class=n>conn</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout_obj</span><span class=o>.</span><span class=n>connect_timeout</span>

            <span class=n>is_new_proxy_conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span>
                <span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;sock&quot;</span><span class=p>,</span> <span class=kc>None</span>
            <span class=p>)</span>
            <span class=k>if</span> <span class=n>is_new_proxy_conn</span> <span class=ow>and</span> <span class=n>http_tunnel_required</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_prepare_proxy</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

            <span class=c1># Make the request on the httplib connection object.</span>
            <span class=n>httplib_response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_make_request</span><span class=p>(</span>
                <span class=n>conn</span><span class=p>,</span>
                <span class=n>method</span><span class=p>,</span>
                <span class=n>url</span><span class=p>,</span>
                <span class=n>timeout</span><span class=o>=</span><span class=n>timeout_obj</span><span class=p>,</span>
                <span class=n>body</span><span class=o>=</span><span class=n>body</span><span class=p>,</span>
                <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span>
                <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
            <span class=p>)</span>

            <span class=c1># If we&#39;re going to release the connection in ``finally:``, then</span>
            <span class=c1># the response doesn&#39;t need to know about the connection. Otherwise</span>
            <span class=c1># it will also try to release it and we&#39;ll have a double-release</span>
            <span class=c1># mess.</span>
            <span class=n>response_conn</span> <span class=o>=</span> <span class=n>conn</span> <span class=k>if</span> <span class=ow>not</span> <span class=n>release_conn</span> <span class=k>else</span> <span class=kc>None</span>

            <span class=c1># Pass method to Response for length checking</span>
            <span class=n>response_kw</span><span class=p>[</span><span class=s2>&quot;request_method&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>method</span>

            <span class=c1># Import httplib&#39;s response into our own wrapper object</span>
            <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ResponseCls</span><span class=o>.</span><span class=n>from_httplib</span><span class=p>(</span>
                <span class=n>httplib_response</span><span class=p>,</span>
                <span class=n>pool</span><span class=o>=</span><span class=bp>self</span><span class=p>,</span>
                <span class=n>connection</span><span class=o>=</span><span class=n>response_conn</span><span class=p>,</span>
                <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
                <span class=o>**</span><span class=n>response_kw</span>
            <span class=p>)</span>

            <span class=c1># Everything went great!</span>
            <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>except</span> <span class=n>EmptyPoolError</span><span class=p>:</span>
            <span class=c1># Didn&#39;t get a connection from the pool, no need to clean up</span>
            <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>release_this_conn</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=k>raise</span>

        <span class=k>except</span> <span class=p>(</span>
            <span class=ne>TimeoutError</span><span class=p>,</span>
            <span class=n>HTTPException</span><span class=p>,</span>
            <span class=n>SocketError</span><span class=p>,</span>
            <span class=n>ProtocolError</span><span class=p>,</span>
            <span class=n>BaseSSLError</span><span class=p>,</span>
            <span class=n>SSLError</span><span class=p>,</span>
            <span class=n>CertificateError</span><span class=p>,</span>
        <span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
            <span class=c1># Discard the connection for these exceptions. It will be</span>
            <span class=c1># replaced during the next _get_conn() call.</span>
            <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>BaseSSLError</span><span class=p>,</span> <span class=n>CertificateError</span><span class=p>)):</span>
                <span class=n>e</span> <span class=o>=</span> <span class=n>SSLError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
            <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>SocketError</span><span class=p>,</span> <span class=n>NewConnectionError</span><span class=p>))</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>:</span>
                <span class=n>e</span> <span class=o>=</span> <span class=n>ProxyError</span><span class=p>(</span><span class=s2>&quot;Cannot connect to proxy.&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>
            <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>SocketError</span><span class=p>,</span> <span class=n>HTTPException</span><span class=p>)):</span>
                <span class=n>e</span> <span class=o>=</span> <span class=n>ProtocolError</span><span class=p>(</span><span class=s2>&quot;Connection aborted.&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>

            <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span>
                <span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>error</span><span class=o>=</span><span class=n>e</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=o>=</span><span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()[</span><span class=mi>2</span><span class=p>]</span>
            <span class=p>)</span>
            <span class=n>retries</span><span class=o>.</span><span class=n>sleep</span><span class=p>()</span>

            <span class=c1># Keep track of the error for the retry warning.</span>
            <span class=n>err</span> <span class=o>=</span> <span class=n>e</span>

        <span class=k>finally</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>clean_exit</span><span class=p>:</span>
                <span class=c1># We hit some kind of exception, handled or otherwise. We need</span>
                <span class=c1># to throw the connection away unless explicitly told not to.</span>
                <span class=c1># Close the connection, set the variable to None, and make sure</span>
                <span class=c1># we put the None back in the pool to avoid leaking it.</span>
                <span class=n>conn</span> <span class=o>=</span> <span class=n>conn</span> <span class=ow>and</span> <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
                <span class=n>release_this_conn</span> <span class=o>=</span> <span class=kc>True</span>

            <span class=k>if</span> <span class=n>release_this_conn</span><span class=p>:</span>
                <span class=c1># Put the connection back to be reused. If the connection is</span>
                <span class=c1># expired then it will be None, which will get replaced with a</span>
                <span class=c1># fresh connection during _get_conn.</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_put_conn</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>conn</span><span class=p>:</span>
            <span class=c1># Try again</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;Retrying (</span><span class=si>%r</span><span class=s2>) after connection broken by &#39;</span><span class=si>%r</span><span class=s2>&#39;: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>retries</span><span class=p>,</span> <span class=n>err</span><span class=p>,</span> <span class=n>url</span>
            <span class=p>)</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
                <span class=n>method</span><span class=p>,</span>
                <span class=n>url</span><span class=p>,</span>
                <span class=n>body</span><span class=p>,</span>
                <span class=n>headers</span><span class=p>,</span>
                <span class=n>retries</span><span class=p>,</span>
                <span class=n>redirect</span><span class=p>,</span>
                <span class=n>assert_same_host</span><span class=p>,</span>
                <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
                <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
                <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
                <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
                <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
                <span class=o>**</span><span class=n>response_kw</span>
            <span class=p>)</span>

        <span class=c1># Handle redirect?</span>
        <span class=n>redirect_location</span> <span class=o>=</span> <span class=n>redirect</span> <span class=ow>and</span> <span class=n>response</span><span class=o>.</span><span class=n>get_redirect_location</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>redirect_location</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>303</span><span class=p>:</span>
                <span class=n>method</span> <span class=o>=</span> <span class=s2>&quot;GET&quot;</span>

            <span class=k>try</span><span class=p>:</span>
                <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=n>response</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>)</span>
            <span class=k>except</span> <span class=n>MaxRetryError</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>raise_on_redirect</span><span class=p>:</span>
                    <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
                    <span class=k>raise</span>
                <span class=k>return</span> <span class=n>response</span>

            <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
            <span class=n>retries</span><span class=o>.</span><span class=n>sleep_for_retry</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Redirecting </span><span class=si>%s</span><span class=s2> -&gt; </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>)</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
                <span class=n>method</span><span class=p>,</span>
                <span class=n>redirect_location</span><span class=p>,</span>
                <span class=n>body</span><span class=p>,</span>
                <span class=n>headers</span><span class=p>,</span>
                <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
                <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span>
                <span class=n>assert_same_host</span><span class=o>=</span><span class=n>assert_same_host</span><span class=p>,</span>
                <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
                <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
                <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
                <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
                <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
                <span class=o>**</span><span class=n>response_kw</span>
            <span class=p>)</span>

        <span class=c1># Check if we should retry the HTTP response.</span>
        <span class=n>has_retry_after</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>getheader</span><span class=p>(</span><span class=s2>&quot;Retry-After&quot;</span><span class=p>))</span>
        <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>is_retry</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=n>has_retry_after</span><span class=p>):</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=n>response</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>)</span>
            <span class=k>except</span> <span class=n>MaxRetryError</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>raise_on_status</span><span class=p>:</span>
                    <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
                    <span class=k>raise</span>
                <span class=k>return</span> <span class=n>response</span>

            <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
            <span class=n>retries</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Retry: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>)</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
                <span class=n>method</span><span class=p>,</span>
                <span class=n>url</span><span class=p>,</span>
                <span class=n>body</span><span class=p>,</span>
                <span class=n>headers</span><span class=p>,</span>
                <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
                <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span>
                <span class=n>assert_same_host</span><span class=o>=</span><span class=n>assert_same_host</span><span class=p>,</span>
                <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
                <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
                <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
                <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
                <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
                <span class=o>**</span><span class=n>response_kw</span>
            <span class=p>)</span>

        <span class=k>return</span> <span class=n>response</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool.close class="doc doc-heading"> <code class="highlight language-python"><span class=n>close</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Close all pooled connections and disable the pool.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Close all pooled connections and disable the pool.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span>
    <span class=c1># Disable access to the pool</span>
    <span class=n>old_pool</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=p>,</span> <span class=kc>None</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
            <span class=n>conn</span> <span class=o>=</span> <span class=n>old_pool</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>block</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>conn</span><span class=p>:</span>
                <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

    <span class=k>except</span> <span class=n>queue</span><span class=o>.</span><span class=n>Empty</span><span class=p>:</span>
        <span class=k>pass</span>  <span class=c1># Done.</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool.is_same_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_same_host</span><span class=p>(</span><span class=n>url</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Check if the given <code>url</code> is a member of the same host as this connection pool.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_same_host</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Check if the given ``url`` is a member of the same host as this</span>
<span class=sd>    connection pool.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>url</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=c1># TODO: Add optional support for socket.gethostbyname checking.</span>
    <span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span> <span class=o>=</span> <span class=n>get_host</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>host</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>host</span> <span class=o>=</span> <span class=n>_normalize_host</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=n>scheme</span><span class=p>)</span>

    <span class=c1># Use explicit default port for comparison when none is given</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>port</span><span class=p>:</span>
        <span class=n>port</span> <span class=o>=</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>)</span>
    <span class=k>elif</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>and</span> <span class=n>port</span> <span class=o>==</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>):</span>
        <span class=n>port</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>return</span> <span class=p>(</span><span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>)</span> <span class=o>==</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool.urlopen class="doc doc-heading"> <code class="highlight language-python"><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>body</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>assert_same_host</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span> <span class=n>pool_timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>release_conn</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>chunked</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>body_pos</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>response_kw</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get a connection from the pool and perform an HTTP request. This is the lowest level call for making a request, so you'll need to specify all the raw details.</p> <p>.. note::</p> <p>More commonly, it's appropriate to use a convenience method provided by :class:<code>.RequestMethods</code>, such as :meth:<code>request</code>.</p> <p>.. note::</p> <p><code>release_conn</code> will only behave as expected if <code>preload_content=False</code> because we want to make <code>preload_content=False</code> the default behaviour someday soon without breaking backwards compatibility.</p> <p>:param method: HTTP request method (such as GET, POST, PUT, etc.)</p> <p>:param url: The URL to perform the request on.</p> <p>:param body: Data to send in the request body, either :class:<code>str</code>, :class:<code>bytes</code>, an iterable of :class:<code>str</code>/:class:<code>bytes</code>, or a file-like object.</p> <p>:param headers: Dictionary of custom headers to send, such as User-Agent, If-None-Match, etc. If None, pool headers are used. If provided, these headers completely replace any pool-specific headers.</p> <p>:param retries: Configure the number of retries to allow before raising a :class:<code>~urllib3.exceptions.MaxRetryError</code> exception.</p> <pre><code>Pass ``None`` to retry until you receive a response. Pass a
:class:`~urllib3.util.retry.Retry` object for fine-grained control
over different types of retries.
Pass an integer number to retry connection errors that many times,
but no other types of errors. Pass zero to never retry.

If ``False``, then retries are disabled and any exception is raised
immediately. Also, instead of raising a MaxRetryError on redirects,
the redirect response will be returned.
</code></pre> <p>:type retries: :class:<code>~urllib3.util.retry.Retry</code>, False, or an int.</p> <p>:param redirect: If True, automatically handle redirects (status codes 301, 302, 303, 307, 308). Each redirect counts as a retry. Disabling retries will disable redirect, too.</p> <p>:param assert_same_host: If <code>True</code>, will make sure that the host of the pool requests is consistent else will raise HostChangedError. When <code>False</code>, you can use the pool on an HTTP proxy and request foreign hosts.</p> <p>:param timeout: If specified, overrides the default timeout for this one request. It may be a float (in seconds) or an instance of :class:<code>urllib3.util.Timeout</code>.</p> <p>:param pool_timeout: If set and the pool is set to block=True, then this method will block for <code>pool_timeout</code> seconds and raise EmptyPoolError if no connection is available within the time period.</p> <p>:param release_conn: If False, then the urlopen call will not release the connection back into the pool once a response is received (but will release if you read the entire contents of the response such as when <code>preload_content=True</code>). This is useful if you're not preloading the response's content immediately. You will need to call <code>r.release_conn()</code> on the response <code>r</code> to return the connection back into the pool. If None, it takes the value of <code>response_kw.get('preload_content', True)</code>.</p> <p>:param chunked: If True, urllib3 will send the body using chunked transfer encoding. Otherwise, urllib3 will send the body using the standard content-length form. Defaults to False.</p> <p>:param int body_pos: Position to seek to in file-like body in the event of a retry or redirect. Typically this won't need to be set because urllib3 will auto-populate the value when needed.</p> <p>:param **response_kw: Additional parameters are passed to :meth:<code>urllib3.response.HTTPResponse.from_httplib</code></p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>urlopen</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>method</span><span class=p>,</span>
    <span class=n>url</span><span class=p>,</span>
    <span class=n>body</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>assert_same_host</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>timeout</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span>
    <span class=n>pool_timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>release_conn</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>chunked</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>body_pos</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>response_kw</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Get a connection from the pool and perform an HTTP request. This is the</span>
<span class=sd>    lowest level call for making a request, so you&#39;ll need to specify all</span>
<span class=sd>    the raw details.</span>

<span class=sd>    .. note::</span>

<span class=sd>       More commonly, it&#39;s appropriate to use a convenience method provided</span>
<span class=sd>       by :class:`.RequestMethods`, such as :meth:`request`.</span>

<span class=sd>    .. note::</span>

<span class=sd>       `release_conn` will only behave as expected if</span>
<span class=sd>       `preload_content=False` because we want to make</span>
<span class=sd>       `preload_content=False` the default behaviour someday soon without</span>
<span class=sd>       breaking backwards compatibility.</span>

<span class=sd>    :param method:</span>
<span class=sd>        HTTP request method (such as GET, POST, PUT, etc.)</span>

<span class=sd>    :param url:</span>
<span class=sd>        The URL to perform the request on.</span>

<span class=sd>    :param body:</span>
<span class=sd>        Data to send in the request body, either :class:`str`, :class:`bytes`,</span>
<span class=sd>        an iterable of :class:`str`/:class:`bytes`, or a file-like object.</span>

<span class=sd>    :param headers:</span>
<span class=sd>        Dictionary of custom headers to send, such as User-Agent,</span>
<span class=sd>        If-None-Match, etc. If None, pool headers are used. If provided,</span>
<span class=sd>        these headers completely replace any pool-specific headers.</span>

<span class=sd>    :param retries:</span>
<span class=sd>        Configure the number of retries to allow before raising a</span>
<span class=sd>        :class:`~urllib3.exceptions.MaxRetryError` exception.</span>

<span class=sd>        Pass ``None`` to retry until you receive a response. Pass a</span>
<span class=sd>        :class:`~urllib3.util.retry.Retry` object for fine-grained control</span>
<span class=sd>        over different types of retries.</span>
<span class=sd>        Pass an integer number to retry connection errors that many times,</span>
<span class=sd>        but no other types of errors. Pass zero to never retry.</span>

<span class=sd>        If ``False``, then retries are disabled and any exception is raised</span>
<span class=sd>        immediately. Also, instead of raising a MaxRetryError on redirects,</span>
<span class=sd>        the redirect response will be returned.</span>

<span class=sd>    :type retries: :class:`~urllib3.util.retry.Retry`, False, or an int.</span>

<span class=sd>    :param redirect:</span>
<span class=sd>        If True, automatically handle redirects (status codes 301, 302,</span>
<span class=sd>        303, 307, 308). Each redirect counts as a retry. Disabling retries</span>
<span class=sd>        will disable redirect, too.</span>

<span class=sd>    :param assert_same_host:</span>
<span class=sd>        If ``True``, will make sure that the host of the pool requests is</span>
<span class=sd>        consistent else will raise HostChangedError. When ``False``, you can</span>
<span class=sd>        use the pool on an HTTP proxy and request foreign hosts.</span>

<span class=sd>    :param timeout:</span>
<span class=sd>        If specified, overrides the default timeout for this one</span>
<span class=sd>        request. It may be a float (in seconds) or an instance of</span>
<span class=sd>        :class:`urllib3.util.Timeout`.</span>

<span class=sd>    :param pool_timeout:</span>
<span class=sd>        If set and the pool is set to block=True, then this method will</span>
<span class=sd>        block for ``pool_timeout`` seconds and raise EmptyPoolError if no</span>
<span class=sd>        connection is available within the time period.</span>

<span class=sd>    :param release_conn:</span>
<span class=sd>        If False, then the urlopen call will not release the connection</span>
<span class=sd>        back into the pool once a response is received (but will release if</span>
<span class=sd>        you read the entire contents of the response such as when</span>
<span class=sd>        `preload_content=True`). This is useful if you&#39;re not preloading</span>
<span class=sd>        the response&#39;s content immediately. You will need to call</span>
<span class=sd>        ``r.release_conn()`` on the response ``r`` to return the connection</span>
<span class=sd>        back into the pool. If None, it takes the value of</span>
<span class=sd>        ``response_kw.get(&#39;preload_content&#39;, True)``.</span>

<span class=sd>    :param chunked:</span>
<span class=sd>        If True, urllib3 will send the body using chunked transfer</span>
<span class=sd>        encoding. Otherwise, urllib3 will send the body using the standard</span>
<span class=sd>        content-length form. Defaults to False.</span>

<span class=sd>    :param int body_pos:</span>
<span class=sd>        Position to seek to in file-like body in the event of a retry or</span>
<span class=sd>        redirect. Typically this won&#39;t need to be set because urllib3 will</span>
<span class=sd>        auto-populate the value when needed.</span>

<span class=sd>    :param \\**response_kw:</span>
<span class=sd>        Additional parameters are passed to</span>
<span class=sd>        :meth:`urllib3.response.HTTPResponse.from_httplib`</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>parsed_url</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=n>destination_scheme</span> <span class=o>=</span> <span class=n>parsed_url</span><span class=o>.</span><span class=n>scheme</span>

    <span class=k>if</span> <span class=n>headers</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>headers</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>Retry</span><span class=p>):</span>
        <span class=n>retries</span> <span class=o>=</span> <span class=n>Retry</span><span class=o>.</span><span class=n>from_int</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>retries</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>release_conn</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>release_conn</span> <span class=o>=</span> <span class=n>response_kw</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;preload_content&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>

    <span class=c1># Check host</span>
    <span class=k>if</span> <span class=n>assert_same_host</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_same_host</span><span class=p>(</span><span class=n>url</span><span class=p>):</span>
        <span class=k>raise</span> <span class=n>HostChangedError</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>retries</span><span class=p>)</span>

    <span class=c1># Ensure that the URL we&#39;re connecting to is properly encoded</span>
    <span class=k>if</span> <span class=n>url</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>):</span>
        <span class=n>url</span> <span class=o>=</span> <span class=n>six</span><span class=o>.</span><span class=n>ensure_str</span><span class=p>(</span><span class=n>_encode_target</span><span class=p>(</span><span class=n>url</span><span class=p>))</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>url</span> <span class=o>=</span> <span class=n>six</span><span class=o>.</span><span class=n>ensure_str</span><span class=p>(</span><span class=n>parsed_url</span><span class=o>.</span><span class=n>url</span><span class=p>)</span>

    <span class=n>conn</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Track whether `conn` needs to be released before</span>
    <span class=c1># returning/raising/recursing. Update this variable if necessary, and</span>
    <span class=c1># leave `release_conn` constant throughout the function. That way, if</span>
    <span class=c1># the function recurses, the original value of `release_conn` will be</span>
    <span class=c1># passed down into the recursive call, and its value will be respected.</span>
    <span class=c1>#</span>
    <span class=c1># See issue #651 [1] for details.</span>
    <span class=c1>#</span>
    <span class=c1># [1] &lt;https://github.com/urllib3/urllib3/issues/651&gt;</span>
    <span class=n>release_this_conn</span> <span class=o>=</span> <span class=n>release_conn</span>

    <span class=n>http_tunnel_required</span> <span class=o>=</span> <span class=n>connection_requires_http_tunnel</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span><span class=p>,</span> <span class=n>destination_scheme</span>
    <span class=p>)</span>

    <span class=c1># Merge the proxy headers. Only done when not using HTTP CONNECT. We</span>
    <span class=c1># have to copy the headers dict so we can safely change it without those</span>
    <span class=c1># changes being reflected in anyone else&#39;s copy.</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>http_tunnel_required</span><span class=p>:</span>
        <span class=n>headers</span> <span class=o>=</span> <span class=n>headers</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
        <span class=n>headers</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>proxy_headers</span><span class=p>)</span>

    <span class=c1># Must keep the exception bound to a separate variable or else Python 3</span>
    <span class=c1># complains about UnboundLocalError.</span>
    <span class=n>err</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Keep track of whether we cleanly exited the except block. This</span>
    <span class=c1># ensures we do proper cleanup in finally.</span>
    <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=c1># Rewind body position, if needed. Record current position</span>
    <span class=c1># for future rewinds in the event of a redirect/retry.</span>
    <span class=n>body_pos</span> <span class=o>=</span> <span class=n>set_file_position</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=n>body_pos</span><span class=p>)</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=c1># Request a connection from the queue.</span>
        <span class=n>timeout_obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_timeout</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span>
        <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_conn</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>)</span>

        <span class=n>conn</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout_obj</span><span class=o>.</span><span class=n>connect_timeout</span>

        <span class=n>is_new_proxy_conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span>
            <span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;sock&quot;</span><span class=p>,</span> <span class=kc>None</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>is_new_proxy_conn</span> <span class=ow>and</span> <span class=n>http_tunnel_required</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_prepare_proxy</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

        <span class=c1># Make the request on the httplib connection object.</span>
        <span class=n>httplib_response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_make_request</span><span class=p>(</span>
            <span class=n>conn</span><span class=p>,</span>
            <span class=n>method</span><span class=p>,</span>
            <span class=n>url</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=n>timeout_obj</span><span class=p>,</span>
            <span class=n>body</span><span class=o>=</span><span class=n>body</span><span class=p>,</span>
            <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span>
            <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=c1># If we&#39;re going to release the connection in ``finally:``, then</span>
        <span class=c1># the response doesn&#39;t need to know about the connection. Otherwise</span>
        <span class=c1># it will also try to release it and we&#39;ll have a double-release</span>
        <span class=c1># mess.</span>
        <span class=n>response_conn</span> <span class=o>=</span> <span class=n>conn</span> <span class=k>if</span> <span class=ow>not</span> <span class=n>release_conn</span> <span class=k>else</span> <span class=kc>None</span>

        <span class=c1># Pass method to Response for length checking</span>
        <span class=n>response_kw</span><span class=p>[</span><span class=s2>&quot;request_method&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>method</span>

        <span class=c1># Import httplib&#39;s response into our own wrapper object</span>
        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ResponseCls</span><span class=o>.</span><span class=n>from_httplib</span><span class=p>(</span>
            <span class=n>httplib_response</span><span class=p>,</span>
            <span class=n>pool</span><span class=o>=</span><span class=bp>self</span><span class=p>,</span>
            <span class=n>connection</span><span class=o>=</span><span class=n>response_conn</span><span class=p>,</span>
            <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
            <span class=o>**</span><span class=n>response_kw</span>
        <span class=p>)</span>

        <span class=c1># Everything went great!</span>
        <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>except</span> <span class=n>EmptyPoolError</span><span class=p>:</span>
        <span class=c1># Didn&#39;t get a connection from the pool, no need to clean up</span>
        <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>release_this_conn</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=k>raise</span>

    <span class=k>except</span> <span class=p>(</span>
        <span class=ne>TimeoutError</span><span class=p>,</span>
        <span class=n>HTTPException</span><span class=p>,</span>
        <span class=n>SocketError</span><span class=p>,</span>
        <span class=n>ProtocolError</span><span class=p>,</span>
        <span class=n>BaseSSLError</span><span class=p>,</span>
        <span class=n>SSLError</span><span class=p>,</span>
        <span class=n>CertificateError</span><span class=p>,</span>
    <span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
        <span class=c1># Discard the connection for these exceptions. It will be</span>
        <span class=c1># replaced during the next _get_conn() call.</span>
        <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>BaseSSLError</span><span class=p>,</span> <span class=n>CertificateError</span><span class=p>)):</span>
            <span class=n>e</span> <span class=o>=</span> <span class=n>SSLError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>SocketError</span><span class=p>,</span> <span class=n>NewConnectionError</span><span class=p>))</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>:</span>
            <span class=n>e</span> <span class=o>=</span> <span class=n>ProxyError</span><span class=p>(</span><span class=s2>&quot;Cannot connect to proxy.&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>SocketError</span><span class=p>,</span> <span class=n>HTTPException</span><span class=p>)):</span>
            <span class=n>e</span> <span class=o>=</span> <span class=n>ProtocolError</span><span class=p>(</span><span class=s2>&quot;Connection aborted.&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>

        <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span>
            <span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>error</span><span class=o>=</span><span class=n>e</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=o>=</span><span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()[</span><span class=mi>2</span><span class=p>]</span>
        <span class=p>)</span>
        <span class=n>retries</span><span class=o>.</span><span class=n>sleep</span><span class=p>()</span>

        <span class=c1># Keep track of the error for the retry warning.</span>
        <span class=n>err</span> <span class=o>=</span> <span class=n>e</span>

    <span class=k>finally</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>clean_exit</span><span class=p>:</span>
            <span class=c1># We hit some kind of exception, handled or otherwise. We need</span>
            <span class=c1># to throw the connection away unless explicitly told not to.</span>
            <span class=c1># Close the connection, set the variable to None, and make sure</span>
            <span class=c1># we put the None back in the pool to avoid leaking it.</span>
            <span class=n>conn</span> <span class=o>=</span> <span class=n>conn</span> <span class=ow>and</span> <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
            <span class=n>release_this_conn</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>if</span> <span class=n>release_this_conn</span><span class=p>:</span>
            <span class=c1># Put the connection back to be reused. If the connection is</span>
            <span class=c1># expired then it will be None, which will get replaced with a</span>
            <span class=c1># fresh connection during _get_conn.</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_put_conn</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>conn</span><span class=p>:</span>
        <span class=c1># Try again</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
            <span class=s2>&quot;Retrying (</span><span class=si>%r</span><span class=s2>) after connection broken by &#39;</span><span class=si>%r</span><span class=s2>&#39;: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>retries</span><span class=p>,</span> <span class=n>err</span><span class=p>,</span> <span class=n>url</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
            <span class=n>method</span><span class=p>,</span>
            <span class=n>url</span><span class=p>,</span>
            <span class=n>body</span><span class=p>,</span>
            <span class=n>headers</span><span class=p>,</span>
            <span class=n>retries</span><span class=p>,</span>
            <span class=n>redirect</span><span class=p>,</span>
            <span class=n>assert_same_host</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
            <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
            <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
            <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
            <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
            <span class=o>**</span><span class=n>response_kw</span>
        <span class=p>)</span>

    <span class=c1># Handle redirect?</span>
    <span class=n>redirect_location</span> <span class=o>=</span> <span class=n>redirect</span> <span class=ow>and</span> <span class=n>response</span><span class=o>.</span><span class=n>get_redirect_location</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>redirect_location</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>303</span><span class=p>:</span>
            <span class=n>method</span> <span class=o>=</span> <span class=s2>&quot;GET&quot;</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=n>response</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>)</span>
        <span class=k>except</span> <span class=n>MaxRetryError</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>raise_on_redirect</span><span class=p>:</span>
                <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
                <span class=k>raise</span>
            <span class=k>return</span> <span class=n>response</span>

        <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
        <span class=n>retries</span><span class=o>.</span><span class=n>sleep_for_retry</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Redirecting </span><span class=si>%s</span><span class=s2> -&gt; </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
            <span class=n>method</span><span class=p>,</span>
            <span class=n>redirect_location</span><span class=p>,</span>
            <span class=n>body</span><span class=p>,</span>
            <span class=n>headers</span><span class=p>,</span>
            <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
            <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span>
            <span class=n>assert_same_host</span><span class=o>=</span><span class=n>assert_same_host</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
            <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
            <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
            <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
            <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
            <span class=o>**</span><span class=n>response_kw</span>
        <span class=p>)</span>

    <span class=c1># Check if we should retry the HTTP response.</span>
    <span class=n>has_retry_after</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>getheader</span><span class=p>(</span><span class=s2>&quot;Retry-After&quot;</span><span class=p>))</span>
    <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>is_retry</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=n>has_retry_after</span><span class=p>):</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=n>response</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>)</span>
        <span class=k>except</span> <span class=n>MaxRetryError</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>raise_on_status</span><span class=p>:</span>
                <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
                <span class=k>raise</span>
            <span class=k>return</span> <span class=n>response</span>

        <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
        <span class=n>retries</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Retry: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
            <span class=n>method</span><span class=p>,</span>
            <span class=n>url</span><span class=p>,</span>
            <span class=n>body</span><span class=p>,</span>
            <span class=n>headers</span><span class=p>,</span>
            <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
            <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span>
            <span class=n>assert_same_host</span><span class=o>=</span><span class=n>assert_same_host</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
            <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
            <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
            <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
            <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
            <span class=o>**</span><span class=n>response_kw</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>response</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_fusion.vendor.urllib3.connectionpool.HTTPSConnectionPool class="doc doc-heading"> <code>HTTPSConnectionPool</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="HTTPConnectionPool (client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool)" href=#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool>HTTPConnectionPool</a></code></p> <p>Same as :class:<code>.HTTPConnectionPool</code>, but HTTPS.</p> <p>:class:<code>.HTTPSConnection</code> uses one of <code>assert_fingerprint</code>, <code>assert_hostname</code> and <code>host</code> in this order to verify connections. If <code>assert_hostname</code> is False, no verification is done.</p> <p>The <code>key_file</code>, <code>cert_file</code>, <code>cert_reqs</code>, <code>ca_certs</code>, <code>ca_cert_dir</code>, <code>ssl_version</code>, <code>key_password</code> are only used if :mod:<code>ssl</code> is available and are fed into :meth:<code>urllib3.util.ssl_wrap_socket</code> to upgrade the connection socket into an SSL socket.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 865</span>
<span class=normal> 866</span>
<span class=normal> 867</span>
<span class=normal> 868</span>
<span class=normal> 869</span>
<span class=normal> 870</span>
<span class=normal> 871</span>
<span class=normal> 872</span>
<span class=normal> 873</span>
<span class=normal> 874</span>
<span class=normal> 875</span>
<span class=normal> 876</span>
<span class=normal> 877</span>
<span class=normal> 878</span>
<span class=normal> 879</span>
<span class=normal> 880</span>
<span class=normal> 881</span>
<span class=normal> 882</span>
<span class=normal> 883</span>
<span class=normal> 884</span>
<span class=normal> 885</span>
<span class=normal> 886</span>
<span class=normal> 887</span>
<span class=normal> 888</span>
<span class=normal> 889</span>
<span class=normal> 890</span>
<span class=normal> 891</span>
<span class=normal> 892</span>
<span class=normal> 893</span>
<span class=normal> 894</span>
<span class=normal> 895</span>
<span class=normal> 896</span>
<span class=normal> 897</span>
<span class=normal> 898</span>
<span class=normal> 899</span>
<span class=normal> 900</span>
<span class=normal> 901</span>
<span class=normal> 902</span>
<span class=normal> 903</span>
<span class=normal> 904</span>
<span class=normal> 905</span>
<span class=normal> 906</span>
<span class=normal> 907</span>
<span class=normal> 908</span>
<span class=normal> 909</span>
<span class=normal> 910</span>
<span class=normal> 911</span>
<span class=normal> 912</span>
<span class=normal> 913</span>
<span class=normal> 914</span>
<span class=normal> 915</span>
<span class=normal> 916</span>
<span class=normal> 917</span>
<span class=normal> 918</span>
<span class=normal> 919</span>
<span class=normal> 920</span>
<span class=normal> 921</span>
<span class=normal> 922</span>
<span class=normal> 923</span>
<span class=normal> 924</span>
<span class=normal> 925</span>
<span class=normal> 926</span>
<span class=normal> 927</span>
<span class=normal> 928</span>
<span class=normal> 929</span>
<span class=normal> 930</span>
<span class=normal> 931</span>
<span class=normal> 932</span>
<span class=normal> 933</span>
<span class=normal> 934</span>
<span class=normal> 935</span>
<span class=normal> 936</span>
<span class=normal> 937</span>
<span class=normal> 938</span>
<span class=normal> 939</span>
<span class=normal> 940</span>
<span class=normal> 941</span>
<span class=normal> 942</span>
<span class=normal> 943</span>
<span class=normal> 944</span>
<span class=normal> 945</span>
<span class=normal> 946</span>
<span class=normal> 947</span>
<span class=normal> 948</span>
<span class=normal> 949</span>
<span class=normal> 950</span>
<span class=normal> 951</span>
<span class=normal> 952</span>
<span class=normal> 953</span>
<span class=normal> 954</span>
<span class=normal> 955</span>
<span class=normal> 956</span>
<span class=normal> 957</span>
<span class=normal> 958</span>
<span class=normal> 959</span>
<span class=normal> 960</span>
<span class=normal> 961</span>
<span class=normal> 962</span>
<span class=normal> 963</span>
<span class=normal> 964</span>
<span class=normal> 965</span>
<span class=normal> 966</span>
<span class=normal> 967</span>
<span class=normal> 968</span>
<span class=normal> 969</span>
<span class=normal> 970</span>
<span class=normal> 971</span>
<span class=normal> 972</span>
<span class=normal> 973</span>
<span class=normal> 974</span>
<span class=normal> 975</span>
<span class=normal> 976</span>
<span class=normal> 977</span>
<span class=normal> 978</span>
<span class=normal> 979</span>
<span class=normal> 980</span>
<span class=normal> 981</span>
<span class=normal> 982</span>
<span class=normal> 983</span>
<span class=normal> 984</span>
<span class=normal> 985</span>
<span class=normal> 986</span>
<span class=normal> 987</span>
<span class=normal> 988</span>
<span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span>
<span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span>
<span class=normal>1017</span>
<span class=normal>1018</span>
<span class=normal>1019</span>
<span class=normal>1020</span>
<span class=normal>1021</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>HTTPSConnectionPool</span><span class=p>(</span><span class=n>HTTPConnectionPool</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Same as :class:`.HTTPConnectionPool`, but HTTPS.</span>

<span class=sd>    :class:`.HTTPSConnection` uses one of ``assert_fingerprint``,</span>
<span class=sd>    ``assert_hostname`` and ``host`` in this order to verify connections.</span>
<span class=sd>    If ``assert_hostname`` is False, no verification is done.</span>

<span class=sd>    The ``key_file``, ``cert_file``, ``cert_reqs``, ``ca_certs``,</span>
<span class=sd>    ``ca_cert_dir``, ``ssl_version``, ``key_password`` are only used if :mod:`ssl`</span>
<span class=sd>    is available and are fed into :meth:`urllib3.util.ssl_wrap_socket` to upgrade</span>
<span class=sd>    the connection socket into an SSL socket.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>scheme</span> <span class=o>=</span> <span class=s2>&quot;https&quot;</span>
    <span class=n>ConnectionCls</span> <span class=o>=</span> <span class=n>HTTPSConnection</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>host</span><span class=p>,</span>
        <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>strict</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>timeout</span><span class=o>=</span><span class=n>Timeout</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span><span class=p>,</span>
        <span class=n>maxsize</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
        <span class=n>block</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_proxy</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_proxy_headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>key_file</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>cert_file</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>cert_reqs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>key_password</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>ca_certs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>ssl_version</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>assert_hostname</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>assert_fingerprint</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>ca_cert_dir</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>conn_kw</span>
    <span class=p>):</span>

        <span class=n>HTTPConnectionPool</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span>
            <span class=n>host</span><span class=p>,</span>
            <span class=n>port</span><span class=p>,</span>
            <span class=n>strict</span><span class=p>,</span>
            <span class=n>timeout</span><span class=p>,</span>
            <span class=n>maxsize</span><span class=p>,</span>
            <span class=n>block</span><span class=p>,</span>
            <span class=n>headers</span><span class=p>,</span>
            <span class=n>retries</span><span class=p>,</span>
            <span class=n>_proxy</span><span class=p>,</span>
            <span class=n>_proxy_headers</span><span class=p>,</span>
            <span class=o>**</span><span class=n>conn_kw</span>
        <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>key_file</span> <span class=o>=</span> <span class=n>key_file</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>cert_file</span> <span class=o>=</span> <span class=n>cert_file</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>cert_reqs</span> <span class=o>=</span> <span class=n>cert_reqs</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>key_password</span> <span class=o>=</span> <span class=n>key_password</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>ca_certs</span> <span class=o>=</span> <span class=n>ca_certs</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>ca_cert_dir</span> <span class=o>=</span> <span class=n>ca_cert_dir</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>ssl_version</span> <span class=o>=</span> <span class=n>ssl_version</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>assert_hostname</span> <span class=o>=</span> <span class=n>assert_hostname</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>assert_fingerprint</span> <span class=o>=</span> <span class=n>assert_fingerprint</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_prepare_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Prepare the ``connection`` for :meth:`urllib3.util.ssl_wrap_socket`</span>
<span class=sd>        and establish the tunnel if proxy is used.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>VerifiedHTTPSConnection</span><span class=p>):</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>set_cert</span><span class=p>(</span>
                <span class=n>key_file</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>key_file</span><span class=p>,</span>
                <span class=n>key_password</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>key_password</span><span class=p>,</span>
                <span class=n>cert_file</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>cert_file</span><span class=p>,</span>
                <span class=n>cert_reqs</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>cert_reqs</span><span class=p>,</span>
                <span class=n>ca_certs</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>ca_certs</span><span class=p>,</span>
                <span class=n>ca_cert_dir</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>ca_cert_dir</span><span class=p>,</span>
                <span class=n>assert_hostname</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>assert_hostname</span><span class=p>,</span>
                <span class=n>assert_fingerprint</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>assert_fingerprint</span><span class=p>,</span>
            <span class=p>)</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>ssl_version</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ssl_version</span>
        <span class=k>return</span> <span class=n>conn</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_prepare_proxy</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Establishes a tunnel connection through HTTP CONNECT.</span>

<span class=sd>        Tunnel connection is established early because otherwise httplib would</span>
<span class=sd>        improperly set Host: header to proxy&#39;s IP:port.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>conn</span><span class=o>.</span><span class=n>set_tunnel</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_proxy_host</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_headers</span><span class=p>)</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=o>.</span><span class=n>scheme</span> <span class=o>==</span> <span class=s2>&quot;https&quot;</span><span class=p>:</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>tls_in_tls_required</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=n>conn</span><span class=o>.</span><span class=n>connect</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_new_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Return a fresh :class:`http.client.HTTPSConnection`.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num_connections</span> <span class=o>+=</span> <span class=mi>1</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s2>&quot;Starting new HTTPS connection (</span><span class=si>%d</span><span class=s2>): </span><span class=si>%s</span><span class=s2>:</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>num_connections</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>or</span> <span class=s2>&quot;443&quot;</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>ConnectionCls</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>ConnectionCls</span> <span class=ow>is</span> <span class=n>DummyConnection</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>SSLError</span><span class=p>(</span>
                <span class=s2>&quot;Can&#39;t connect to HTTPS URL because the SSL module is not available.&quot;</span>
            <span class=p>)</span>

        <span class=n>actual_host</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span>
        <span class=n>actual_port</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>actual_host</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=o>.</span><span class=n>host</span>
            <span class=n>actual_port</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=o>.</span><span class=n>port</span>

        <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ConnectionCls</span><span class=p>(</span>
            <span class=n>host</span><span class=o>=</span><span class=n>actual_host</span><span class=p>,</span>
            <span class=n>port</span><span class=o>=</span><span class=n>actual_port</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>timeout</span><span class=o>.</span><span class=n>connect_timeout</span><span class=p>,</span>
            <span class=n>strict</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>strict</span><span class=p>,</span>
            <span class=n>cert_file</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>cert_file</span><span class=p>,</span>
            <span class=n>key_file</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>key_file</span><span class=p>,</span>
            <span class=n>key_password</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>key_password</span><span class=p>,</span>
            <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span>
        <span class=p>)</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_prepare_conn</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_validate_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Called right before a request is made, after the socket is created.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>HTTPSConnectionPool</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>_validate_conn</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

        <span class=c1># Force connect early to allow us to validate the connection.</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;sock&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>  <span class=c1># AppEngine might not have  `.sock`</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>connect</span><span class=p>()</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>conn</span><span class=o>.</span><span class=n>is_verified</span><span class=p>:</span>
            <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span>
                <span class=p>(</span>
                    <span class=s2>&quot;Unverified HTTPS request is being made to host &#39;</span><span class=si>%s</span><span class=s2>&#39;. &quot;</span>
                    <span class=s2>&quot;Adding certificate verification is strongly advised. See: &quot;</span>
                    <span class=s2>&quot;https://urllib3.readthedocs.io/en/1.26.x/advanced-usage.html&quot;</span>
                    <span class=s2>&quot;#ssl-warnings&quot;</span> <span class=o>%</span> <span class=n>conn</span><span class=o>.</span><span class=n>host</span>
                <span class=p>),</span>
                <span class=n>InsecureRequestWarning</span><span class=p>,</span>
            <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_fusion.vendor.urllib3.connectionpool.connection_from_url class="doc doc-heading"> <code class="highlight language-python"><span class=n>connection_from_url</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Given a url, return an :class:<code>.ConnectionPool</code> instance of its host.</p> <p>This is a shortcut for not having to parse out the scheme, host, and port of the url before creating an :class:<code>.ConnectionPool</code> instance.</p> <p>:param url: Absolute URL string that must include the scheme. Port is optional.</p> <p>:param **kw: Passes additional parameters to the constructor of the appropriate :class:<code>.ConnectionPool</code>. Useful for specifying things like timeout, maxsize, headers, etc.</p> <p>Example::</p> <pre><code>&gt;&gt;&gt; conn = connection_from_url('http://google.com/')
&gt;&gt;&gt; r = conn.request('GET', '/')
</code></pre> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1024</span>
<span class=normal>1025</span>
<span class=normal>1026</span>
<span class=normal>1027</span>
<span class=normal>1028</span>
<span class=normal>1029</span>
<span class=normal>1030</span>
<span class=normal>1031</span>
<span class=normal>1032</span>
<span class=normal>1033</span>
<span class=normal>1034</span>
<span class=normal>1035</span>
<span class=normal>1036</span>
<span class=normal>1037</span>
<span class=normal>1038</span>
<span class=normal>1039</span>
<span class=normal>1040</span>
<span class=normal>1041</span>
<span class=normal>1042</span>
<span class=normal>1043</span>
<span class=normal>1044</span>
<span class=normal>1045</span>
<span class=normal>1046</span>
<span class=normal>1047</span>
<span class=normal>1048</span>
<span class=normal>1049</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>connection_from_url</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Given a url, return an :class:`.ConnectionPool` instance of its host.</span>

<span class=sd>    This is a shortcut for not having to parse out the scheme, host, and port</span>
<span class=sd>    of the url before creating an :class:`.ConnectionPool` instance.</span>

<span class=sd>    :param url:</span>
<span class=sd>        Absolute URL string that must include the scheme. Port is optional.</span>

<span class=sd>    :param \\**kw:</span>
<span class=sd>        Passes additional parameters to the constructor of the appropriate</span>
<span class=sd>        :class:`.ConnectionPool`. Useful for specifying things like</span>
<span class=sd>        timeout, maxsize, headers, etc.</span>

<span class=sd>    Example::</span>

<span class=sd>        &gt;&gt;&gt; conn = connection_from_url(&#39;http://google.com/&#39;)</span>
<span class=sd>        &gt;&gt;&gt; r = conn.request(&#39;GET&#39;, &#39;/&#39;)</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span> <span class=o>=</span> <span class=n>get_host</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=n>port</span> <span class=o>=</span> <span class=n>port</span> <span class=ow>or</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>,</span> <span class=mi>80</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>scheme</span> <span class=o>==</span> <span class=s2>&quot;https&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>HTTPSConnectionPool</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=n>port</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>HTTPConnectionPool</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=n>port</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>