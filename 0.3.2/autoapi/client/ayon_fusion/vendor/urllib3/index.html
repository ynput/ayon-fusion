<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=prev href=../attr/validators.html><link rel=next href=_collections.html><link rel=icon href=../../../../../img/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.9"><title>urllib3 - ayon-fusion</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.4af4bdda.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.06af60db.min.css><script src=https://unpkg.com/iframe-worker/shim></script><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../css/custom.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#client.ayon_fusion.vendor.urllib3 class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../../index.html title=ayon-fusion class="md-header__button md-logo" aria-label=ayon-fusion data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> ayon-fusion </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> urllib3 </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/ynput/ayon-fusion title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../../index.html title=ayon-fusion class="md-nav__button md-logo" aria-label=ayon-fusion data-md-component=logo> <img src=../../../../../img/ay-symbol-blackw-full.png alt=logo> </a> ayon-fusion </label> <div class=md-nav__source> <a href=https://github.com/ynput/ayon-fusion title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg> </div> <div class=md-source__repository> GitHub </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../../index.html class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../../../license.html class=md-nav__link> <span class=md-ellipsis> License </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Reference </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1 checked> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> client </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> client </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1 checked> <div class="md-nav__link md-nav__container"> <a href=../../index.html class="md-nav__link "> <span class=md-ellipsis> ayon_fusion </span> </a> <label class="md-nav__link " for=__nav_3_1_1 id=__nav_3_1_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_1_1_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1> <span class="md-nav__icon md-icon"></span> ayon_fusion </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../addon.html class=md-nav__link> <span class=md-ellipsis> addon </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../api/action.html class=md-nav__link> <span class=md-ellipsis> api </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../deploy/MenuScripts/install_pyside2.html class=md-nav__link> <span class=md-ellipsis> deploy </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../hooks/pre_fusion_launch_menu_hook.html class=md-nav__link> <span class=md-ellipsis> hooks </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../plugins/create/create_image_saver.html class=md-nav__link> <span class=md-ellipsis> plugins </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../scripts/duplicate_with_inputs.html class=md-nav__link> <span class=md-ellipsis> scripts </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7 checked> <div class="md-nav__link md-nav__container"> <a href=../index.html class="md-nav__link "> <span class=md-ellipsis> vendor </span> </a> <label class="md-nav__link " for=__nav_3_1_1_7 id=__nav_3_1_1_7_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_3_1_1_7_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7> <span class="md-nav__icon md-icon"></span> vendor </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../attr/_cmp.html class=md-nav__link> <span class=md-ellipsis> attr </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_1_1_7_2 checked> <div class="md-nav__link md-nav__container"> <a href=index.html class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> urllib3 </span> </a> <label class="md-nav__link md-nav__link--active" for=__nav_3_1_1_7_2 id=__nav_3_1_1_7_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=5 aria-labelledby=__nav_3_1_1_7_2_label aria-expanded=true> <label class=md-nav__title for=__nav_3_1_1_7_2> <span class="md-nav__icon md-icon"></span> urllib3 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=_collections.html class=md-nav__link> <span class=md-ellipsis> _collections </span> </a> </li> <li class=md-nav__item> <a href=_version.html class=md-nav__link> <span class=md-ellipsis> _version </span> </a> </li> <li class=md-nav__item> <a href=connection.html class=md-nav__link> <span class=md-ellipsis> connection </span> </a> </li> <li class=md-nav__item> <a href=connectionpool.html class=md-nav__link> <span class=md-ellipsis> connectionpool </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=contrib/_appengine_environ.html class=md-nav__link> <span class=md-ellipsis> contrib </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=exceptions.html class=md-nav__link> <span class=md-ellipsis> exceptions </span> </a> </li> <li class=md-nav__item> <a href=fields.html class=md-nav__link> <span class=md-ellipsis> fields </span> </a> </li> <li class=md-nav__item> <a href=filepost.html class=md-nav__link> <span class=md-ellipsis> filepost </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=packages/backports/makefile.html class=md-nav__link> <span class=md-ellipsis> packages </span> <span class="md-nav__icon md-icon"></span> </a> </li> <li class=md-nav__item> <a href=poolmanager.html class=md-nav__link> <span class=md-ellipsis> poolmanager </span> </a> </li> <li class=md-nav__item> <a href=request.html class=md-nav__link> <span class=md-ellipsis> request </span> </a> </li> <li class=md-nav__item> <a href=response.html class=md-nav__link> <span class=md-ellipsis> response </span> </a> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=util/connection.html class=md-nav__link> <span class=md-ellipsis> util </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../version.html class=md-nav__link> <span class=md-ellipsis> version </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--pruned md-nav__item--nested"> <a href=../../../../server/imageio.html class=md-nav__link> <span class=md-ellipsis> server </span> <span class="md-nav__icon md-icon"></span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3 class=md-nav__link> <span class=md-ellipsis> urllib3 </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPConnectionPool class=md-nav__link> <span class=md-ellipsis> HTTPConnectionPool </span> </a> <nav class=md-nav aria-label=HTTPConnectionPool> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPConnectionPool.close class=md-nav__link> <span class=md-ellipsis> close </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPConnectionPool.is_same_host class=md-nav__link> <span class=md-ellipsis> is_same_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPConnectionPool.urlopen class=md-nav__link> <span class=md-ellipsis> urlopen </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPResponse class=md-nav__link> <span class=md-ellipsis> HTTPResponse </span> </a> <nav class=md-nav aria-label=HTTPResponse> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPResponse.drain_conn class=md-nav__link> <span class=md-ellipsis> drain_conn </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPResponse.from_httplib class=md-nav__link> <span class=md-ellipsis> from_httplib </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPResponse.get_redirect_location class=md-nav__link> <span class=md-ellipsis> get_redirect_location </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPResponse.geturl class=md-nav__link> <span class=md-ellipsis> geturl </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPResponse.read class=md-nav__link> <span class=md-ellipsis> read </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPResponse.read_chunked class=md-nav__link> <span class=md-ellipsis> read_chunked </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPResponse.stream class=md-nav__link> <span class=md-ellipsis> stream </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPResponse.supports_chunked_reads class=md-nav__link> <span class=md-ellipsis> supports_chunked_reads </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPResponse.tell class=md-nav__link> <span class=md-ellipsis> tell </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.HTTPSConnectionPool class=md-nav__link> <span class=md-ellipsis> HTTPSConnectionPool </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.PoolManager class=md-nav__link> <span class=md-ellipsis> PoolManager </span> </a> <nav class=md-nav aria-label=PoolManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.PoolManager.clear class=md-nav__link> <span class=md-ellipsis> clear </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.PoolManager.connection_from_context class=md-nav__link> <span class=md-ellipsis> connection_from_context </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.PoolManager.connection_from_host class=md-nav__link> <span class=md-ellipsis> connection_from_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.PoolManager.connection_from_pool_key class=md-nav__link> <span class=md-ellipsis> connection_from_pool_key </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.PoolManager.connection_from_url class=md-nav__link> <span class=md-ellipsis> connection_from_url </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.PoolManager.urlopen class=md-nav__link> <span class=md-ellipsis> urlopen </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.ProxyManager class=md-nav__link> <span class=md-ellipsis> ProxyManager </span> </a> <nav class=md-nav aria-label=ProxyManager> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.ProxyManager.urlopen class=md-nav__link> <span class=md-ellipsis> urlopen </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Retry class=md-nav__link> <span class=md-ellipsis> Retry </span> </a> <nav class=md-nav aria-label=Retry> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Retry.from_int class=md-nav__link> <span class=md-ellipsis> from_int </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Retry.get_backoff_time class=md-nav__link> <span class=md-ellipsis> get_backoff_time </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Retry.get_retry_after class=md-nav__link> <span class=md-ellipsis> get_retry_after </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Retry.increment class=md-nav__link> <span class=md-ellipsis> increment </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Retry.is_exhausted class=md-nav__link> <span class=md-ellipsis> is_exhausted </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Retry.is_retry class=md-nav__link> <span class=md-ellipsis> is_retry </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Retry.sleep class=md-nav__link> <span class=md-ellipsis> sleep </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Timeout class=md-nav__link> <span class=md-ellipsis> Timeout </span> </a> <nav class=md-nav aria-label=Timeout> <ul class=md-nav__list> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Timeout.connect_timeout class=md-nav__link> <span class=md-ellipsis> connect_timeout </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Timeout.read_timeout class=md-nav__link> <span class=md-ellipsis> read_timeout </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Timeout.clone class=md-nav__link> <span class=md-ellipsis> clone </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Timeout.from_float class=md-nav__link> <span class=md-ellipsis> from_float </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Timeout.get_connect_duration class=md-nav__link> <span class=md-ellipsis> get_connect_duration </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.Timeout.start_connect class=md-nav__link> <span class=md-ellipsis> start_connect </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.add_stderr_logger class=md-nav__link> <span class=md-ellipsis> add_stderr_logger </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.connection_from_url class=md-nav__link> <span class=md-ellipsis> connection_from_url </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.disable_warnings class=md-nav__link> <span class=md-ellipsis> disable_warnings </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.encode_multipart_formdata class=md-nav__link> <span class=md-ellipsis> encode_multipart_formdata </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.get_host class=md-nav__link> <span class=md-ellipsis> get_host </span> </a> </li> <li class=md-nav__item> <a href=#client.ayon_fusion.vendor.urllib3.make_headers class=md-nav__link> <span class=md-ellipsis> make_headers </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>urllib3</h1> <div class="doc doc-object doc-module"> <a id=client.ayon_fusion.vendor.urllib3></a> <div class="doc doc-contents first"> <p>Python HTTP library with thread-safe connection pooling, file post support, user friendly, and more</p> <div class="doc doc-children"> <div class="doc doc-object doc-class"> <h2 id=client.ayon_fusion.vendor.urllib3.HTTPConnectionPool class="doc doc-heading"> <code>HTTPConnectionPool</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="ConnectionPool (client.ayon_fusion.vendor.urllib3.connectionpool.ConnectionPool)" href=connectionpool.html#client.ayon_fusion.vendor.urllib3.connectionpool.ConnectionPool>ConnectionPool</a></code>, <code><a class="autorefs autorefs-internal" title="RequestMethods (client.ayon_fusion.vendor.urllib3.request.RequestMethods)" href=request.html#client.ayon_fusion.vendor.urllib3.request.RequestMethods>RequestMethods</a></code></p> <p>Thread-safe connection pool for one host.</p> <p>:param host: Host used for this HTTP Connection (e.g. "localhost"), passed into :class:<code>http.client.HTTPConnection</code>.</p> <p>:param port: Port used for this HTTP Connection (None is equivalent to 80), passed into :class:<code>http.client.HTTPConnection</code>.</p> <p>:param strict: Causes BadStatusLine to be raised if the status line can't be parsed as a valid HTTP/1.0 or 1.1 status line, passed into :class:<code>http.client.HTTPConnection</code>.</p> <pre><code>.. note::
   Only works in Python 2. This parameter is ignored in Python 3.
</code></pre> <p>:param timeout: Socket timeout in seconds for each individual connection. This can be a float or integer, which sets the timeout for the HTTP request, or an instance of :class:<code>urllib3.util.Timeout</code> which gives you more fine-grained control over request timeouts. After the constructor has been parsed, this is always a <code>urllib3.util.Timeout</code> object.</p> <p>:param maxsize: Number of connections to save that can be reused. More than 1 is useful in multithreaded situations. If <code>block</code> is set to False, more connections will be created but they will not be saved once they've been used.</p> <p>:param block: If set to True, no more than <code>maxsize</code> connections will be used at a time. When no free connections are available, the call will block until a connection has been released. This is a useful side effect for particular multithreaded situations where one does not want to use more than maxsize connections per host to prevent flooding.</p> <p>:param headers: Headers to include with all requests, unless other headers are given explicitly.</p> <p>:param retries: Retry configuration to use by default with requests in this pool.</p> <p>:param _proxy: Parsed proxy URL, should not be used directly, instead, see :class:<code>urllib3.ProxyManager</code></p> <p>:param _proxy_headers: A dictionary with proxy headers, should not be used directly, instead, see :class:<code>urllib3.ProxyManager</code></p> <p>:param **conn_kw: Additional parameters are used to create fresh :class:<code>urllib3.connection.HTTPConnection</code>, :class:<code>urllib3.connection.HTTPSConnection</code> instances.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>HTTPConnectionPool</span><span class=p>(</span><span class=n>ConnectionPool</span><span class=p>,</span> <span class=n>RequestMethods</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Thread-safe connection pool for one host.</span>

<span class=sd>    :param host:</span>
<span class=sd>        Host used for this HTTP Connection (e.g. &quot;localhost&quot;), passed into</span>
<span class=sd>        :class:`http.client.HTTPConnection`.</span>

<span class=sd>    :param port:</span>
<span class=sd>        Port used for this HTTP Connection (None is equivalent to 80), passed</span>
<span class=sd>        into :class:`http.client.HTTPConnection`.</span>

<span class=sd>    :param strict:</span>
<span class=sd>        Causes BadStatusLine to be raised if the status line can&#39;t be parsed</span>
<span class=sd>        as a valid HTTP/1.0 or 1.1 status line, passed into</span>
<span class=sd>        :class:`http.client.HTTPConnection`.</span>

<span class=sd>        .. note::</span>
<span class=sd>           Only works in Python 2. This parameter is ignored in Python 3.</span>

<span class=sd>    :param timeout:</span>
<span class=sd>        Socket timeout in seconds for each individual connection. This can</span>
<span class=sd>        be a float or integer, which sets the timeout for the HTTP request,</span>
<span class=sd>        or an instance of :class:`urllib3.util.Timeout` which gives you more</span>
<span class=sd>        fine-grained control over request timeouts. After the constructor has</span>
<span class=sd>        been parsed, this is always a `urllib3.util.Timeout` object.</span>

<span class=sd>    :param maxsize:</span>
<span class=sd>        Number of connections to save that can be reused. More than 1 is useful</span>
<span class=sd>        in multithreaded situations. If ``block`` is set to False, more</span>
<span class=sd>        connections will be created but they will not be saved once they&#39;ve</span>
<span class=sd>        been used.</span>

<span class=sd>    :param block:</span>
<span class=sd>        If set to True, no more than ``maxsize`` connections will be used at</span>
<span class=sd>        a time. When no free connections are available, the call will block</span>
<span class=sd>        until a connection has been released. This is a useful side effect for</span>
<span class=sd>        particular multithreaded situations where one does not want to use more</span>
<span class=sd>        than maxsize connections per host to prevent flooding.</span>

<span class=sd>    :param headers:</span>
<span class=sd>        Headers to include with all requests, unless other headers are given</span>
<span class=sd>        explicitly.</span>

<span class=sd>    :param retries:</span>
<span class=sd>        Retry configuration to use by default with requests in this pool.</span>

<span class=sd>    :param _proxy:</span>
<span class=sd>        Parsed proxy URL, should not be used directly, instead, see</span>
<span class=sd>        :class:`urllib3.ProxyManager`</span>

<span class=sd>    :param _proxy_headers:</span>
<span class=sd>        A dictionary with proxy headers, should not be used directly,</span>
<span class=sd>        instead, see :class:`urllib3.ProxyManager`</span>

<span class=sd>    :param \\**conn_kw:</span>
<span class=sd>        Additional parameters are used to create fresh :class:`urllib3.connection.HTTPConnection`,</span>
<span class=sd>        :class:`urllib3.connection.HTTPSConnection` instances.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>scheme</span> <span class=o>=</span> <span class=s2>&quot;http&quot;</span>
    <span class=n>ConnectionCls</span> <span class=o>=</span> <span class=n>HTTPConnection</span>
    <span class=n>ResponseCls</span> <span class=o>=</span> <span class=n>HTTPResponse</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>host</span><span class=p>,</span>
        <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>strict</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>timeout</span><span class=o>=</span><span class=n>Timeout</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span><span class=p>,</span>
        <span class=n>maxsize</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
        <span class=n>block</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_proxy</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_proxy_headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_proxy_config</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>conn_kw</span>
    <span class=p>):</span>
        <span class=n>ConnectionPool</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>)</span>
        <span class=n>RequestMethods</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>headers</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>strict</span> <span class=o>=</span> <span class=n>strict</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>timeout</span><span class=p>,</span> <span class=n>Timeout</span><span class=p>):</span>
            <span class=n>timeout</span> <span class=o>=</span> <span class=n>Timeout</span><span class=o>.</span><span class=n>from_float</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>retries</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>Retry</span><span class=o>.</span><span class=n>DEFAULT</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>QueueCls</span><span class=p>(</span><span class=n>maxsize</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>block</span> <span class=o>=</span> <span class=n>block</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=o>=</span> <span class=n>_proxy</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>proxy_headers</span> <span class=o>=</span> <span class=n>_proxy_headers</span> <span class=ow>or</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span> <span class=o>=</span> <span class=n>_proxy_config</span>

        <span class=c1># Fill the queue up so that doing get() on it will block properly</span>
        <span class=k>for</span> <span class=n>_</span> <span class=ow>in</span> <span class=n>xrange</span><span class=p>(</span><span class=n>maxsize</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=kc>None</span><span class=p>)</span>

        <span class=c1># These are mostly for testing and debugging purposes.</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num_connections</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num_requests</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span> <span class=o>=</span> <span class=n>conn_kw</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>:</span>
            <span class=c1># Enable Nagle&#39;s algorithm for proxies, to avoid packet fragmentation.</span>
            <span class=c1># We cannot know if the user has added default socket options, so we cannot replace the</span>
            <span class=c1># list.</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span><span class=o>.</span><span class=n>setdefault</span><span class=p>(</span><span class=s2>&quot;socket_options&quot;</span><span class=p>,</span> <span class=p>[])</span>

            <span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span><span class=p>[</span><span class=s2>&quot;proxy&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span><span class=p>[</span><span class=s2>&quot;proxy_config&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_new_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Return a fresh :class:`HTTPConnection`.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num_connections</span> <span class=o>+=</span> <span class=mi>1</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s2>&quot;Starting new HTTP connection (</span><span class=si>%d</span><span class=s2>): </span><span class=si>%s</span><span class=s2>:</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>num_connections</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>or</span> <span class=s2>&quot;80&quot;</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ConnectionCls</span><span class=p>(</span>
            <span class=n>host</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span>
            <span class=n>port</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>timeout</span><span class=o>.</span><span class=n>connect_timeout</span><span class=p>,</span>
            <span class=n>strict</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>strict</span><span class=p>,</span>
            <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=n>conn</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Get a connection. Will return a pooled connection if one is available.</span>

<span class=sd>        If no connections are available and :prop:`.block` is ``False``, then a</span>
<span class=sd>        fresh connection is returned.</span>

<span class=sd>        :param timeout:</span>
<span class=sd>            Seconds to wait before giving up and raising</span>
<span class=sd>            :class:`urllib3.exceptions.EmptyPoolError` if the pool is empty and</span>
<span class=sd>            :prop:`.block` is ``True``.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>conn</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>block</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>block</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span>

        <span class=k>except</span> <span class=ne>AttributeError</span><span class=p>:</span>  <span class=c1># self.pool is None</span>
            <span class=k>raise</span> <span class=n>ClosedPoolError</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=s2>&quot;Pool is closed.&quot;</span><span class=p>)</span>

        <span class=k>except</span> <span class=n>queue</span><span class=o>.</span><span class=n>Empty</span><span class=p>:</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>block</span><span class=p>:</span>
                <span class=k>raise</span> <span class=n>EmptyPoolError</span><span class=p>(</span>
                    <span class=bp>self</span><span class=p>,</span>
                    <span class=s2>&quot;Pool reached maximum size and no more connections are allowed.&quot;</span><span class=p>,</span>
                <span class=p>)</span>
            <span class=k>pass</span>  <span class=c1># Oh well, we&#39;ll create a new connection then</span>

        <span class=c1># If this is a persistent connection, check if it got disconnected</span>
        <span class=k>if</span> <span class=n>conn</span> <span class=ow>and</span> <span class=n>is_connection_dropped</span><span class=p>(</span><span class=n>conn</span><span class=p>):</span>
            <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Resetting dropped connection: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>)</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
            <span class=k>if</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;auto_open&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
                <span class=c1># This is a proxied connection that has been mutated by</span>
                <span class=c1># http.client._tunnel() and cannot be reused (since it would</span>
                <span class=c1># attempt to bypass the proxy)</span>
                <span class=n>conn</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=k>return</span> <span class=n>conn</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_new_conn</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_put_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Put a connection back into the pool.</span>

<span class=sd>        :param conn:</span>
<span class=sd>            Connection object for the current host and port as returned by</span>
<span class=sd>            :meth:`._new_conn` or :meth:`._get_conn`.</span>

<span class=sd>        If the pool is already full, the connection is closed and discarded</span>
<span class=sd>        because we exceeded maxsize. If connections are discarded frequently,</span>
<span class=sd>        then maxsize should be increased.</span>

<span class=sd>        If the pool is closed, then the connection will be closed and discarded.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=o>.</span><span class=n>put</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>block</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
            <span class=k>return</span>  <span class=c1># Everything is dandy, done.</span>
        <span class=k>except</span> <span class=ne>AttributeError</span><span class=p>:</span>
            <span class=c1># self.pool is None.</span>
            <span class=k>pass</span>
        <span class=k>except</span> <span class=n>queue</span><span class=o>.</span><span class=n>Full</span><span class=p>:</span>
            <span class=c1># This should never happen if self.block == True</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span><span class=s2>&quot;Connection pool is full, discarding connection: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>)</span>

        <span class=c1># Connection never got put back into the pool, close it.</span>
        <span class=k>if</span> <span class=n>conn</span><span class=p>:</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_validate_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Called right before a request is made, after the socket is created.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_prepare_proxy</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
        <span class=c1># Nothing to do for HTTP connections.</span>
        <span class=k>pass</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_get_timeout</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>timeout</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Helper that always returns a :class:`urllib3.util.Timeout`&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>timeout</span> <span class=ow>is</span> <span class=n>_Default</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>timeout</span><span class=o>.</span><span class=n>clone</span><span class=p>()</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>timeout</span><span class=p>,</span> <span class=n>Timeout</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>timeout</span><span class=o>.</span><span class=n>clone</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=c1># User passed us an int/float. This is for backwards compatibility,</span>
            <span class=c1># can be removed later</span>
            <span class=k>return</span> <span class=n>Timeout</span><span class=o>.</span><span class=n>from_float</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_raise_timeout</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>err</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>timeout_value</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Is the error actually a timeout? Will raise a ReadTimeout or pass&quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>err</span><span class=p>,</span> <span class=n>SocketTimeout</span><span class=p>):</span>
            <span class=k>raise</span> <span class=n>ReadTimeoutError</span><span class=p>(</span>
                <span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=s2>&quot;Read timed out. (read timeout=</span><span class=si>%s</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=n>timeout_value</span>
            <span class=p>)</span>

        <span class=c1># See the above comment about EAGAIN in Python 3. In Python 2 we have</span>
        <span class=c1># to specifically catch it and throw the timeout error</span>
        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>err</span><span class=p>,</span> <span class=s2>&quot;errno&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>err</span><span class=o>.</span><span class=n>errno</span> <span class=ow>in</span> <span class=n>_blocking_errnos</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ReadTimeoutError</span><span class=p>(</span>
                <span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=s2>&quot;Read timed out. (read timeout=</span><span class=si>%s</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=n>timeout_value</span>
            <span class=p>)</span>

        <span class=c1># Catch possible read timeouts thrown as SSL errors. If not the</span>
        <span class=c1># case, rethrow the original. We need to do this because of:</span>
        <span class=c1># http://bugs.python.org/issue10272</span>
        <span class=k>if</span> <span class=s2>&quot;timed out&quot;</span> <span class=ow>in</span> <span class=nb>str</span><span class=p>(</span><span class=n>err</span><span class=p>)</span> <span class=ow>or</span> <span class=s2>&quot;did not complete (read)&quot;</span> <span class=ow>in</span> <span class=nb>str</span><span class=p>(</span>
            <span class=n>err</span>
        <span class=p>):</span>  <span class=c1># Python &lt; 2.7.4</span>
            <span class=k>raise</span> <span class=n>ReadTimeoutError</span><span class=p>(</span>
                <span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=s2>&quot;Read timed out. (read timeout=</span><span class=si>%s</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=n>timeout_value</span>
            <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_make_request</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>,</span> <span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span> <span class=n>chunked</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=o>**</span><span class=n>httplib_request_kw</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Perform a request on a given urllib connection object taken from our</span>
<span class=sd>        pool.</span>

<span class=sd>        :param conn:</span>
<span class=sd>            a connection from one of our connection pools</span>

<span class=sd>        :param timeout:</span>
<span class=sd>            Socket timeout in seconds for the request. This can be a</span>
<span class=sd>            float or integer, which will set the same timeout value for</span>
<span class=sd>            the socket connect and the socket read, or an instance of</span>
<span class=sd>            :class:`urllib3.util.Timeout`, which gives you more fine-grained</span>
<span class=sd>            control over your timeouts.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num_requests</span> <span class=o>+=</span> <span class=mi>1</span>

        <span class=n>timeout_obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_timeout</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span>
        <span class=n>timeout_obj</span><span class=o>.</span><span class=n>start_connect</span><span class=p>()</span>
        <span class=n>conn</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout_obj</span><span class=o>.</span><span class=n>connect_timeout</span>

        <span class=c1># Trigger any extra validation we need to do.</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_validate_conn</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>
        <span class=k>except</span> <span class=p>(</span><span class=n>SocketTimeout</span><span class=p>,</span> <span class=n>BaseSSLError</span><span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
            <span class=c1># Py2 raises this as a BaseSSLError, Py3 raises it as socket timeout.</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_raise_timeout</span><span class=p>(</span><span class=n>err</span><span class=o>=</span><span class=n>e</span><span class=p>,</span> <span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span> <span class=n>timeout_value</span><span class=o>=</span><span class=n>conn</span><span class=o>.</span><span class=n>timeout</span><span class=p>)</span>
            <span class=k>raise</span>

        <span class=c1># conn.request() calls http.client.*.request, not the method in</span>
        <span class=c1># urllib3.request. It also calls makefile (recv) on the socket.</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>chunked</span><span class=p>:</span>
                <span class=n>conn</span><span class=o>.</span><span class=n>request_chunked</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=o>**</span><span class=n>httplib_request_kw</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>conn</span><span class=o>.</span><span class=n>request</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=o>**</span><span class=n>httplib_request_kw</span><span class=p>)</span>

        <span class=c1># We are swallowing BrokenPipeError (errno.EPIPE) since the server is</span>
        <span class=c1># legitimately able to close the connection after sending a valid response.</span>
        <span class=c1># With this behaviour, the received response is still readable.</span>
        <span class=k>except</span> <span class=ne>BrokenPipeError</span><span class=p>:</span>
            <span class=c1># Python 3</span>
            <span class=k>pass</span>
        <span class=k>except</span> <span class=ne>IOError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
            <span class=c1># Python 2 and macOS/Linux</span>
            <span class=c1># EPIPE and ESHUTDOWN are BrokenPipeError on Python 2, and EPROTOTYPE is needed on macOS</span>
            <span class=c1># https://erickt.github.io/blog/2014/11/19/adventures-in-debugging-a-potential-osx-kernel-bug/</span>
            <span class=k>if</span> <span class=n>e</span><span class=o>.</span><span class=n>errno</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>{</span>
                <span class=n>errno</span><span class=o>.</span><span class=n>EPIPE</span><span class=p>,</span>
                <span class=n>errno</span><span class=o>.</span><span class=n>ESHUTDOWN</span><span class=p>,</span>
                <span class=n>errno</span><span class=o>.</span><span class=n>EPROTOTYPE</span><span class=p>,</span>
            <span class=p>}:</span>
                <span class=k>raise</span>

        <span class=c1># Reset the timeout for the recv() on the socket</span>
        <span class=n>read_timeout</span> <span class=o>=</span> <span class=n>timeout_obj</span><span class=o>.</span><span class=n>read_timeout</span>

        <span class=c1># App Engine doesn&#39;t have a sock attr</span>
        <span class=k>if</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;sock&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>
            <span class=c1># In Python 3 socket.py will catch EAGAIN and return None when you</span>
            <span class=c1># try and read into the file pointer created by http.client, which</span>
            <span class=c1># instead raises a BadStatusLine exception. Instead of catching</span>
            <span class=c1># the exception and assuming all BadStatusLine exceptions are read</span>
            <span class=c1># timeouts, check for a zero timeout before making the request.</span>
            <span class=k>if</span> <span class=n>read_timeout</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
                <span class=k>raise</span> <span class=n>ReadTimeoutError</span><span class=p>(</span>
                    <span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=s2>&quot;Read timed out. (read timeout=</span><span class=si>%s</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=n>read_timeout</span>
                <span class=p>)</span>
            <span class=k>if</span> <span class=n>read_timeout</span> <span class=ow>is</span> <span class=n>Timeout</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span><span class=p>:</span>
                <span class=n>conn</span><span class=o>.</span><span class=n>sock</span><span class=o>.</span><span class=n>settimeout</span><span class=p>(</span><span class=n>socket</span><span class=o>.</span><span class=n>getdefaulttimeout</span><span class=p>())</span>
            <span class=k>else</span><span class=p>:</span>  <span class=c1># None or a value</span>
                <span class=n>conn</span><span class=o>.</span><span class=n>sock</span><span class=o>.</span><span class=n>settimeout</span><span class=p>(</span><span class=n>read_timeout</span><span class=p>)</span>

        <span class=c1># Receive the response from the server</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=c1># Python 2.7, use buffering of HTTP responses</span>
                <span class=n>httplib_response</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>getresponse</span><span class=p>(</span><span class=n>buffering</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
            <span class=k>except</span> <span class=ne>TypeError</span><span class=p>:</span>
                <span class=c1># Python 3</span>
                <span class=k>try</span><span class=p>:</span>
                    <span class=n>httplib_response</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>getresponse</span><span class=p>()</span>
                <span class=k>except</span> <span class=ne>BaseException</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
                    <span class=c1># Remove the TypeError from the exception chain in</span>
                    <span class=c1># Python 3 (including for exceptions like SystemExit).</span>
                    <span class=c1># Otherwise it looks like a bug in the code.</span>
                    <span class=n>six</span><span class=o>.</span><span class=n>raise_from</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>
        <span class=k>except</span> <span class=p>(</span><span class=n>SocketTimeout</span><span class=p>,</span> <span class=n>BaseSSLError</span><span class=p>,</span> <span class=n>SocketError</span><span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_raise_timeout</span><span class=p>(</span><span class=n>err</span><span class=o>=</span><span class=n>e</span><span class=p>,</span> <span class=n>url</span><span class=o>=</span><span class=n>url</span><span class=p>,</span> <span class=n>timeout_value</span><span class=o>=</span><span class=n>read_timeout</span><span class=p>)</span>
            <span class=k>raise</span>

        <span class=c1># AppEngine doesn&#39;t have a version attr.</span>
        <span class=n>http_version</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;_http_vsn_str&quot;</span><span class=p>,</span> <span class=s2>&quot;HTTP/?&quot;</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s1>&#39;</span><span class=si>%s</span><span class=s1>://</span><span class=si>%s</span><span class=s1>:</span><span class=si>%s</span><span class=s1> &quot;</span><span class=si>%s</span><span class=s1> </span><span class=si>%s</span><span class=s1> </span><span class=si>%s</span><span class=s1>&quot; </span><span class=si>%s</span><span class=s1> </span><span class=si>%s</span><span class=s1>&#39;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>,</span>
            <span class=n>method</span><span class=p>,</span>
            <span class=n>url</span><span class=p>,</span>
            <span class=n>http_version</span><span class=p>,</span>
            <span class=n>httplib_response</span><span class=o>.</span><span class=n>status</span><span class=p>,</span>
            <span class=n>httplib_response</span><span class=o>.</span><span class=n>length</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>assert_header_parsing</span><span class=p>(</span><span class=n>httplib_response</span><span class=o>.</span><span class=n>msg</span><span class=p>)</span>
        <span class=k>except</span> <span class=p>(</span><span class=n>HeaderParsingError</span><span class=p>,</span> <span class=ne>TypeError</span><span class=p>)</span> <span class=k>as</span> <span class=n>hpe</span><span class=p>:</span>  <span class=c1># Platform-specific: Python 3</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;Failed to parse headers (url=</span><span class=si>%s</span><span class=s2>): </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_absolute_url</span><span class=p>(</span><span class=n>url</span><span class=p>),</span>
                <span class=n>hpe</span><span class=p>,</span>
                <span class=n>exc_info</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
            <span class=p>)</span>

        <span class=k>return</span> <span class=n>httplib_response</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_absolute_url</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>Url</span><span class=p>(</span><span class=n>scheme</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>,</span> <span class=n>path</span><span class=o>=</span><span class=n>path</span><span class=p>)</span><span class=o>.</span><span class=n>url</span>

    <span class=k>def</span><span class=w> </span><span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Close all pooled connections and disable the pool.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=c1># Disable access to the pool</span>
        <span class=n>old_pool</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=p>,</span> <span class=kc>None</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
                <span class=n>conn</span> <span class=o>=</span> <span class=n>old_pool</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>block</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
                <span class=k>if</span> <span class=n>conn</span><span class=p>:</span>
                    <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

        <span class=k>except</span> <span class=n>queue</span><span class=o>.</span><span class=n>Empty</span><span class=p>:</span>
            <span class=k>pass</span>  <span class=c1># Done.</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_same_host</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Check if the given ``url`` is a member of the same host as this</span>
<span class=sd>        connection pool.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>url</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>True</span>

        <span class=c1># TODO: Add optional support for socket.gethostbyname checking.</span>
        <span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span> <span class=o>=</span> <span class=n>get_host</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>host</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>host</span> <span class=o>=</span> <span class=n>_normalize_host</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=n>scheme</span><span class=p>)</span>

        <span class=c1># Use explicit default port for comparison when none is given</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>port</span><span class=p>:</span>
            <span class=n>port</span> <span class=o>=</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>)</span>
        <span class=k>elif</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>and</span> <span class=n>port</span> <span class=o>==</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>):</span>
            <span class=n>port</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=k>return</span> <span class=p>(</span><span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>)</span> <span class=o>==</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>urlopen</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>method</span><span class=p>,</span>
        <span class=n>url</span><span class=p>,</span>
        <span class=n>body</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
        <span class=n>assert_same_host</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
        <span class=n>timeout</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span>
        <span class=n>pool_timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>release_conn</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>chunked</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>body_pos</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>response_kw</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Get a connection from the pool and perform an HTTP request. This is the</span>
<span class=sd>        lowest level call for making a request, so you&#39;ll need to specify all</span>
<span class=sd>        the raw details.</span>

<span class=sd>        .. note::</span>

<span class=sd>           More commonly, it&#39;s appropriate to use a convenience method provided</span>
<span class=sd>           by :class:`.RequestMethods`, such as :meth:`request`.</span>

<span class=sd>        .. note::</span>

<span class=sd>           `release_conn` will only behave as expected if</span>
<span class=sd>           `preload_content=False` because we want to make</span>
<span class=sd>           `preload_content=False` the default behaviour someday soon without</span>
<span class=sd>           breaking backwards compatibility.</span>

<span class=sd>        :param method:</span>
<span class=sd>            HTTP request method (such as GET, POST, PUT, etc.)</span>

<span class=sd>        :param url:</span>
<span class=sd>            The URL to perform the request on.</span>

<span class=sd>        :param body:</span>
<span class=sd>            Data to send in the request body, either :class:`str`, :class:`bytes`,</span>
<span class=sd>            an iterable of :class:`str`/:class:`bytes`, or a file-like object.</span>

<span class=sd>        :param headers:</span>
<span class=sd>            Dictionary of custom headers to send, such as User-Agent,</span>
<span class=sd>            If-None-Match, etc. If None, pool headers are used. If provided,</span>
<span class=sd>            these headers completely replace any pool-specific headers.</span>

<span class=sd>        :param retries:</span>
<span class=sd>            Configure the number of retries to allow before raising a</span>
<span class=sd>            :class:`~urllib3.exceptions.MaxRetryError` exception.</span>

<span class=sd>            Pass ``None`` to retry until you receive a response. Pass a</span>
<span class=sd>            :class:`~urllib3.util.retry.Retry` object for fine-grained control</span>
<span class=sd>            over different types of retries.</span>
<span class=sd>            Pass an integer number to retry connection errors that many times,</span>
<span class=sd>            but no other types of errors. Pass zero to never retry.</span>

<span class=sd>            If ``False``, then retries are disabled and any exception is raised</span>
<span class=sd>            immediately. Also, instead of raising a MaxRetryError on redirects,</span>
<span class=sd>            the redirect response will be returned.</span>

<span class=sd>        :type retries: :class:`~urllib3.util.retry.Retry`, False, or an int.</span>

<span class=sd>        :param redirect:</span>
<span class=sd>            If True, automatically handle redirects (status codes 301, 302,</span>
<span class=sd>            303, 307, 308). Each redirect counts as a retry. Disabling retries</span>
<span class=sd>            will disable redirect, too.</span>

<span class=sd>        :param assert_same_host:</span>
<span class=sd>            If ``True``, will make sure that the host of the pool requests is</span>
<span class=sd>            consistent else will raise HostChangedError. When ``False``, you can</span>
<span class=sd>            use the pool on an HTTP proxy and request foreign hosts.</span>

<span class=sd>        :param timeout:</span>
<span class=sd>            If specified, overrides the default timeout for this one</span>
<span class=sd>            request. It may be a float (in seconds) or an instance of</span>
<span class=sd>            :class:`urllib3.util.Timeout`.</span>

<span class=sd>        :param pool_timeout:</span>
<span class=sd>            If set and the pool is set to block=True, then this method will</span>
<span class=sd>            block for ``pool_timeout`` seconds and raise EmptyPoolError if no</span>
<span class=sd>            connection is available within the time period.</span>

<span class=sd>        :param release_conn:</span>
<span class=sd>            If False, then the urlopen call will not release the connection</span>
<span class=sd>            back into the pool once a response is received (but will release if</span>
<span class=sd>            you read the entire contents of the response such as when</span>
<span class=sd>            `preload_content=True`). This is useful if you&#39;re not preloading</span>
<span class=sd>            the response&#39;s content immediately. You will need to call</span>
<span class=sd>            ``r.release_conn()`` on the response ``r`` to return the connection</span>
<span class=sd>            back into the pool. If None, it takes the value of</span>
<span class=sd>            ``response_kw.get(&#39;preload_content&#39;, True)``.</span>

<span class=sd>        :param chunked:</span>
<span class=sd>            If True, urllib3 will send the body using chunked transfer</span>
<span class=sd>            encoding. Otherwise, urllib3 will send the body using the standard</span>
<span class=sd>            content-length form. Defaults to False.</span>

<span class=sd>        :param int body_pos:</span>
<span class=sd>            Position to seek to in file-like body in the event of a retry or</span>
<span class=sd>            redirect. Typically this won&#39;t need to be set because urllib3 will</span>
<span class=sd>            auto-populate the value when needed.</span>

<span class=sd>        :param \\**response_kw:</span>
<span class=sd>            Additional parameters are passed to</span>
<span class=sd>            :meth:`urllib3.response.HTTPResponse.from_httplib`</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>parsed_url</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
        <span class=n>destination_scheme</span> <span class=o>=</span> <span class=n>parsed_url</span><span class=o>.</span><span class=n>scheme</span>

        <span class=k>if</span> <span class=n>headers</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>headers</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>Retry</span><span class=p>):</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>Retry</span><span class=o>.</span><span class=n>from_int</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>retries</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>release_conn</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>release_conn</span> <span class=o>=</span> <span class=n>response_kw</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;preload_content&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>

        <span class=c1># Check host</span>
        <span class=k>if</span> <span class=n>assert_same_host</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_same_host</span><span class=p>(</span><span class=n>url</span><span class=p>):</span>
            <span class=k>raise</span> <span class=n>HostChangedError</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>retries</span><span class=p>)</span>

        <span class=c1># Ensure that the URL we&#39;re connecting to is properly encoded</span>
        <span class=k>if</span> <span class=n>url</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>):</span>
            <span class=n>url</span> <span class=o>=</span> <span class=n>six</span><span class=o>.</span><span class=n>ensure_str</span><span class=p>(</span><span class=n>_encode_target</span><span class=p>(</span><span class=n>url</span><span class=p>))</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>url</span> <span class=o>=</span> <span class=n>six</span><span class=o>.</span><span class=n>ensure_str</span><span class=p>(</span><span class=n>parsed_url</span><span class=o>.</span><span class=n>url</span><span class=p>)</span>

        <span class=n>conn</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=c1># Track whether `conn` needs to be released before</span>
        <span class=c1># returning/raising/recursing. Update this variable if necessary, and</span>
        <span class=c1># leave `release_conn` constant throughout the function. That way, if</span>
        <span class=c1># the function recurses, the original value of `release_conn` will be</span>
        <span class=c1># passed down into the recursive call, and its value will be respected.</span>
        <span class=c1>#</span>
        <span class=c1># See issue #651 [1] for details.</span>
        <span class=c1>#</span>
        <span class=c1># [1] &lt;https://github.com/urllib3/urllib3/issues/651&gt;</span>
        <span class=n>release_this_conn</span> <span class=o>=</span> <span class=n>release_conn</span>

        <span class=n>http_tunnel_required</span> <span class=o>=</span> <span class=n>connection_requires_http_tunnel</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span><span class=p>,</span> <span class=n>destination_scheme</span>
        <span class=p>)</span>

        <span class=c1># Merge the proxy headers. Only done when not using HTTP CONNECT. We</span>
        <span class=c1># have to copy the headers dict so we can safely change it without those</span>
        <span class=c1># changes being reflected in anyone else&#39;s copy.</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>http_tunnel_required</span><span class=p>:</span>
            <span class=n>headers</span> <span class=o>=</span> <span class=n>headers</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
            <span class=n>headers</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>proxy_headers</span><span class=p>)</span>

        <span class=c1># Must keep the exception bound to a separate variable or else Python 3</span>
        <span class=c1># complains about UnboundLocalError.</span>
        <span class=n>err</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=c1># Keep track of whether we cleanly exited the except block. This</span>
        <span class=c1># ensures we do proper cleanup in finally.</span>
        <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=c1># Rewind body position, if needed. Record current position</span>
        <span class=c1># for future rewinds in the event of a redirect/retry.</span>
        <span class=n>body_pos</span> <span class=o>=</span> <span class=n>set_file_position</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=n>body_pos</span><span class=p>)</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=c1># Request a connection from the queue.</span>
            <span class=n>timeout_obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_timeout</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span>
            <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_conn</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>)</span>

            <span class=n>conn</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout_obj</span><span class=o>.</span><span class=n>connect_timeout</span>

            <span class=n>is_new_proxy_conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span>
                <span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;sock&quot;</span><span class=p>,</span> <span class=kc>None</span>
            <span class=p>)</span>
            <span class=k>if</span> <span class=n>is_new_proxy_conn</span> <span class=ow>and</span> <span class=n>http_tunnel_required</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_prepare_proxy</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

            <span class=c1># Make the request on the httplib connection object.</span>
            <span class=n>httplib_response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_make_request</span><span class=p>(</span>
                <span class=n>conn</span><span class=p>,</span>
                <span class=n>method</span><span class=p>,</span>
                <span class=n>url</span><span class=p>,</span>
                <span class=n>timeout</span><span class=o>=</span><span class=n>timeout_obj</span><span class=p>,</span>
                <span class=n>body</span><span class=o>=</span><span class=n>body</span><span class=p>,</span>
                <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span>
                <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
            <span class=p>)</span>

            <span class=c1># If we&#39;re going to release the connection in ``finally:``, then</span>
            <span class=c1># the response doesn&#39;t need to know about the connection. Otherwise</span>
            <span class=c1># it will also try to release it and we&#39;ll have a double-release</span>
            <span class=c1># mess.</span>
            <span class=n>response_conn</span> <span class=o>=</span> <span class=n>conn</span> <span class=k>if</span> <span class=ow>not</span> <span class=n>release_conn</span> <span class=k>else</span> <span class=kc>None</span>

            <span class=c1># Pass method to Response for length checking</span>
            <span class=n>response_kw</span><span class=p>[</span><span class=s2>&quot;request_method&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>method</span>

            <span class=c1># Import httplib&#39;s response into our own wrapper object</span>
            <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ResponseCls</span><span class=o>.</span><span class=n>from_httplib</span><span class=p>(</span>
                <span class=n>httplib_response</span><span class=p>,</span>
                <span class=n>pool</span><span class=o>=</span><span class=bp>self</span><span class=p>,</span>
                <span class=n>connection</span><span class=o>=</span><span class=n>response_conn</span><span class=p>,</span>
                <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
                <span class=o>**</span><span class=n>response_kw</span>
            <span class=p>)</span>

            <span class=c1># Everything went great!</span>
            <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>except</span> <span class=n>EmptyPoolError</span><span class=p>:</span>
            <span class=c1># Didn&#39;t get a connection from the pool, no need to clean up</span>
            <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=n>release_this_conn</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=k>raise</span>

        <span class=k>except</span> <span class=p>(</span>
            <span class=ne>TimeoutError</span><span class=p>,</span>
            <span class=n>HTTPException</span><span class=p>,</span>
            <span class=n>SocketError</span><span class=p>,</span>
            <span class=n>ProtocolError</span><span class=p>,</span>
            <span class=n>BaseSSLError</span><span class=p>,</span>
            <span class=n>SSLError</span><span class=p>,</span>
            <span class=n>CertificateError</span><span class=p>,</span>
        <span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
            <span class=c1># Discard the connection for these exceptions. It will be</span>
            <span class=c1># replaced during the next _get_conn() call.</span>
            <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>BaseSSLError</span><span class=p>,</span> <span class=n>CertificateError</span><span class=p>)):</span>
                <span class=n>e</span> <span class=o>=</span> <span class=n>SSLError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
            <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>SocketError</span><span class=p>,</span> <span class=n>NewConnectionError</span><span class=p>))</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>:</span>
                <span class=n>e</span> <span class=o>=</span> <span class=n>ProxyError</span><span class=p>(</span><span class=s2>&quot;Cannot connect to proxy.&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>
            <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>SocketError</span><span class=p>,</span> <span class=n>HTTPException</span><span class=p>)):</span>
                <span class=n>e</span> <span class=o>=</span> <span class=n>ProtocolError</span><span class=p>(</span><span class=s2>&quot;Connection aborted.&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>

            <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span>
                <span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>error</span><span class=o>=</span><span class=n>e</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=o>=</span><span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()[</span><span class=mi>2</span><span class=p>]</span>
            <span class=p>)</span>
            <span class=n>retries</span><span class=o>.</span><span class=n>sleep</span><span class=p>()</span>

            <span class=c1># Keep track of the error for the retry warning.</span>
            <span class=n>err</span> <span class=o>=</span> <span class=n>e</span>

        <span class=k>finally</span><span class=p>:</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>clean_exit</span><span class=p>:</span>
                <span class=c1># We hit some kind of exception, handled or otherwise. We need</span>
                <span class=c1># to throw the connection away unless explicitly told not to.</span>
                <span class=c1># Close the connection, set the variable to None, and make sure</span>
                <span class=c1># we put the None back in the pool to avoid leaking it.</span>
                <span class=n>conn</span> <span class=o>=</span> <span class=n>conn</span> <span class=ow>and</span> <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
                <span class=n>release_this_conn</span> <span class=o>=</span> <span class=kc>True</span>

            <span class=k>if</span> <span class=n>release_this_conn</span><span class=p>:</span>
                <span class=c1># Put the connection back to be reused. If the connection is</span>
                <span class=c1># expired then it will be None, which will get replaced with a</span>
                <span class=c1># fresh connection during _get_conn.</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_put_conn</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>conn</span><span class=p>:</span>
            <span class=c1># Try again</span>
            <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                <span class=s2>&quot;Retrying (</span><span class=si>%r</span><span class=s2>) after connection broken by &#39;</span><span class=si>%r</span><span class=s2>&#39;: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>retries</span><span class=p>,</span> <span class=n>err</span><span class=p>,</span> <span class=n>url</span>
            <span class=p>)</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
                <span class=n>method</span><span class=p>,</span>
                <span class=n>url</span><span class=p>,</span>
                <span class=n>body</span><span class=p>,</span>
                <span class=n>headers</span><span class=p>,</span>
                <span class=n>retries</span><span class=p>,</span>
                <span class=n>redirect</span><span class=p>,</span>
                <span class=n>assert_same_host</span><span class=p>,</span>
                <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
                <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
                <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
                <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
                <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
                <span class=o>**</span><span class=n>response_kw</span>
            <span class=p>)</span>

        <span class=c1># Handle redirect?</span>
        <span class=n>redirect_location</span> <span class=o>=</span> <span class=n>redirect</span> <span class=ow>and</span> <span class=n>response</span><span class=o>.</span><span class=n>get_redirect_location</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>redirect_location</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>303</span><span class=p>:</span>
                <span class=n>method</span> <span class=o>=</span> <span class=s2>&quot;GET&quot;</span>

            <span class=k>try</span><span class=p>:</span>
                <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=n>response</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>)</span>
            <span class=k>except</span> <span class=n>MaxRetryError</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>raise_on_redirect</span><span class=p>:</span>
                    <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
                    <span class=k>raise</span>
                <span class=k>return</span> <span class=n>response</span>

            <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
            <span class=n>retries</span><span class=o>.</span><span class=n>sleep_for_retry</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Redirecting </span><span class=si>%s</span><span class=s2> -&gt; </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>)</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
                <span class=n>method</span><span class=p>,</span>
                <span class=n>redirect_location</span><span class=p>,</span>
                <span class=n>body</span><span class=p>,</span>
                <span class=n>headers</span><span class=p>,</span>
                <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
                <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span>
                <span class=n>assert_same_host</span><span class=o>=</span><span class=n>assert_same_host</span><span class=p>,</span>
                <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
                <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
                <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
                <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
                <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
                <span class=o>**</span><span class=n>response_kw</span>
            <span class=p>)</span>

        <span class=c1># Check if we should retry the HTTP response.</span>
        <span class=n>has_retry_after</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>getheader</span><span class=p>(</span><span class=s2>&quot;Retry-After&quot;</span><span class=p>))</span>
        <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>is_retry</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=n>has_retry_after</span><span class=p>):</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=n>response</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>)</span>
            <span class=k>except</span> <span class=n>MaxRetryError</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>raise_on_status</span><span class=p>:</span>
                    <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
                    <span class=k>raise</span>
                <span class=k>return</span> <span class=n>response</span>

            <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
            <span class=n>retries</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
            <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Retry: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>)</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
                <span class=n>method</span><span class=p>,</span>
                <span class=n>url</span><span class=p>,</span>
                <span class=n>body</span><span class=p>,</span>
                <span class=n>headers</span><span class=p>,</span>
                <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
                <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span>
                <span class=n>assert_same_host</span><span class=o>=</span><span class=n>assert_same_host</span><span class=p>,</span>
                <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
                <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
                <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
                <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
                <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
                <span class=o>**</span><span class=n>response_kw</span>
            <span class=p>)</span>

        <span class=k>return</span> <span class=n>response</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPConnectionPool.close class="doc doc-heading"> <code class="highlight language-python"><span class=n>close</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Close all pooled connections and disable the pool.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Close all pooled connections and disable the pool.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span>
    <span class=c1># Disable access to the pool</span>
    <span class=n>old_pool</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool</span><span class=p>,</span> <span class=kc>None</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
            <span class=n>conn</span> <span class=o>=</span> <span class=n>old_pool</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>block</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>conn</span><span class=p>:</span>
                <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

    <span class=k>except</span> <span class=n>queue</span><span class=o>.</span><span class=n>Empty</span><span class=p>:</span>
        <span class=k>pass</span>  <span class=c1># Done.</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPConnectionPool.is_same_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_same_host</span><span class=p>(</span><span class=n>url</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Check if the given <code>url</code> is a member of the same host as this connection pool.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_same_host</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Check if the given ``url`` is a member of the same host as this</span>
<span class=sd>    connection pool.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>url</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=c1># TODO: Add optional support for socket.gethostbyname checking.</span>
    <span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span> <span class=o>=</span> <span class=n>get_host</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>host</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>host</span> <span class=o>=</span> <span class=n>_normalize_host</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=n>scheme</span><span class=p>)</span>

    <span class=c1># Use explicit default port for comparison when none is given</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>port</span><span class=p>:</span>
        <span class=n>port</span> <span class=o>=</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>)</span>
    <span class=k>elif</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>and</span> <span class=n>port</span> <span class=o>==</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>):</span>
        <span class=n>port</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>return</span> <span class=p>(</span><span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>)</span> <span class=o>==</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPConnectionPool.urlopen class="doc doc-heading"> <code class="highlight language-python"><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>body</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>assert_same_host</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>timeout</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span> <span class=n>pool_timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>release_conn</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>chunked</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span> <span class=n>body_pos</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>response_kw</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get a connection from the pool and perform an HTTP request. This is the lowest level call for making a request, so you'll need to specify all the raw details.</p> <p>.. note::</p> <p>More commonly, it's appropriate to use a convenience method provided by :class:<code>.RequestMethods</code>, such as :meth:<code>request</code>.</p> <p>.. note::</p> <p><code>release_conn</code> will only behave as expected if <code>preload_content=False</code> because we want to make <code>preload_content=False</code> the default behaviour someday soon without breaking backwards compatibility.</p> <p>:param method: HTTP request method (such as GET, POST, PUT, etc.)</p> <p>:param url: The URL to perform the request on.</p> <p>:param body: Data to send in the request body, either :class:<code>str</code>, :class:<code>bytes</code>, an iterable of :class:<code>str</code>/:class:<code>bytes</code>, or a file-like object.</p> <p>:param headers: Dictionary of custom headers to send, such as User-Agent, If-None-Match, etc. If None, pool headers are used. If provided, these headers completely replace any pool-specific headers.</p> <p>:param retries: Configure the number of retries to allow before raising a :class:<code>~urllib3.exceptions.MaxRetryError</code> exception.</p> <pre><code>Pass ``None`` to retry until you receive a response. Pass a
:class:`~urllib3.util.retry.Retry` object for fine-grained control
over different types of retries.
Pass an integer number to retry connection errors that many times,
but no other types of errors. Pass zero to never retry.

If ``False``, then retries are disabled and any exception is raised
immediately. Also, instead of raising a MaxRetryError on redirects,
the redirect response will be returned.
</code></pre> <p>:type retries: :class:<code>~urllib3.util.retry.Retry</code>, False, or an int.</p> <p>:param redirect: If True, automatically handle redirects (status codes 301, 302, 303, 307, 308). Each redirect counts as a retry. Disabling retries will disable redirect, too.</p> <p>:param assert_same_host: If <code>True</code>, will make sure that the host of the pool requests is consistent else will raise HostChangedError. When <code>False</code>, you can use the pool on an HTTP proxy and request foreign hosts.</p> <p>:param timeout: If specified, overrides the default timeout for this one request. It may be a float (in seconds) or an instance of :class:<code>urllib3.util.Timeout</code>.</p> <p>:param pool_timeout: If set and the pool is set to block=True, then this method will block for <code>pool_timeout</code> seconds and raise EmptyPoolError if no connection is available within the time period.</p> <p>:param release_conn: If False, then the urlopen call will not release the connection back into the pool once a response is received (but will release if you read the entire contents of the response such as when <code>preload_content=True</code>). This is useful if you're not preloading the response's content immediately. You will need to call <code>r.release_conn()</code> on the response <code>r</code> to return the connection back into the pool. If None, it takes the value of <code>response_kw.get('preload_content', True)</code>.</p> <p>:param chunked: If True, urllib3 will send the body using chunked transfer encoding. Otherwise, urllib3 will send the body using the standard content-length form. Defaults to False.</p> <p>:param int body_pos: Position to seek to in file-like body in the event of a retry or redirect. Typically this won't need to be set because urllib3 will auto-populate the value when needed.</p> <p>:param **response_kw: Additional parameters are passed to :meth:<code>urllib3.response.HTTPResponse.from_httplib</code></p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span>
<span class=normal>822</span>
<span class=normal>823</span>
<span class=normal>824</span>
<span class=normal>825</span>
<span class=normal>826</span>
<span class=normal>827</span>
<span class=normal>828</span>
<span class=normal>829</span>
<span class=normal>830</span>
<span class=normal>831</span>
<span class=normal>832</span>
<span class=normal>833</span>
<span class=normal>834</span>
<span class=normal>835</span>
<span class=normal>836</span>
<span class=normal>837</span>
<span class=normal>838</span>
<span class=normal>839</span>
<span class=normal>840</span>
<span class=normal>841</span>
<span class=normal>842</span>
<span class=normal>843</span>
<span class=normal>844</span>
<span class=normal>845</span>
<span class=normal>846</span>
<span class=normal>847</span>
<span class=normal>848</span>
<span class=normal>849</span>
<span class=normal>850</span>
<span class=normal>851</span>
<span class=normal>852</span>
<span class=normal>853</span>
<span class=normal>854</span>
<span class=normal>855</span>
<span class=normal>856</span>
<span class=normal>857</span>
<span class=normal>858</span>
<span class=normal>859</span>
<span class=normal>860</span>
<span class=normal>861</span>
<span class=normal>862</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>urlopen</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>method</span><span class=p>,</span>
    <span class=n>url</span><span class=p>,</span>
    <span class=n>body</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>assert_same_host</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=n>timeout</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span>
    <span class=n>pool_timeout</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>release_conn</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>chunked</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
    <span class=n>body_pos</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=o>**</span><span class=n>response_kw</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Get a connection from the pool and perform an HTTP request. This is the</span>
<span class=sd>    lowest level call for making a request, so you&#39;ll need to specify all</span>
<span class=sd>    the raw details.</span>

<span class=sd>    .. note::</span>

<span class=sd>       More commonly, it&#39;s appropriate to use a convenience method provided</span>
<span class=sd>       by :class:`.RequestMethods`, such as :meth:`request`.</span>

<span class=sd>    .. note::</span>

<span class=sd>       `release_conn` will only behave as expected if</span>
<span class=sd>       `preload_content=False` because we want to make</span>
<span class=sd>       `preload_content=False` the default behaviour someday soon without</span>
<span class=sd>       breaking backwards compatibility.</span>

<span class=sd>    :param method:</span>
<span class=sd>        HTTP request method (such as GET, POST, PUT, etc.)</span>

<span class=sd>    :param url:</span>
<span class=sd>        The URL to perform the request on.</span>

<span class=sd>    :param body:</span>
<span class=sd>        Data to send in the request body, either :class:`str`, :class:`bytes`,</span>
<span class=sd>        an iterable of :class:`str`/:class:`bytes`, or a file-like object.</span>

<span class=sd>    :param headers:</span>
<span class=sd>        Dictionary of custom headers to send, such as User-Agent,</span>
<span class=sd>        If-None-Match, etc. If None, pool headers are used. If provided,</span>
<span class=sd>        these headers completely replace any pool-specific headers.</span>

<span class=sd>    :param retries:</span>
<span class=sd>        Configure the number of retries to allow before raising a</span>
<span class=sd>        :class:`~urllib3.exceptions.MaxRetryError` exception.</span>

<span class=sd>        Pass ``None`` to retry until you receive a response. Pass a</span>
<span class=sd>        :class:`~urllib3.util.retry.Retry` object for fine-grained control</span>
<span class=sd>        over different types of retries.</span>
<span class=sd>        Pass an integer number to retry connection errors that many times,</span>
<span class=sd>        but no other types of errors. Pass zero to never retry.</span>

<span class=sd>        If ``False``, then retries are disabled and any exception is raised</span>
<span class=sd>        immediately. Also, instead of raising a MaxRetryError on redirects,</span>
<span class=sd>        the redirect response will be returned.</span>

<span class=sd>    :type retries: :class:`~urllib3.util.retry.Retry`, False, or an int.</span>

<span class=sd>    :param redirect:</span>
<span class=sd>        If True, automatically handle redirects (status codes 301, 302,</span>
<span class=sd>        303, 307, 308). Each redirect counts as a retry. Disabling retries</span>
<span class=sd>        will disable redirect, too.</span>

<span class=sd>    :param assert_same_host:</span>
<span class=sd>        If ``True``, will make sure that the host of the pool requests is</span>
<span class=sd>        consistent else will raise HostChangedError. When ``False``, you can</span>
<span class=sd>        use the pool on an HTTP proxy and request foreign hosts.</span>

<span class=sd>    :param timeout:</span>
<span class=sd>        If specified, overrides the default timeout for this one</span>
<span class=sd>        request. It may be a float (in seconds) or an instance of</span>
<span class=sd>        :class:`urllib3.util.Timeout`.</span>

<span class=sd>    :param pool_timeout:</span>
<span class=sd>        If set and the pool is set to block=True, then this method will</span>
<span class=sd>        block for ``pool_timeout`` seconds and raise EmptyPoolError if no</span>
<span class=sd>        connection is available within the time period.</span>

<span class=sd>    :param release_conn:</span>
<span class=sd>        If False, then the urlopen call will not release the connection</span>
<span class=sd>        back into the pool once a response is received (but will release if</span>
<span class=sd>        you read the entire contents of the response such as when</span>
<span class=sd>        `preload_content=True`). This is useful if you&#39;re not preloading</span>
<span class=sd>        the response&#39;s content immediately. You will need to call</span>
<span class=sd>        ``r.release_conn()`` on the response ``r`` to return the connection</span>
<span class=sd>        back into the pool. If None, it takes the value of</span>
<span class=sd>        ``response_kw.get(&#39;preload_content&#39;, True)``.</span>

<span class=sd>    :param chunked:</span>
<span class=sd>        If True, urllib3 will send the body using chunked transfer</span>
<span class=sd>        encoding. Otherwise, urllib3 will send the body using the standard</span>
<span class=sd>        content-length form. Defaults to False.</span>

<span class=sd>    :param int body_pos:</span>
<span class=sd>        Position to seek to in file-like body in the event of a retry or</span>
<span class=sd>        redirect. Typically this won&#39;t need to be set because urllib3 will</span>
<span class=sd>        auto-populate the value when needed.</span>

<span class=sd>    :param \\**response_kw:</span>
<span class=sd>        Additional parameters are passed to</span>
<span class=sd>        :meth:`urllib3.response.HTTPResponse.from_httplib`</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>parsed_url</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=n>destination_scheme</span> <span class=o>=</span> <span class=n>parsed_url</span><span class=o>.</span><span class=n>scheme</span>

    <span class=k>if</span> <span class=n>headers</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>headers</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>Retry</span><span class=p>):</span>
        <span class=n>retries</span> <span class=o>=</span> <span class=n>Retry</span><span class=o>.</span><span class=n>from_int</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>retries</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>release_conn</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>release_conn</span> <span class=o>=</span> <span class=n>response_kw</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;preload_content&quot;</span><span class=p>,</span> <span class=kc>True</span><span class=p>)</span>

    <span class=c1># Check host</span>
    <span class=k>if</span> <span class=n>assert_same_host</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>is_same_host</span><span class=p>(</span><span class=n>url</span><span class=p>):</span>
        <span class=k>raise</span> <span class=n>HostChangedError</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>retries</span><span class=p>)</span>

    <span class=c1># Ensure that the URL we&#39;re connecting to is properly encoded</span>
    <span class=k>if</span> <span class=n>url</span><span class=o>.</span><span class=n>startswith</span><span class=p>(</span><span class=s2>&quot;/&quot;</span><span class=p>):</span>
        <span class=n>url</span> <span class=o>=</span> <span class=n>six</span><span class=o>.</span><span class=n>ensure_str</span><span class=p>(</span><span class=n>_encode_target</span><span class=p>(</span><span class=n>url</span><span class=p>))</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>url</span> <span class=o>=</span> <span class=n>six</span><span class=o>.</span><span class=n>ensure_str</span><span class=p>(</span><span class=n>parsed_url</span><span class=o>.</span><span class=n>url</span><span class=p>)</span>

    <span class=n>conn</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Track whether `conn` needs to be released before</span>
    <span class=c1># returning/raising/recursing. Update this variable if necessary, and</span>
    <span class=c1># leave `release_conn` constant throughout the function. That way, if</span>
    <span class=c1># the function recurses, the original value of `release_conn` will be</span>
    <span class=c1># passed down into the recursive call, and its value will be respected.</span>
    <span class=c1>#</span>
    <span class=c1># See issue #651 [1] for details.</span>
    <span class=c1>#</span>
    <span class=c1># [1] &lt;https://github.com/urllib3/urllib3/issues/651&gt;</span>
    <span class=n>release_this_conn</span> <span class=o>=</span> <span class=n>release_conn</span>

    <span class=n>http_tunnel_required</span> <span class=o>=</span> <span class=n>connection_requires_http_tunnel</span><span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span><span class=p>,</span> <span class=n>destination_scheme</span>
    <span class=p>)</span>

    <span class=c1># Merge the proxy headers. Only done when not using HTTP CONNECT. We</span>
    <span class=c1># have to copy the headers dict so we can safely change it without those</span>
    <span class=c1># changes being reflected in anyone else&#39;s copy.</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>http_tunnel_required</span><span class=p>:</span>
        <span class=n>headers</span> <span class=o>=</span> <span class=n>headers</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
        <span class=n>headers</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>proxy_headers</span><span class=p>)</span>

    <span class=c1># Must keep the exception bound to a separate variable or else Python 3</span>
    <span class=c1># complains about UnboundLocalError.</span>
    <span class=n>err</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=c1># Keep track of whether we cleanly exited the except block. This</span>
    <span class=c1># ensures we do proper cleanup in finally.</span>
    <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=c1># Rewind body position, if needed. Record current position</span>
    <span class=c1># for future rewinds in the event of a redirect/retry.</span>
    <span class=n>body_pos</span> <span class=o>=</span> <span class=n>set_file_position</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=n>body_pos</span><span class=p>)</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=c1># Request a connection from the queue.</span>
        <span class=n>timeout_obj</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_timeout</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span>
        <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_get_conn</span><span class=p>(</span><span class=n>timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>)</span>

        <span class=n>conn</span><span class=o>.</span><span class=n>timeout</span> <span class=o>=</span> <span class=n>timeout_obj</span><span class=o>.</span><span class=n>connect_timeout</span>

        <span class=n>is_new_proxy_conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span>
            <span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;sock&quot;</span><span class=p>,</span> <span class=kc>None</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>is_new_proxy_conn</span> <span class=ow>and</span> <span class=n>http_tunnel_required</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_prepare_proxy</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

        <span class=c1># Make the request on the httplib connection object.</span>
        <span class=n>httplib_response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_make_request</span><span class=p>(</span>
            <span class=n>conn</span><span class=p>,</span>
            <span class=n>method</span><span class=p>,</span>
            <span class=n>url</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=n>timeout_obj</span><span class=p>,</span>
            <span class=n>body</span><span class=o>=</span><span class=n>body</span><span class=p>,</span>
            <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span>
            <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=c1># If we&#39;re going to release the connection in ``finally:``, then</span>
        <span class=c1># the response doesn&#39;t need to know about the connection. Otherwise</span>
        <span class=c1># it will also try to release it and we&#39;ll have a double-release</span>
        <span class=c1># mess.</span>
        <span class=n>response_conn</span> <span class=o>=</span> <span class=n>conn</span> <span class=k>if</span> <span class=ow>not</span> <span class=n>release_conn</span> <span class=k>else</span> <span class=kc>None</span>

        <span class=c1># Pass method to Response for length checking</span>
        <span class=n>response_kw</span><span class=p>[</span><span class=s2>&quot;request_method&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>method</span>

        <span class=c1># Import httplib&#39;s response into our own wrapper object</span>
        <span class=n>response</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ResponseCls</span><span class=o>.</span><span class=n>from_httplib</span><span class=p>(</span>
            <span class=n>httplib_response</span><span class=p>,</span>
            <span class=n>pool</span><span class=o>=</span><span class=bp>self</span><span class=p>,</span>
            <span class=n>connection</span><span class=o>=</span><span class=n>response_conn</span><span class=p>,</span>
            <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
            <span class=o>**</span><span class=n>response_kw</span>
        <span class=p>)</span>

        <span class=c1># Everything went great!</span>
        <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>True</span>

    <span class=k>except</span> <span class=n>EmptyPoolError</span><span class=p>:</span>
        <span class=c1># Didn&#39;t get a connection from the pool, no need to clean up</span>
        <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=n>release_this_conn</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=k>raise</span>

    <span class=k>except</span> <span class=p>(</span>
        <span class=ne>TimeoutError</span><span class=p>,</span>
        <span class=n>HTTPException</span><span class=p>,</span>
        <span class=n>SocketError</span><span class=p>,</span>
        <span class=n>ProtocolError</span><span class=p>,</span>
        <span class=n>BaseSSLError</span><span class=p>,</span>
        <span class=n>SSLError</span><span class=p>,</span>
        <span class=n>CertificateError</span><span class=p>,</span>
    <span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
        <span class=c1># Discard the connection for these exceptions. It will be</span>
        <span class=c1># replaced during the next _get_conn() call.</span>
        <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>BaseSSLError</span><span class=p>,</span> <span class=n>CertificateError</span><span class=p>)):</span>
            <span class=n>e</span> <span class=o>=</span> <span class=n>SSLError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>SocketError</span><span class=p>,</span> <span class=n>NewConnectionError</span><span class=p>))</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>:</span>
            <span class=n>e</span> <span class=o>=</span> <span class=n>ProxyError</span><span class=p>(</span><span class=s2>&quot;Cannot connect to proxy.&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>e</span><span class=p>,</span> <span class=p>(</span><span class=n>SocketError</span><span class=p>,</span> <span class=n>HTTPException</span><span class=p>)):</span>
            <span class=n>e</span> <span class=o>=</span> <span class=n>ProtocolError</span><span class=p>(</span><span class=s2>&quot;Connection aborted.&quot;</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>

        <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span>
            <span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>error</span><span class=o>=</span><span class=n>e</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=o>=</span><span class=n>sys</span><span class=o>.</span><span class=n>exc_info</span><span class=p>()[</span><span class=mi>2</span><span class=p>]</span>
        <span class=p>)</span>
        <span class=n>retries</span><span class=o>.</span><span class=n>sleep</span><span class=p>()</span>

        <span class=c1># Keep track of the error for the retry warning.</span>
        <span class=n>err</span> <span class=o>=</span> <span class=n>e</span>

    <span class=k>finally</span><span class=p>:</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>clean_exit</span><span class=p>:</span>
            <span class=c1># We hit some kind of exception, handled or otherwise. We need</span>
            <span class=c1># to throw the connection away unless explicitly told not to.</span>
            <span class=c1># Close the connection, set the variable to None, and make sure</span>
            <span class=c1># we put the None back in the pool to avoid leaking it.</span>
            <span class=n>conn</span> <span class=o>=</span> <span class=n>conn</span> <span class=ow>and</span> <span class=n>conn</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
            <span class=n>release_this_conn</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=k>if</span> <span class=n>release_this_conn</span><span class=p>:</span>
            <span class=c1># Put the connection back to be reused. If the connection is</span>
            <span class=c1># expired then it will be None, which will get replaced with a</span>
            <span class=c1># fresh connection during _get_conn.</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_put_conn</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>conn</span><span class=p>:</span>
        <span class=c1># Try again</span>
        <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
            <span class=s2>&quot;Retrying (</span><span class=si>%r</span><span class=s2>) after connection broken by &#39;</span><span class=si>%r</span><span class=s2>&#39;: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>retries</span><span class=p>,</span> <span class=n>err</span><span class=p>,</span> <span class=n>url</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
            <span class=n>method</span><span class=p>,</span>
            <span class=n>url</span><span class=p>,</span>
            <span class=n>body</span><span class=p>,</span>
            <span class=n>headers</span><span class=p>,</span>
            <span class=n>retries</span><span class=p>,</span>
            <span class=n>redirect</span><span class=p>,</span>
            <span class=n>assert_same_host</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
            <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
            <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
            <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
            <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
            <span class=o>**</span><span class=n>response_kw</span>
        <span class=p>)</span>

    <span class=c1># Handle redirect?</span>
    <span class=n>redirect_location</span> <span class=o>=</span> <span class=n>redirect</span> <span class=ow>and</span> <span class=n>response</span><span class=o>.</span><span class=n>get_redirect_location</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>redirect_location</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>303</span><span class=p>:</span>
            <span class=n>method</span> <span class=o>=</span> <span class=s2>&quot;GET&quot;</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=n>response</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>)</span>
        <span class=k>except</span> <span class=n>MaxRetryError</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>raise_on_redirect</span><span class=p>:</span>
                <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
                <span class=k>raise</span>
            <span class=k>return</span> <span class=n>response</span>

        <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
        <span class=n>retries</span><span class=o>.</span><span class=n>sleep_for_retry</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Redirecting </span><span class=si>%s</span><span class=s2> -&gt; </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
            <span class=n>method</span><span class=p>,</span>
            <span class=n>redirect_location</span><span class=p>,</span>
            <span class=n>body</span><span class=p>,</span>
            <span class=n>headers</span><span class=p>,</span>
            <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
            <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span>
            <span class=n>assert_same_host</span><span class=o>=</span><span class=n>assert_same_host</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
            <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
            <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
            <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
            <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
            <span class=o>**</span><span class=n>response_kw</span>
        <span class=p>)</span>

    <span class=c1># Check if we should retry the HTTP response.</span>
    <span class=n>has_retry_after</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=n>response</span><span class=o>.</span><span class=n>getheader</span><span class=p>(</span><span class=s2>&quot;Retry-After&quot;</span><span class=p>))</span>
    <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>is_retry</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span><span class=p>,</span> <span class=n>has_retry_after</span><span class=p>):</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=n>response</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=bp>self</span><span class=p>)</span>
        <span class=k>except</span> <span class=n>MaxRetryError</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>raise_on_status</span><span class=p>:</span>
                <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
                <span class=k>raise</span>
            <span class=k>return</span> <span class=n>response</span>

        <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
        <span class=n>retries</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Retry: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span>
            <span class=n>method</span><span class=p>,</span>
            <span class=n>url</span><span class=p>,</span>
            <span class=n>body</span><span class=p>,</span>
            <span class=n>headers</span><span class=p>,</span>
            <span class=n>retries</span><span class=o>=</span><span class=n>retries</span><span class=p>,</span>
            <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span>
            <span class=n>assert_same_host</span><span class=o>=</span><span class=n>assert_same_host</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span>
            <span class=n>pool_timeout</span><span class=o>=</span><span class=n>pool_timeout</span><span class=p>,</span>
            <span class=n>release_conn</span><span class=o>=</span><span class=n>release_conn</span><span class=p>,</span>
            <span class=n>chunked</span><span class=o>=</span><span class=n>chunked</span><span class=p>,</span>
            <span class=n>body_pos</span><span class=o>=</span><span class=n>body_pos</span><span class=p>,</span>
            <span class=o>**</span><span class=n>response_kw</span>
        <span class=p>)</span>

    <span class=k>return</span> <span class=n>response</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_fusion.vendor.urllib3.HTTPResponse class="doc doc-heading"> <code>HTTPResponse</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=io.IOBase>IOBase</span></code></p> <p>HTTP Response container.</p> <p>Backwards-compatible with :class:<code>http.client.HTTPResponse</code> but the response <code>body</code> is loaded and decoded on-demand when the <code>data</code> property is accessed. This class is also compatible with the Python standard library's :mod:<code>io</code> module, and can hence be treated as a readable object in the context of that framework.</p> <p>Extra parameters for behaviour not present in :class:<code>http.client.HTTPResponse</code>:</p> <p>:param preload_content: If True, the response's body will be preloaded during construction.</p> <p>:param decode_content: If True, will attempt to decode the body based on the 'content-encoding' header.</p> <p>:param original_response: When this HTTPResponse wrapper is generated from an :class:<code>http.client.HTTPResponse</code> object, it's convenient to include the original for debug purposes. It's otherwise unused.</p> <p>:param retries: The retries contains the last :class:<code>~urllib3.util.retry.Retry</code> that was used during the request.</p> <p>:param enforce_content_length: Enforce content length checking. Body returned by server must match value of Content-Length header, if present. Otherwise, raise error.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/response.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span>
<span class=normal>612</span>
<span class=normal>613</span>
<span class=normal>614</span>
<span class=normal>615</span>
<span class=normal>616</span>
<span class=normal>617</span>
<span class=normal>618</span>
<span class=normal>619</span>
<span class=normal>620</span>
<span class=normal>621</span>
<span class=normal>622</span>
<span class=normal>623</span>
<span class=normal>624</span>
<span class=normal>625</span>
<span class=normal>626</span>
<span class=normal>627</span>
<span class=normal>628</span>
<span class=normal>629</span>
<span class=normal>630</span>
<span class=normal>631</span>
<span class=normal>632</span>
<span class=normal>633</span>
<span class=normal>634</span>
<span class=normal>635</span>
<span class=normal>636</span>
<span class=normal>637</span>
<span class=normal>638</span>
<span class=normal>639</span>
<span class=normal>640</span>
<span class=normal>641</span>
<span class=normal>642</span>
<span class=normal>643</span>
<span class=normal>644</span>
<span class=normal>645</span>
<span class=normal>646</span>
<span class=normal>647</span>
<span class=normal>648</span>
<span class=normal>649</span>
<span class=normal>650</span>
<span class=normal>651</span>
<span class=normal>652</span>
<span class=normal>653</span>
<span class=normal>654</span>
<span class=normal>655</span>
<span class=normal>656</span>
<span class=normal>657</span>
<span class=normal>658</span>
<span class=normal>659</span>
<span class=normal>660</span>
<span class=normal>661</span>
<span class=normal>662</span>
<span class=normal>663</span>
<span class=normal>664</span>
<span class=normal>665</span>
<span class=normal>666</span>
<span class=normal>667</span>
<span class=normal>668</span>
<span class=normal>669</span>
<span class=normal>670</span>
<span class=normal>671</span>
<span class=normal>672</span>
<span class=normal>673</span>
<span class=normal>674</span>
<span class=normal>675</span>
<span class=normal>676</span>
<span class=normal>677</span>
<span class=normal>678</span>
<span class=normal>679</span>
<span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span>
<span class=normal>688</span>
<span class=normal>689</span>
<span class=normal>690</span>
<span class=normal>691</span>
<span class=normal>692</span>
<span class=normal>693</span>
<span class=normal>694</span>
<span class=normal>695</span>
<span class=normal>696</span>
<span class=normal>697</span>
<span class=normal>698</span>
<span class=normal>699</span>
<span class=normal>700</span>
<span class=normal>701</span>
<span class=normal>702</span>
<span class=normal>703</span>
<span class=normal>704</span>
<span class=normal>705</span>
<span class=normal>706</span>
<span class=normal>707</span>
<span class=normal>708</span>
<span class=normal>709</span>
<span class=normal>710</span>
<span class=normal>711</span>
<span class=normal>712</span>
<span class=normal>713</span>
<span class=normal>714</span>
<span class=normal>715</span>
<span class=normal>716</span>
<span class=normal>717</span>
<span class=normal>718</span>
<span class=normal>719</span>
<span class=normal>720</span>
<span class=normal>721</span>
<span class=normal>722</span>
<span class=normal>723</span>
<span class=normal>724</span>
<span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span>
<span class=normal>794</span>
<span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span>
<span class=normal>805</span>
<span class=normal>806</span>
<span class=normal>807</span>
<span class=normal>808</span>
<span class=normal>809</span>
<span class=normal>810</span>
<span class=normal>811</span>
<span class=normal>812</span>
<span class=normal>813</span>
<span class=normal>814</span>
<span class=normal>815</span>
<span class=normal>816</span>
<span class=normal>817</span>
<span class=normal>818</span>
<span class=normal>819</span>
<span class=normal>820</span>
<span class=normal>821</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>HTTPResponse</span><span class=p>(</span><span class=n>io</span><span class=o>.</span><span class=n>IOBase</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    HTTP Response container.</span>

<span class=sd>    Backwards-compatible with :class:`http.client.HTTPResponse` but the response ``body`` is</span>
<span class=sd>    loaded and decoded on-demand when the ``data`` property is accessed.  This</span>
<span class=sd>    class is also compatible with the Python standard library&#39;s :mod:`io`</span>
<span class=sd>    module, and can hence be treated as a readable object in the context of that</span>
<span class=sd>    framework.</span>

<span class=sd>    Extra parameters for behaviour not present in :class:`http.client.HTTPResponse`:</span>

<span class=sd>    :param preload_content:</span>
<span class=sd>        If True, the response&#39;s body will be preloaded during construction.</span>

<span class=sd>    :param decode_content:</span>
<span class=sd>        If True, will attempt to decode the body based on the</span>
<span class=sd>        &#39;content-encoding&#39; header.</span>

<span class=sd>    :param original_response:</span>
<span class=sd>        When this HTTPResponse wrapper is generated from an :class:`http.client.HTTPResponse`</span>
<span class=sd>        object, it&#39;s convenient to include the original for debug purposes. It&#39;s</span>
<span class=sd>        otherwise unused.</span>

<span class=sd>    :param retries:</span>
<span class=sd>        The retries contains the last :class:`~urllib3.util.retry.Retry` that</span>
<span class=sd>        was used during the request.</span>

<span class=sd>    :param enforce_content_length:</span>
<span class=sd>        Enforce content length checking. Body returned by server must match</span>
<span class=sd>        value of Content-Length header, if present. Otherwise, raise error.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>CONTENT_DECODERS</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;gzip&quot;</span><span class=p>,</span> <span class=s2>&quot;deflate&quot;</span><span class=p>]</span>
    <span class=k>if</span> <span class=n>brotli</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>CONTENT_DECODERS</span> <span class=o>+=</span> <span class=p>[</span><span class=s2>&quot;br&quot;</span><span class=p>]</span>
    <span class=n>REDIRECT_STATUSES</span> <span class=o>=</span> <span class=p>[</span><span class=mi>301</span><span class=p>,</span> <span class=mi>302</span><span class=p>,</span> <span class=mi>303</span><span class=p>,</span> <span class=mi>307</span><span class=p>,</span> <span class=mi>308</span><span class=p>]</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>body</span><span class=o>=</span><span class=s2>&quot;&quot;</span><span class=p>,</span>
        <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>status</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
        <span class=n>version</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
        <span class=n>reason</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>strict</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
        <span class=n>preload_content</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
        <span class=n>decode_content</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
        <span class=n>original_response</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>pool</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>connection</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>msg</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>enforce_content_length</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>request_method</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>request_url</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>auto_close</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
    <span class=p>):</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>headers</span><span class=p>,</span> <span class=n>HTTPHeaderDict</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>headers</span> <span class=o>=</span> <span class=n>headers</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>headers</span> <span class=o>=</span> <span class=n>HTTPHeaderDict</span><span class=p>(</span><span class=n>headers</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>status</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>version</span> <span class=o>=</span> <span class=n>version</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>reason</span> <span class=o>=</span> <span class=n>reason</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>strict</span> <span class=o>=</span> <span class=n>strict</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>decode_content</span> <span class=o>=</span> <span class=n>decode_content</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>enforce_content_length</span> <span class=o>=</span> <span class=n>enforce_content_length</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>auto_close</span> <span class=o>=</span> <span class=n>auto_close</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_decoder</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_body</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span> <span class=o>=</span> <span class=n>original_response</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_fp_bytes_read</span> <span class=o>=</span> <span class=mi>0</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>msg</span> <span class=o>=</span> <span class=n>msg</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_request_url</span> <span class=o>=</span> <span class=n>request_url</span>

        <span class=k>if</span> <span class=n>body</span> <span class=ow>and</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=p>(</span><span class=n>six</span><span class=o>.</span><span class=n>string_types</span><span class=p>,</span> <span class=nb>bytes</span><span class=p>)):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_body</span> <span class=o>=</span> <span class=n>body</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_pool</span> <span class=o>=</span> <span class=n>pool</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span> <span class=o>=</span> <span class=n>connection</span>

        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>body</span><span class=p>,</span> <span class=s2>&quot;read&quot;</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span> <span class=o>=</span> <span class=n>body</span>

        <span class=c1># Are we using the chunked-style of transfer encoding?</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>chunked</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>tr_enc</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;transfer-encoding&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=c1># Don&#39;t incur the penalty of creating a list and then discarding it</span>
        <span class=n>encodings</span> <span class=o>=</span> <span class=p>(</span><span class=n>enc</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span> <span class=k>for</span> <span class=n>enc</span> <span class=ow>in</span> <span class=n>tr_enc</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;,&quot;</span><span class=p>))</span>
        <span class=k>if</span> <span class=s2>&quot;chunked&quot;</span> <span class=ow>in</span> <span class=n>encodings</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>chunked</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=c1># Determine length of response</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>length_remaining</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_init_length</span><span class=p>(</span><span class=n>request_method</span><span class=p>)</span>

        <span class=c1># If requested, preload the body.</span>
        <span class=k>if</span> <span class=n>preload_content</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_body</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_body</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>decode_content</span><span class=o>=</span><span class=n>decode_content</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_redirect_location</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Should we redirect and where to?</span>

<span class=sd>        :returns: Truthy redirect location string if we got a redirect status</span>
<span class=sd>            code and valid location. ``None`` if redirect status and no</span>
<span class=sd>            location. ``False`` if not a redirect status code.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>REDIRECT_STATUSES</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;location&quot;</span><span class=p>)</span>

        <span class=k>return</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=nf>release_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_pool</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_pool</span><span class=o>.</span><span class=n>_put_conn</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_connection</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=nf>drain_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Read and discard any remaining HTTP response data in the response connection.</span>

<span class=sd>        Unread data in the HTTPResponse connection blocks the connection from being released back to the pool.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
        <span class=k>except</span> <span class=p>(</span><span class=n>HTTPError</span><span class=p>,</span> <span class=n>SocketError</span><span class=p>,</span> <span class=n>BaseSSLError</span><span class=p>,</span> <span class=n>HTTPException</span><span class=p>):</span>
            <span class=k>pass</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>data</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># For backwards-compat with earlier urllib3 0.4 and earlier.</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_body</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_body</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>cache_content</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>connection</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span>

    <span class=k>def</span><span class=w> </span><span class=nf>isclosed</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>is_fp_closed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>tell</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Obtain the number of bytes pulled over the wire so far. May differ from</span>
<span class=sd>        the amount of content returned by :meth:``urllib3.response.HTTPResponse.read``</span>
<span class=sd>        if bytes are encoded on the wire (e.g, compressed).</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp_bytes_read</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_init_length</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request_method</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Set initial length value for Response content if available.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>length</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content-length&quot;</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>length</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunked</span><span class=p>:</span>
                <span class=c1># This Response will fail with an IncompleteRead if it can&#39;t be</span>
                <span class=c1># received as chunked. This method falls back to attempt reading</span>
                <span class=c1># the response before raising an exception.</span>
                <span class=n>log</span><span class=o>.</span><span class=n>warning</span><span class=p>(</span>
                    <span class=s2>&quot;Received response with both Content-Length and &quot;</span>
                    <span class=s2>&quot;Transfer-Encoding set. This is expressly forbidden &quot;</span>
                    <span class=s2>&quot;by RFC 7230 sec 3.3.2. Ignoring Content-Length and &quot;</span>
                    <span class=s2>&quot;attempting to process response as Transfer-Encoding: &quot;</span>
                    <span class=s2>&quot;chunked.&quot;</span>
                <span class=p>)</span>
                <span class=k>return</span> <span class=kc>None</span>

            <span class=k>try</span><span class=p>:</span>
                <span class=c1># RFC 7230 section 3.3.2 specifies multiple content lengths can</span>
                <span class=c1># be sent in a single Content-Length header</span>
                <span class=c1># (e.g. Content-Length: 42, 42). This line ensures the values</span>
                <span class=c1># are all valid ints and that as long as the `set` length is 1,</span>
                <span class=c1># all values are the same. Otherwise, the header is invalid.</span>
                <span class=n>lengths</span> <span class=o>=</span> <span class=nb>set</span><span class=p>([</span><span class=nb>int</span><span class=p>(</span><span class=n>val</span><span class=p>)</span> <span class=k>for</span> <span class=n>val</span> <span class=ow>in</span> <span class=n>length</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;,&quot;</span><span class=p>)])</span>
                <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>lengths</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
                    <span class=k>raise</span> <span class=n>InvalidHeader</span><span class=p>(</span>
                        <span class=s2>&quot;Content-Length contained multiple &quot;</span>
                        <span class=s2>&quot;unmatching values (</span><span class=si>%s</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=n>length</span>
                    <span class=p>)</span>
                <span class=n>length</span> <span class=o>=</span> <span class=n>lengths</span><span class=o>.</span><span class=n>pop</span><span class=p>()</span>
            <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
                <span class=n>length</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>length</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
                    <span class=n>length</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=c1># Convert status to int for comparison</span>
        <span class=c1># In some cases, httplib returns a status of &quot;_UNKNOWN&quot;</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=n>status</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>status</span><span class=p>)</span>
        <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
            <span class=n>status</span> <span class=o>=</span> <span class=mi>0</span>

        <span class=c1># Check for responses that shouldn&#39;t include a body</span>
        <span class=k>if</span> <span class=n>status</span> <span class=ow>in</span> <span class=p>(</span><span class=mi>204</span><span class=p>,</span> <span class=mi>304</span><span class=p>)</span> <span class=ow>or</span> <span class=mi>100</span> <span class=o>&lt;=</span> <span class=n>status</span> <span class=o>&lt;</span> <span class=mi>200</span> <span class=ow>or</span> <span class=n>request_method</span> <span class=o>==</span> <span class=s2>&quot;HEAD&quot;</span><span class=p>:</span>
            <span class=n>length</span> <span class=o>=</span> <span class=mi>0</span>

        <span class=k>return</span> <span class=n>length</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_init_decoder</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Set-up the _decoder attribute if necessary.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># Note: content-encoding value should be case-insensitive, per RFC 7230</span>
        <span class=c1># Section 3.2</span>
        <span class=n>content_encoding</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content-encoding&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_decoder</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>content_encoding</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>CONTENT_DECODERS</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_decoder</span> <span class=o>=</span> <span class=n>_get_decoder</span><span class=p>(</span><span class=n>content_encoding</span><span class=p>)</span>
            <span class=k>elif</span> <span class=s2>&quot;,&quot;</span> <span class=ow>in</span> <span class=n>content_encoding</span><span class=p>:</span>
                <span class=n>encodings</span> <span class=o>=</span> <span class=p>[</span>
                    <span class=n>e</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
                    <span class=k>for</span> <span class=n>e</span> <span class=ow>in</span> <span class=n>content_encoding</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&quot;,&quot;</span><span class=p>)</span>
                    <span class=k>if</span> <span class=n>e</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>CONTENT_DECODERS</span>
                <span class=p>]</span>
                <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>encodings</span><span class=p>):</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_decoder</span> <span class=o>=</span> <span class=n>_get_decoder</span><span class=p>(</span><span class=n>content_encoding</span><span class=p>)</span>

    <span class=n>DECODER_ERROR_CLASSES</span> <span class=o>=</span> <span class=p>(</span><span class=ne>IOError</span><span class=p>,</span> <span class=n>zlib</span><span class=o>.</span><span class=n>error</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>brotli</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>DECODER_ERROR_CLASSES</span> <span class=o>+=</span> <span class=p>(</span><span class=n>brotli</span><span class=o>.</span><span class=n>error</span><span class=p>,)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_decode</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>,</span> <span class=n>decode_content</span><span class=p>,</span> <span class=n>flush_decoder</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Decode the data passed in and potentially flush the decoder.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>decode_content</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>data</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_decoder</span><span class=p>:</span>
                <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_decoder</span><span class=o>.</span><span class=n>decompress</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
        <span class=k>except</span> <span class=bp>self</span><span class=o>.</span><span class=n>DECODER_ERROR_CLASSES</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
            <span class=n>content_encoding</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;content-encoding&quot;</span><span class=p>,</span> <span class=s2>&quot;&quot;</span><span class=p>)</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
            <span class=k>raise</span> <span class=n>DecodeError</span><span class=p>(</span>
                <span class=s2>&quot;Received response with content-encoding: </span><span class=si>%s</span><span class=s2>, but &quot;</span>
                <span class=s2>&quot;failed to decode it.&quot;</span> <span class=o>%</span> <span class=n>content_encoding</span><span class=p>,</span>
                <span class=n>e</span><span class=p>,</span>
            <span class=p>)</span>
        <span class=k>if</span> <span class=n>flush_decoder</span><span class=p>:</span>
            <span class=n>data</span> <span class=o>+=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_flush_decoder</span><span class=p>()</span>

        <span class=k>return</span> <span class=n>data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_flush_decoder</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Flushes the decoder. Should only be called if the decoder is actually</span>
<span class=sd>        being used.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_decoder</span><span class=p>:</span>
            <span class=n>buf</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_decoder</span><span class=o>.</span><span class=n>decompress</span><span class=p>(</span><span class=sa>b</span><span class=s2>&quot;&quot;</span><span class=p>)</span>
            <span class=k>return</span> <span class=n>buf</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>_decoder</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>

        <span class=k>return</span> <span class=sa>b</span><span class=s2>&quot;&quot;</span>

    <span class=nd>@contextmanager</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_error_catcher</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Catch low-level python exceptions, instead re-raising urllib3</span>
<span class=sd>        variants, so that low-level exceptions are not leaked in the</span>
<span class=sd>        high-level api.</span>

<span class=sd>        On exit, release the connection back to the pool.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=k>try</span><span class=p>:</span>
                <span class=k>yield</span>

            <span class=k>except</span> <span class=n>SocketTimeout</span><span class=p>:</span>
                <span class=c1># FIXME: Ideally we&#39;d like to include the url in the ReadTimeoutError but</span>
                <span class=c1># there is yet no clean way to get at it from this context.</span>
                <span class=k>raise</span> <span class=n>ReadTimeoutError</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_pool</span><span class=p>,</span> <span class=kc>None</span><span class=p>,</span> <span class=s2>&quot;Read timed out.&quot;</span><span class=p>)</span>

            <span class=k>except</span> <span class=n>BaseSSLError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
                <span class=c1># FIXME: Is there a better way to differentiate between SSLErrors?</span>
                <span class=k>if</span> <span class=s2>&quot;read operation timed out&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=nb>str</span><span class=p>(</span><span class=n>e</span><span class=p>):</span>
                    <span class=c1># SSL errors related to framing/MAC get wrapped and reraised here</span>
                    <span class=k>raise</span> <span class=n>SSLError</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>

                <span class=k>raise</span> <span class=n>ReadTimeoutError</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_pool</span><span class=p>,</span> <span class=kc>None</span><span class=p>,</span> <span class=s2>&quot;Read timed out.&quot;</span><span class=p>)</span>

            <span class=k>except</span> <span class=p>(</span><span class=n>HTTPException</span><span class=p>,</span> <span class=n>SocketError</span><span class=p>)</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
                <span class=c1># This includes IncompleteRead.</span>
                <span class=k>raise</span> <span class=n>ProtocolError</span><span class=p>(</span><span class=s2>&quot;Connection broken: </span><span class=si>%r</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=n>e</span><span class=p>,</span> <span class=n>e</span><span class=p>)</span>

            <span class=c1># If no exception is thrown, we should avoid cleaning up</span>
            <span class=c1># unnecessarily.</span>
            <span class=n>clean_exit</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=k>finally</span><span class=p>:</span>
            <span class=c1># If we didn&#39;t terminate cleanly, we need to throw away our</span>
            <span class=c1># connection.</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>clean_exit</span><span class=p>:</span>
                <span class=c1># The response may not be closed but we&#39;re not going to use it</span>
                <span class=c1># anymore so close it now to ensure that the connection is</span>
                <span class=c1># released back to the pool.</span>
                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

                <span class=c1># Closing the response may not actually be sufficient to close</span>
                <span class=c1># everything, so if we have a hold of the connection close that</span>
                <span class=c1># too.</span>
                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span><span class=p>:</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

            <span class=c1># If we hold the original response but it&#39;s closed now, we should</span>
            <span class=c1># return the connection back to the pool.</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=o>.</span><span class=n>isclosed</span><span class=p>():</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>release_conn</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>read</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amt</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>cache_content</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Similar to :meth:`http.client.HTTPResponse.read`, but with two additional</span>
<span class=sd>        parameters: ``decode_content`` and ``cache_content``.</span>

<span class=sd>        :param amt:</span>
<span class=sd>            How much of the content to read. If specified, caching is skipped</span>
<span class=sd>            because it doesn&#39;t make sense to cache partial content as the full</span>
<span class=sd>            response.</span>

<span class=sd>        :param decode_content:</span>
<span class=sd>            If True, will attempt to decode the body based on the</span>
<span class=sd>            &#39;content-encoding&#39; header.</span>

<span class=sd>        :param cache_content:</span>
<span class=sd>            If True, will save the returned data such that the same result is</span>
<span class=sd>            returned despite of the state of the underlying file object. This</span>
<span class=sd>            is useful if you want the ``.data`` property to continue working</span>
<span class=sd>            after having ``.read()`` the file object. (Overridden if ``amt`` is</span>
<span class=sd>            set.)</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_init_decoder</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>decode_content</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>decode_content</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>decode_content</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=n>flush_decoder</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>fp_closed</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>,</span> <span class=s2>&quot;closed&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_error_catcher</span><span class=p>():</span>
            <span class=k>if</span> <span class=n>amt</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=c1># cStringIO doesn&#39;t like amt=None</span>
                <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>read</span><span class=p>()</span> <span class=k>if</span> <span class=ow>not</span> <span class=n>fp_closed</span> <span class=k>else</span> <span class=sa>b</span><span class=s2>&quot;&quot;</span>
                <span class=n>flush_decoder</span> <span class=o>=</span> <span class=kc>True</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>cache_content</span> <span class=o>=</span> <span class=kc>False</span>
                <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>amt</span><span class=p>)</span> <span class=k>if</span> <span class=ow>not</span> <span class=n>fp_closed</span> <span class=k>else</span> <span class=sa>b</span><span class=s2>&quot;&quot;</span>
                <span class=k>if</span> <span class=p>(</span>
                    <span class=n>amt</span> <span class=o>!=</span> <span class=mi>0</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>data</span>
                <span class=p>):</span>  <span class=c1># Platform-specific: Buggy versions of Python.</span>
                    <span class=c1># Close the connection when no data is returned</span>
                    <span class=c1>#</span>
                    <span class=c1># This is redundant to what httplib/http.client _should_</span>
                    <span class=c1># already do.  However, versions of python released before</span>
                    <span class=c1># December 15, 2012 (http://bugs.python.org/issue16298) do</span>
                    <span class=c1># not properly close the connection in all cases. There is</span>
                    <span class=c1># no harm in redundantly calling close.</span>
                    <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
                    <span class=n>flush_decoder</span> <span class=o>=</span> <span class=kc>True</span>
                    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>enforce_content_length</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>length_remaining</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>(</span>
                        <span class=mi>0</span><span class=p>,</span>
                        <span class=kc>None</span><span class=p>,</span>
                    <span class=p>):</span>
                        <span class=c1># This is an edge case that httplib failed to cover due</span>
                        <span class=c1># to concerns of backward compatibility. We&#39;re</span>
                        <span class=c1># addressing it here to make sure IncompleteRead is</span>
                        <span class=c1># raised during streaming, so all calls with incorrect</span>
                        <span class=c1># Content-Length are caught.</span>
                        <span class=k>raise</span> <span class=n>IncompleteRead</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp_bytes_read</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>length_remaining</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_fp_bytes_read</span> <span class=o>+=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>length_remaining</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>length_remaining</span> <span class=o>-=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

            <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_decode</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>decode_content</span><span class=p>,</span> <span class=n>flush_decoder</span><span class=p>)</span>

            <span class=k>if</span> <span class=n>cache_content</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_body</span> <span class=o>=</span> <span class=n>data</span>

        <span class=k>return</span> <span class=n>data</span>

    <span class=k>def</span><span class=w> </span><span class=nf>stream</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amt</span><span class=o>=</span><span class=mi>2</span> <span class=o>**</span> <span class=mi>16</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        A generator wrapper for the read() method. A call will block until</span>
<span class=sd>        ``amt`` bytes have been read from the connection or until the</span>
<span class=sd>        connection is closed.</span>

<span class=sd>        :param amt:</span>
<span class=sd>            How much of the content to read. The generator will return up to</span>
<span class=sd>            much data per iteration, but may return less. This is particularly</span>
<span class=sd>            likely when using compressed data. However, the empty string will</span>
<span class=sd>            never be returned.</span>

<span class=sd>        :param decode_content:</span>
<span class=sd>            If True, will attempt to decode the body based on the</span>
<span class=sd>            &#39;content-encoding&#39; header.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunked</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>supports_chunked_reads</span><span class=p>():</span>
            <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>read_chunked</span><span class=p>(</span><span class=n>amt</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=n>decode_content</span><span class=p>):</span>
                <span class=k>yield</span> <span class=n>line</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>while</span> <span class=ow>not</span> <span class=n>is_fp_closed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>):</span>
                <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>amt</span><span class=o>=</span><span class=n>amt</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=n>decode_content</span><span class=p>)</span>

                <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
                    <span class=k>yield</span> <span class=n>data</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_httplib</span><span class=p>(</span><span class=n>ResponseCls</span><span class=p>,</span> <span class=n>r</span><span class=p>,</span> <span class=o>**</span><span class=n>response_kw</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Given an :class:`http.client.HTTPResponse` instance ``r``, return a</span>
<span class=sd>        corresponding :class:`urllib3.response.HTTPResponse` object.</span>

<span class=sd>        Remaining parameters are passed to the HTTPResponse constructor, along</span>
<span class=sd>        with ``original_response=r``.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>headers</span> <span class=o>=</span> <span class=n>r</span><span class=o>.</span><span class=n>msg</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>headers</span><span class=p>,</span> <span class=n>HTTPHeaderDict</span><span class=p>):</span>
            <span class=k>if</span> <span class=n>six</span><span class=o>.</span><span class=n>PY2</span><span class=p>:</span>
                <span class=c1># Python 2.7</span>
                <span class=n>headers</span> <span class=o>=</span> <span class=n>HTTPHeaderDict</span><span class=o>.</span><span class=n>from_httplib</span><span class=p>(</span><span class=n>headers</span><span class=p>)</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>headers</span> <span class=o>=</span> <span class=n>HTTPHeaderDict</span><span class=p>(</span><span class=n>headers</span><span class=o>.</span><span class=n>items</span><span class=p>())</span>

        <span class=c1># HTTPResponse objects in Python 3 don&#39;t have a .strict attribute</span>
        <span class=n>strict</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=s2>&quot;strict&quot;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
        <span class=n>resp</span> <span class=o>=</span> <span class=n>ResponseCls</span><span class=p>(</span>
            <span class=n>body</span><span class=o>=</span><span class=n>r</span><span class=p>,</span>
            <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span>
            <span class=n>status</span><span class=o>=</span><span class=n>r</span><span class=o>.</span><span class=n>status</span><span class=p>,</span>
            <span class=n>version</span><span class=o>=</span><span class=n>r</span><span class=o>.</span><span class=n>version</span><span class=p>,</span>
            <span class=n>reason</span><span class=o>=</span><span class=n>r</span><span class=o>.</span><span class=n>reason</span><span class=p>,</span>
            <span class=n>strict</span><span class=o>=</span><span class=n>strict</span><span class=p>,</span>
            <span class=n>original_response</span><span class=o>=</span><span class=n>r</span><span class=p>,</span>
            <span class=o>**</span><span class=n>response_kw</span>
        <span class=p>)</span>
        <span class=k>return</span> <span class=n>resp</span>

    <span class=c1># Backwards-compatibility methods for http.client.HTTPResponse</span>
    <span class=k>def</span><span class=w> </span><span class=nf>getheaders</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span>

    <span class=k>def</span><span class=w> </span><span class=nf>getheader</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>name</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>default</span><span class=p>)</span>

    <span class=c1># Backwards compatibility for http.cookiejar</span>
    <span class=k>def</span><span class=w> </span><span class=nf>info</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span>

    <span class=c1># Overrides from io.IOBase</span>
    <span class=k>def</span><span class=w> </span><span class=nf>close</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>closed</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_connection</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>auto_close</span><span class=p>:</span>
            <span class=n>io</span><span class=o>.</span><span class=n>IOBase</span><span class=o>.</span><span class=n>close</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>closed</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>auto_close</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>io</span><span class=o>.</span><span class=n>IOBase</span><span class=o>.</span><span class=n>closed</span><span class=o>.</span><span class=fm>__get__</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span>
        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>True</span>
        <span class=k>elif</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>,</span> <span class=s2>&quot;isclosed&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>isclosed</span><span class=p>()</span>
        <span class=k>elif</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>,</span> <span class=s2>&quot;closed&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>closed</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>fileno</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>IOError</span><span class=p>(</span><span class=s2>&quot;HTTPResponse has no file to get a fileno from&quot;</span><span class=p>)</span>
        <span class=k>elif</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>,</span> <span class=s2>&quot;fileno&quot;</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>fileno</span><span class=p>()</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>raise</span> <span class=ne>IOError</span><span class=p>(</span>
                <span class=s2>&quot;The file-like object this HTTPResponse is wrapped &quot;</span>
                <span class=s2>&quot;around has no file descriptor&quot;</span>
            <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>flush</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
            <span class=ow>and</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>,</span> <span class=s2>&quot;flush&quot;</span><span class=p>)</span>
            <span class=ow>and</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>,</span> <span class=s2>&quot;closed&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>
        <span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>flush</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>readable</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># This method is required for `io` module compatibility.</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>readinto</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
        <span class=c1># This method is required for `io` module compatibility.</span>
        <span class=n>temp</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>b</span><span class=p>))</span>
        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>temp</span><span class=p>)</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
            <span class=k>return</span> <span class=mi>0</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>b</span><span class=p>[:</span> <span class=nb>len</span><span class=p>(</span><span class=n>temp</span><span class=p>)]</span> <span class=o>=</span> <span class=n>temp</span>
            <span class=k>return</span> <span class=nb>len</span><span class=p>(</span><span class=n>temp</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>supports_chunked_reads</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Checks if the underlying file-like object looks like a</span>
<span class=sd>        :class:`http.client.HTTPResponse` object. We do this by testing for</span>
<span class=sd>        the fp attribute. If it is present we assume it returns raw chunks as</span>
<span class=sd>        processed by read_chunked().</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>,</span> <span class=s2>&quot;fp&quot;</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_update_chunk_length</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=c1># First, we&#39;ll figure out length of a chunk and then</span>
        <span class=c1># we&#39;ll try to read it from socket.</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=n>line</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>fp</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span>
        <span class=n>line</span> <span class=o>=</span> <span class=n>line</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa>b</span><span class=s2>&quot;;&quot;</span><span class=p>,</span> <span class=mi>1</span><span class=p>)[</span><span class=mi>0</span><span class=p>]</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>line</span><span class=p>,</span> <span class=mi>16</span><span class=p>)</span>
        <span class=k>except</span> <span class=ne>ValueError</span><span class=p>:</span>
            <span class=c1># Invalid chunked protocol response, abort.</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
            <span class=k>raise</span> <span class=n>InvalidChunkLength</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>line</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_handle_chunk</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amt</span><span class=p>):</span>
        <span class=n>returned_chunk</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>if</span> <span class=n>amt</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>chunk</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>_safe_read</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span><span class=p>)</span>
            <span class=n>returned_chunk</span> <span class=o>=</span> <span class=n>chunk</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>_safe_read</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>  <span class=c1># Toss the CRLF at the end of the chunk.</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>elif</span> <span class=n>amt</span> <span class=o>&lt;</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>_safe_read</span><span class=p>(</span><span class=n>amt</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span> <span class=o>-</span> <span class=n>amt</span>
            <span class=n>returned_chunk</span> <span class=o>=</span> <span class=n>value</span>
        <span class=k>elif</span> <span class=n>amt</span> <span class=o>==</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span><span class=p>:</span>
            <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>_safe_read</span><span class=p>(</span><span class=n>amt</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>_safe_read</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>  <span class=c1># Toss the CRLF at the end of the chunk.</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span> <span class=o>=</span> <span class=kc>None</span>
            <span class=n>returned_chunk</span> <span class=o>=</span> <span class=n>value</span>
        <span class=k>else</span><span class=p>:</span>  <span class=c1># amt &gt; self.chunk_left</span>
            <span class=n>returned_chunk</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>_safe_read</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>_safe_read</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>  <span class=c1># Toss the CRLF at the end of the chunk.</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=k>return</span> <span class=n>returned_chunk</span>

    <span class=k>def</span><span class=w> </span><span class=nf>read_chunked</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amt</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Similar to :meth:`HTTPResponse.read`, but with an additional</span>
<span class=sd>        parameter: ``decode_content``.</span>

<span class=sd>        :param amt:</span>
<span class=sd>            How much of the content to read. If specified, caching is skipped</span>
<span class=sd>            because it doesn&#39;t make sense to cache partial content as the full</span>
<span class=sd>            response.</span>

<span class=sd>        :param decode_content:</span>
<span class=sd>            If True, will attempt to decode the body based on the</span>
<span class=sd>            &#39;content-encoding&#39; header.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_init_decoder</span><span class=p>()</span>
        <span class=c1># FIXME: Rewrite this method and make it a class with a better structured logic.</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunked</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ResponseNotChunked</span><span class=p>(</span>
                <span class=s2>&quot;Response is not chunked. &quot;</span>
                <span class=s2>&quot;Header &#39;transfer-encoding: chunked&#39; is missing.&quot;</span>
            <span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>supports_chunked_reads</span><span class=p>():</span>
            <span class=k>raise</span> <span class=n>BodyNotHttplibCompatible</span><span class=p>(</span>
                <span class=s2>&quot;Body should be http.client.HTTPResponse like. &quot;</span>
                <span class=s2>&quot;It should have have an fp attribute which returns raw chunks.&quot;</span>
            <span class=p>)</span>

        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_error_catcher</span><span class=p>():</span>
            <span class=c1># Don&#39;t bother reading the body of a HEAD request.</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span> <span class=ow>and</span> <span class=n>is_response_to_head</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=p>):</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
                <span class=k>return</span>

            <span class=c1># If a response is already read and closed</span>
            <span class=c1># then return immediately.</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>fp</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>return</span>

            <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_update_chunk_length</span><span class=p>()</span>
                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
                    <span class=k>break</span>
                <span class=n>chunk</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_chunk</span><span class=p>(</span><span class=n>amt</span><span class=p>)</span>
                <span class=n>decoded</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_decode</span><span class=p>(</span>
                    <span class=n>chunk</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=n>decode_content</span><span class=p>,</span> <span class=n>flush_decoder</span><span class=o>=</span><span class=kc>False</span>
                <span class=p>)</span>
                <span class=k>if</span> <span class=n>decoded</span><span class=p>:</span>
                    <span class=k>yield</span> <span class=n>decoded</span>

            <span class=k>if</span> <span class=n>decode_content</span><span class=p>:</span>
                <span class=c1># On CPython and PyPy, we should never need to flush the</span>
                <span class=c1># decoder. However, on Jython we *might* need to, so</span>
                <span class=c1># lets defensively do it anyway.</span>
                <span class=n>decoded</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_flush_decoder</span><span class=p>()</span>
                <span class=k>if</span> <span class=n>decoded</span><span class=p>:</span>  <span class=c1># Platform-specific: Jython.</span>
                    <span class=k>yield</span> <span class=n>decoded</span>

            <span class=c1># Chunk content ends with \r\n: discard it.</span>
            <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
                <span class=n>line</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>fp</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span>
                <span class=k>if</span> <span class=ow>not</span> <span class=n>line</span><span class=p>:</span>
                    <span class=c1># Some sites may not end with &#39;\r\n&#39;.</span>
                    <span class=k>break</span>
                <span class=k>if</span> <span class=n>line</span> <span class=o>==</span> <span class=sa>b</span><span class=s2>&quot;</span><span class=se>\r\n</span><span class=s2>&quot;</span><span class=p>:</span>
                    <span class=k>break</span>

            <span class=c1># We read everything; close the &quot;file&quot;.</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=p>:</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>geturl</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Returns the URL that was the source of this response.</span>
<span class=sd>        If the request that generated this response redirected, this method</span>
<span class=sd>        will return the final redirect location.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>retries</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>retries</span><span class=o>.</span><span class=n>history</span><span class=p>):</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>retries</span><span class=o>.</span><span class=n>history</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>redirect_location</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_request_url</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>buffer</span> <span class=o>=</span> <span class=p>[]</span>
        <span class=k>for</span> <span class=n>chunk</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>stream</span><span class=p>(</span><span class=n>decode_content</span><span class=o>=</span><span class=kc>True</span><span class=p>):</span>
            <span class=k>if</span> <span class=sa>b</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span> <span class=ow>in</span> <span class=n>chunk</span><span class=p>:</span>
                <span class=n>chunk</span> <span class=o>=</span> <span class=n>chunk</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=sa>b</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span><span class=p>)</span>
                <span class=k>yield</span> <span class=sa>b</span><span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>buffer</span><span class=p>)</span> <span class=o>+</span> <span class=n>chunk</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>+</span> <span class=sa>b</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span>
                <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>chunk</span><span class=p>[</span><span class=mi>1</span><span class=p>:</span><span class=o>-</span><span class=mi>1</span><span class=p>]:</span>
                    <span class=k>yield</span> <span class=n>x</span> <span class=o>+</span> <span class=sa>b</span><span class=s2>&quot;</span><span class=se>\n</span><span class=s2>&quot;</span>
                <span class=k>if</span> <span class=n>chunk</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]:</span>
                    <span class=n>buffer</span> <span class=o>=</span> <span class=p>[</span><span class=n>chunk</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]]</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>buffer</span> <span class=o>=</span> <span class=p>[]</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>buffer</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>chunk</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>buffer</span><span class=p>:</span>
            <span class=k>yield</span> <span class=sa>b</span><span class=s2>&quot;&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>buffer</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPResponse.drain_conn class="doc doc-heading"> <code class="highlight language-python"><span class=n>drain_conn</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Read and discard any remaining HTTP response data in the response connection.</p> <p>Unread data in the HTTPResponse connection blocks the connection from being released back to the pool.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/response.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>drain_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Read and discard any remaining HTTP response data in the response connection.</span>

<span class=sd>    Unread data in the HTTPResponse connection blocks the connection from being released back to the pool.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>try</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
    <span class=k>except</span> <span class=p>(</span><span class=n>HTTPError</span><span class=p>,</span> <span class=n>SocketError</span><span class=p>,</span> <span class=n>BaseSSLError</span><span class=p>,</span> <span class=n>HTTPException</span><span class=p>):</span>
        <span class=k>pass</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPResponse.from_httplib class="doc doc-heading"> <code class="highlight language-python"><span class=n>from_httplib</span><span class=p>(</span><span class=n>ResponseCls</span><span class=p>,</span> <span class=n>r</span><span class=p>,</span> <span class=o>**</span><span class=n>response_kw</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Given an :class:<code>http.client.HTTPResponse</code> instance <code>r</code>, return a corresponding :class:<code>urllib3.response.HTTPResponse</code> object.</p> <p>Remaining parameters are passed to the HTTPResponse constructor, along with <code>original_response=r</code>.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/response.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span>
<span class=normal>599</span>
<span class=normal>600</span>
<span class=normal>601</span>
<span class=normal>602</span>
<span class=normal>603</span>
<span class=normal>604</span>
<span class=normal>605</span>
<span class=normal>606</span>
<span class=normal>607</span>
<span class=normal>608</span>
<span class=normal>609</span>
<span class=normal>610</span>
<span class=normal>611</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>from_httplib</span><span class=p>(</span><span class=n>ResponseCls</span><span class=p>,</span> <span class=n>r</span><span class=p>,</span> <span class=o>**</span><span class=n>response_kw</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Given an :class:`http.client.HTTPResponse` instance ``r``, return a</span>
<span class=sd>    corresponding :class:`urllib3.response.HTTPResponse` object.</span>

<span class=sd>    Remaining parameters are passed to the HTTPResponse constructor, along</span>
<span class=sd>    with ``original_response=r``.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>headers</span> <span class=o>=</span> <span class=n>r</span><span class=o>.</span><span class=n>msg</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>headers</span><span class=p>,</span> <span class=n>HTTPHeaderDict</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>six</span><span class=o>.</span><span class=n>PY2</span><span class=p>:</span>
            <span class=c1># Python 2.7</span>
            <span class=n>headers</span> <span class=o>=</span> <span class=n>HTTPHeaderDict</span><span class=o>.</span><span class=n>from_httplib</span><span class=p>(</span><span class=n>headers</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>headers</span> <span class=o>=</span> <span class=n>HTTPHeaderDict</span><span class=p>(</span><span class=n>headers</span><span class=o>.</span><span class=n>items</span><span class=p>())</span>

    <span class=c1># HTTPResponse objects in Python 3 don&#39;t have a .strict attribute</span>
    <span class=n>strict</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>r</span><span class=p>,</span> <span class=s2>&quot;strict&quot;</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
    <span class=n>resp</span> <span class=o>=</span> <span class=n>ResponseCls</span><span class=p>(</span>
        <span class=n>body</span><span class=o>=</span><span class=n>r</span><span class=p>,</span>
        <span class=n>headers</span><span class=o>=</span><span class=n>headers</span><span class=p>,</span>
        <span class=n>status</span><span class=o>=</span><span class=n>r</span><span class=o>.</span><span class=n>status</span><span class=p>,</span>
        <span class=n>version</span><span class=o>=</span><span class=n>r</span><span class=o>.</span><span class=n>version</span><span class=p>,</span>
        <span class=n>reason</span><span class=o>=</span><span class=n>r</span><span class=o>.</span><span class=n>reason</span><span class=p>,</span>
        <span class=n>strict</span><span class=o>=</span><span class=n>strict</span><span class=p>,</span>
        <span class=n>original_response</span><span class=o>=</span><span class=n>r</span><span class=p>,</span>
        <span class=o>**</span><span class=n>response_kw</span>
    <span class=p>)</span>
    <span class=k>return</span> <span class=n>resp</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPResponse.get_redirect_location class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_redirect_location</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Should we redirect and where to?</p> <p>:returns: Truthy redirect location string if we got a redirect status code and valid location. <code>None</code> if redirect status and no location. <code>False</code> if not a redirect status code.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/response.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_redirect_location</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Should we redirect and where to?</span>

<span class=sd>    :returns: Truthy redirect location string if we got a redirect status</span>
<span class=sd>        code and valid location. ``None`` if redirect status and no</span>
<span class=sd>        location. ``False`` if not a redirect status code.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>REDIRECT_STATUSES</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;location&quot;</span><span class=p>)</span>

    <span class=k>return</span> <span class=kc>False</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPResponse.geturl class="doc doc-heading"> <code class="highlight language-python"><span class=n>geturl</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Returns the URL that was the source of this response. If the request that generated this response redirected, this method will return the final redirect location.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/response.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>795</span>
<span class=normal>796</span>
<span class=normal>797</span>
<span class=normal>798</span>
<span class=normal>799</span>
<span class=normal>800</span>
<span class=normal>801</span>
<span class=normal>802</span>
<span class=normal>803</span>
<span class=normal>804</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>geturl</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Returns the URL that was the source of this response.</span>
<span class=sd>    If the request that generated this response redirected, this method</span>
<span class=sd>    will return the final redirect location.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>retries</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>retries</span><span class=o>.</span><span class=n>history</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>retries</span><span class=o>.</span><span class=n>history</span><span class=p>[</span><span class=o>-</span><span class=mi>1</span><span class=p>]</span><span class=o>.</span><span class=n>redirect_location</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_request_url</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPResponse.read class="doc doc-heading"> <code class="highlight language-python"><span class=n>read</span><span class=p>(</span><span class=n>amt</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>cache_content</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Similar to :meth:<code>http.client.HTTPResponse.read</code>, but with two additional parameters: <code>decode_content</code> and <code>cache_content</code>.</p> <p>:param amt: How much of the content to read. If specified, caching is skipped because it doesn't make sense to cache partial content as the full response.</p> <p>:param decode_content: If True, will attempt to decode the body based on the 'content-encoding' header.</p> <p>:param cache_content: If True, will save the returned data such that the same result is returned despite of the state of the underlying file object. This is useful if you want the <code>.data</code> property to continue working after having <code>.read()</code> the file object. (Overridden if <code>amt</code> is set.)</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/response.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>read</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amt</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>cache_content</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Similar to :meth:`http.client.HTTPResponse.read`, but with two additional</span>
<span class=sd>    parameters: ``decode_content`` and ``cache_content``.</span>

<span class=sd>    :param amt:</span>
<span class=sd>        How much of the content to read. If specified, caching is skipped</span>
<span class=sd>        because it doesn&#39;t make sense to cache partial content as the full</span>
<span class=sd>        response.</span>

<span class=sd>    :param decode_content:</span>
<span class=sd>        If True, will attempt to decode the body based on the</span>
<span class=sd>        &#39;content-encoding&#39; header.</span>

<span class=sd>    :param cache_content:</span>
<span class=sd>        If True, will save the returned data such that the same result is</span>
<span class=sd>        returned despite of the state of the underlying file object. This</span>
<span class=sd>        is useful if you want the ``.data`` property to continue working</span>
<span class=sd>        after having ``.read()`` the file object. (Overridden if ``amt`` is</span>
<span class=sd>        set.)</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_init_decoder</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>decode_content</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>decode_content</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>decode_content</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span>

    <span class=n>flush_decoder</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=n>fp_closed</span> <span class=o>=</span> <span class=nb>getattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>,</span> <span class=s2>&quot;closed&quot;</span><span class=p>,</span> <span class=kc>False</span><span class=p>)</span>

    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_error_catcher</span><span class=p>():</span>
        <span class=k>if</span> <span class=n>amt</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=c1># cStringIO doesn&#39;t like amt=None</span>
            <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>read</span><span class=p>()</span> <span class=k>if</span> <span class=ow>not</span> <span class=n>fp_closed</span> <span class=k>else</span> <span class=sa>b</span><span class=s2>&quot;&quot;</span>
            <span class=n>flush_decoder</span> <span class=o>=</span> <span class=kc>True</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>cache_content</span> <span class=o>=</span> <span class=kc>False</span>
            <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>amt</span><span class=p>)</span> <span class=k>if</span> <span class=ow>not</span> <span class=n>fp_closed</span> <span class=k>else</span> <span class=sa>b</span><span class=s2>&quot;&quot;</span>
            <span class=k>if</span> <span class=p>(</span>
                <span class=n>amt</span> <span class=o>!=</span> <span class=mi>0</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>data</span>
            <span class=p>):</span>  <span class=c1># Platform-specific: Buggy versions of Python.</span>
                <span class=c1># Close the connection when no data is returned</span>
                <span class=c1>#</span>
                <span class=c1># This is redundant to what httplib/http.client _should_</span>
                <span class=c1># already do.  However, versions of python released before</span>
                <span class=c1># December 15, 2012 (http://bugs.python.org/issue16298) do</span>
                <span class=c1># not properly close the connection in all cases. There is</span>
                <span class=c1># no harm in redundantly calling close.</span>
                <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
                <span class=n>flush_decoder</span> <span class=o>=</span> <span class=kc>True</span>
                <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>enforce_content_length</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>length_remaining</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>(</span>
                    <span class=mi>0</span><span class=p>,</span>
                    <span class=kc>None</span><span class=p>,</span>
                <span class=p>):</span>
                    <span class=c1># This is an edge case that httplib failed to cover due</span>
                    <span class=c1># to concerns of backward compatibility. We&#39;re</span>
                    <span class=c1># addressing it here to make sure IncompleteRead is</span>
                    <span class=c1># raised during streaming, so all calls with incorrect</span>
                    <span class=c1># Content-Length are caught.</span>
                    <span class=k>raise</span> <span class=n>IncompleteRead</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp_bytes_read</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>length_remaining</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_fp_bytes_read</span> <span class=o>+=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>length_remaining</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>length_remaining</span> <span class=o>-=</span> <span class=nb>len</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_decode</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>decode_content</span><span class=p>,</span> <span class=n>flush_decoder</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>cache_content</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_body</span> <span class=o>=</span> <span class=n>data</span>

    <span class=k>return</span> <span class=n>data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPResponse.read_chunked class="doc doc-heading"> <code class="highlight language-python"><span class=n>read_chunked</span><span class=p>(</span><span class=n>amt</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Similar to :meth:<code>HTTPResponse.read</code>, but with an additional parameter: <code>decode_content</code>.</p> <p>:param amt: How much of the content to read. If specified, caching is skipped because it doesn't make sense to cache partial content as the full response.</p> <p>:param decode_content: If True, will attempt to decode the body based on the 'content-encoding' header.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/response.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>725</span>
<span class=normal>726</span>
<span class=normal>727</span>
<span class=normal>728</span>
<span class=normal>729</span>
<span class=normal>730</span>
<span class=normal>731</span>
<span class=normal>732</span>
<span class=normal>733</span>
<span class=normal>734</span>
<span class=normal>735</span>
<span class=normal>736</span>
<span class=normal>737</span>
<span class=normal>738</span>
<span class=normal>739</span>
<span class=normal>740</span>
<span class=normal>741</span>
<span class=normal>742</span>
<span class=normal>743</span>
<span class=normal>744</span>
<span class=normal>745</span>
<span class=normal>746</span>
<span class=normal>747</span>
<span class=normal>748</span>
<span class=normal>749</span>
<span class=normal>750</span>
<span class=normal>751</span>
<span class=normal>752</span>
<span class=normal>753</span>
<span class=normal>754</span>
<span class=normal>755</span>
<span class=normal>756</span>
<span class=normal>757</span>
<span class=normal>758</span>
<span class=normal>759</span>
<span class=normal>760</span>
<span class=normal>761</span>
<span class=normal>762</span>
<span class=normal>763</span>
<span class=normal>764</span>
<span class=normal>765</span>
<span class=normal>766</span>
<span class=normal>767</span>
<span class=normal>768</span>
<span class=normal>769</span>
<span class=normal>770</span>
<span class=normal>771</span>
<span class=normal>772</span>
<span class=normal>773</span>
<span class=normal>774</span>
<span class=normal>775</span>
<span class=normal>776</span>
<span class=normal>777</span>
<span class=normal>778</span>
<span class=normal>779</span>
<span class=normal>780</span>
<span class=normal>781</span>
<span class=normal>782</span>
<span class=normal>783</span>
<span class=normal>784</span>
<span class=normal>785</span>
<span class=normal>786</span>
<span class=normal>787</span>
<span class=normal>788</span>
<span class=normal>789</span>
<span class=normal>790</span>
<span class=normal>791</span>
<span class=normal>792</span>
<span class=normal>793</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>read_chunked</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amt</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Similar to :meth:`HTTPResponse.read`, but with an additional</span>
<span class=sd>    parameter: ``decode_content``.</span>

<span class=sd>    :param amt:</span>
<span class=sd>        How much of the content to read. If specified, caching is skipped</span>
<span class=sd>        because it doesn&#39;t make sense to cache partial content as the full</span>
<span class=sd>        response.</span>

<span class=sd>    :param decode_content:</span>
<span class=sd>        If True, will attempt to decode the body based on the</span>
<span class=sd>        &#39;content-encoding&#39; header.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_init_decoder</span><span class=p>()</span>
    <span class=c1># FIXME: Rewrite this method and make it a class with a better structured logic.</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunked</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>ResponseNotChunked</span><span class=p>(</span>
            <span class=s2>&quot;Response is not chunked. &quot;</span>
            <span class=s2>&quot;Header &#39;transfer-encoding: chunked&#39; is missing.&quot;</span>
        <span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>supports_chunked_reads</span><span class=p>():</span>
        <span class=k>raise</span> <span class=n>BodyNotHttplibCompatible</span><span class=p>(</span>
            <span class=s2>&quot;Body should be http.client.HTTPResponse like. &quot;</span>
            <span class=s2>&quot;It should have have an fp attribute which returns raw chunks.&quot;</span>
        <span class=p>)</span>

    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>_error_catcher</span><span class=p>():</span>
        <span class=c1># Don&#39;t bother reading the body of a HEAD request.</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span> <span class=ow>and</span> <span class=n>is_response_to_head</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=p>):</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
            <span class=k>return</span>

        <span class=c1># If a response is already read and closed</span>
        <span class=c1># then return immediately.</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>fp</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_update_chunk_length</span><span class=p>()</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunk_left</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
                <span class=k>break</span>
            <span class=n>chunk</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_handle_chunk</span><span class=p>(</span><span class=n>amt</span><span class=p>)</span>
            <span class=n>decoded</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_decode</span><span class=p>(</span>
                <span class=n>chunk</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=n>decode_content</span><span class=p>,</span> <span class=n>flush_decoder</span><span class=o>=</span><span class=kc>False</span>
            <span class=p>)</span>
            <span class=k>if</span> <span class=n>decoded</span><span class=p>:</span>
                <span class=k>yield</span> <span class=n>decoded</span>

        <span class=k>if</span> <span class=n>decode_content</span><span class=p>:</span>
            <span class=c1># On CPython and PyPy, we should never need to flush the</span>
            <span class=c1># decoder. However, on Jython we *might* need to, so</span>
            <span class=c1># lets defensively do it anyway.</span>
            <span class=n>decoded</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_flush_decoder</span><span class=p>()</span>
            <span class=k>if</span> <span class=n>decoded</span><span class=p>:</span>  <span class=c1># Platform-specific: Jython.</span>
                <span class=k>yield</span> <span class=n>decoded</span>

        <span class=c1># Chunk content ends with \r\n: discard it.</span>
        <span class=k>while</span> <span class=kc>True</span><span class=p>:</span>
            <span class=n>line</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=o>.</span><span class=n>fp</span><span class=o>.</span><span class=n>readline</span><span class=p>()</span>
            <span class=k>if</span> <span class=ow>not</span> <span class=n>line</span><span class=p>:</span>
                <span class=c1># Some sites may not end with &#39;\r\n&#39;.</span>
                <span class=k>break</span>
            <span class=k>if</span> <span class=n>line</span> <span class=o>==</span> <span class=sa>b</span><span class=s2>&quot;</span><span class=se>\r\n</span><span class=s2>&quot;</span><span class=p>:</span>
                <span class=k>break</span>

        <span class=c1># We read everything; close the &quot;file&quot;.</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=p>:</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_original_response</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPResponse.stream class="doc doc-heading"> <code class="highlight language-python"><span class=n>stream</span><span class=p>(</span><span class=n>amt</span><span class=o>=</span><span class=mi>2</span> <span class=o>**</span> <span class=mi>16</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>A generator wrapper for the read() method. A call will block until <code>amt</code> bytes have been read from the connection or until the connection is closed.</p> <p>:param amt: How much of the content to read. The generator will return up to much data per iteration, but may return less. This is particularly likely when using compressed data. However, the empty string will never be returned.</p> <p>:param decode_content: If True, will attempt to decode the body based on the 'content-encoding' header.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/response.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>stream</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>amt</span><span class=o>=</span><span class=mi>2</span> <span class=o>**</span> <span class=mi>16</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    A generator wrapper for the read() method. A call will block until</span>
<span class=sd>    ``amt`` bytes have been read from the connection or until the</span>
<span class=sd>    connection is closed.</span>

<span class=sd>    :param amt:</span>
<span class=sd>        How much of the content to read. The generator will return up to</span>
<span class=sd>        much data per iteration, but may return less. This is particularly</span>
<span class=sd>        likely when using compressed data. However, the empty string will</span>
<span class=sd>        never be returned.</span>

<span class=sd>    :param decode_content:</span>
<span class=sd>        If True, will attempt to decode the body based on the</span>
<span class=sd>        &#39;content-encoding&#39; header.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>chunked</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>supports_chunked_reads</span><span class=p>():</span>
        <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>read_chunked</span><span class=p>(</span><span class=n>amt</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=n>decode_content</span><span class=p>):</span>
            <span class=k>yield</span> <span class=n>line</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>while</span> <span class=ow>not</span> <span class=n>is_fp_closed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>):</span>
            <span class=n>data</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>read</span><span class=p>(</span><span class=n>amt</span><span class=o>=</span><span class=n>amt</span><span class=p>,</span> <span class=n>decode_content</span><span class=o>=</span><span class=n>decode_content</span><span class=p>)</span>

            <span class=k>if</span> <span class=n>data</span><span class=p>:</span>
                <span class=k>yield</span> <span class=n>data</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPResponse.supports_chunked_reads class="doc doc-heading"> <code class="highlight language-python"><span class=n>supports_chunked_reads</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Checks if the underlying file-like object looks like a :class:<code>http.client.HTTPResponse</code> object. We do this by testing for the fp attribute. If it is present we assume it returns raw chunks as processed by read_chunked().</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/response.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>680</span>
<span class=normal>681</span>
<span class=normal>682</span>
<span class=normal>683</span>
<span class=normal>684</span>
<span class=normal>685</span>
<span class=normal>686</span>
<span class=normal>687</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>supports_chunked_reads</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Checks if the underlying file-like object looks like a</span>
<span class=sd>    :class:`http.client.HTTPResponse` object. We do this by testing for</span>
<span class=sd>    the fp attribute. If it is present we assume it returns raw chunks as</span>
<span class=sd>    processed by read_chunked().</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=nb>hasattr</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_fp</span><span class=p>,</span> <span class=s2>&quot;fp&quot;</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.HTTPResponse.tell class="doc doc-heading"> <code class="highlight language-python"><span class=n>tell</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Obtain the number of bytes pulled over the wire so far. May differ from the amount of content returned by :meth:<code>urllib3.response.HTTPResponse.read</code> if bytes are encoded on the wire (e.g, compressed).</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/response.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>tell</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Obtain the number of bytes pulled over the wire so far. May differ from</span>
<span class=sd>    the amount of content returned by :meth:``urllib3.response.HTTPResponse.read``</span>
<span class=sd>    if bytes are encoded on the wire (e.g, compressed).</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_fp_bytes_read</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_fusion.vendor.urllib3.HTTPSConnectionPool class="doc doc-heading"> <code>HTTPSConnectionPool</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="HTTPConnectionPool (client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool)" href=connectionpool.html#client.ayon_fusion.vendor.urllib3.connectionpool.HTTPConnectionPool>HTTPConnectionPool</a></code></p> <p>Same as :class:<code>.HTTPConnectionPool</code>, but HTTPS.</p> <p>:class:<code>.HTTPSConnection</code> uses one of <code>assert_fingerprint</code>, <code>assert_hostname</code> and <code>host</code> in this order to verify connections. If <code>assert_hostname</code> is False, no verification is done.</p> <p>The <code>key_file</code>, <code>cert_file</code>, <code>cert_reqs</code>, <code>ca_certs</code>, <code>ca_cert_dir</code>, <code>ssl_version</code>, <code>key_password</code> are only used if :mod:<code>ssl</code> is available and are fed into :meth:<code>urllib3.util.ssl_wrap_socket</code> to upgrade the connection socket into an SSL socket.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 865</span>
<span class=normal> 866</span>
<span class=normal> 867</span>
<span class=normal> 868</span>
<span class=normal> 869</span>
<span class=normal> 870</span>
<span class=normal> 871</span>
<span class=normal> 872</span>
<span class=normal> 873</span>
<span class=normal> 874</span>
<span class=normal> 875</span>
<span class=normal> 876</span>
<span class=normal> 877</span>
<span class=normal> 878</span>
<span class=normal> 879</span>
<span class=normal> 880</span>
<span class=normal> 881</span>
<span class=normal> 882</span>
<span class=normal> 883</span>
<span class=normal> 884</span>
<span class=normal> 885</span>
<span class=normal> 886</span>
<span class=normal> 887</span>
<span class=normal> 888</span>
<span class=normal> 889</span>
<span class=normal> 890</span>
<span class=normal> 891</span>
<span class=normal> 892</span>
<span class=normal> 893</span>
<span class=normal> 894</span>
<span class=normal> 895</span>
<span class=normal> 896</span>
<span class=normal> 897</span>
<span class=normal> 898</span>
<span class=normal> 899</span>
<span class=normal> 900</span>
<span class=normal> 901</span>
<span class=normal> 902</span>
<span class=normal> 903</span>
<span class=normal> 904</span>
<span class=normal> 905</span>
<span class=normal> 906</span>
<span class=normal> 907</span>
<span class=normal> 908</span>
<span class=normal> 909</span>
<span class=normal> 910</span>
<span class=normal> 911</span>
<span class=normal> 912</span>
<span class=normal> 913</span>
<span class=normal> 914</span>
<span class=normal> 915</span>
<span class=normal> 916</span>
<span class=normal> 917</span>
<span class=normal> 918</span>
<span class=normal> 919</span>
<span class=normal> 920</span>
<span class=normal> 921</span>
<span class=normal> 922</span>
<span class=normal> 923</span>
<span class=normal> 924</span>
<span class=normal> 925</span>
<span class=normal> 926</span>
<span class=normal> 927</span>
<span class=normal> 928</span>
<span class=normal> 929</span>
<span class=normal> 930</span>
<span class=normal> 931</span>
<span class=normal> 932</span>
<span class=normal> 933</span>
<span class=normal> 934</span>
<span class=normal> 935</span>
<span class=normal> 936</span>
<span class=normal> 937</span>
<span class=normal> 938</span>
<span class=normal> 939</span>
<span class=normal> 940</span>
<span class=normal> 941</span>
<span class=normal> 942</span>
<span class=normal> 943</span>
<span class=normal> 944</span>
<span class=normal> 945</span>
<span class=normal> 946</span>
<span class=normal> 947</span>
<span class=normal> 948</span>
<span class=normal> 949</span>
<span class=normal> 950</span>
<span class=normal> 951</span>
<span class=normal> 952</span>
<span class=normal> 953</span>
<span class=normal> 954</span>
<span class=normal> 955</span>
<span class=normal> 956</span>
<span class=normal> 957</span>
<span class=normal> 958</span>
<span class=normal> 959</span>
<span class=normal> 960</span>
<span class=normal> 961</span>
<span class=normal> 962</span>
<span class=normal> 963</span>
<span class=normal> 964</span>
<span class=normal> 965</span>
<span class=normal> 966</span>
<span class=normal> 967</span>
<span class=normal> 968</span>
<span class=normal> 969</span>
<span class=normal> 970</span>
<span class=normal> 971</span>
<span class=normal> 972</span>
<span class=normal> 973</span>
<span class=normal> 974</span>
<span class=normal> 975</span>
<span class=normal> 976</span>
<span class=normal> 977</span>
<span class=normal> 978</span>
<span class=normal> 979</span>
<span class=normal> 980</span>
<span class=normal> 981</span>
<span class=normal> 982</span>
<span class=normal> 983</span>
<span class=normal> 984</span>
<span class=normal> 985</span>
<span class=normal> 986</span>
<span class=normal> 987</span>
<span class=normal> 988</span>
<span class=normal> 989</span>
<span class=normal> 990</span>
<span class=normal> 991</span>
<span class=normal> 992</span>
<span class=normal> 993</span>
<span class=normal> 994</span>
<span class=normal> 995</span>
<span class=normal> 996</span>
<span class=normal> 997</span>
<span class=normal> 998</span>
<span class=normal> 999</span>
<span class=normal>1000</span>
<span class=normal>1001</span>
<span class=normal>1002</span>
<span class=normal>1003</span>
<span class=normal>1004</span>
<span class=normal>1005</span>
<span class=normal>1006</span>
<span class=normal>1007</span>
<span class=normal>1008</span>
<span class=normal>1009</span>
<span class=normal>1010</span>
<span class=normal>1011</span>
<span class=normal>1012</span>
<span class=normal>1013</span>
<span class=normal>1014</span>
<span class=normal>1015</span>
<span class=normal>1016</span>
<span class=normal>1017</span>
<span class=normal>1018</span>
<span class=normal>1019</span>
<span class=normal>1020</span>
<span class=normal>1021</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>HTTPSConnectionPool</span><span class=p>(</span><span class=n>HTTPConnectionPool</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Same as :class:`.HTTPConnectionPool`, but HTTPS.</span>

<span class=sd>    :class:`.HTTPSConnection` uses one of ``assert_fingerprint``,</span>
<span class=sd>    ``assert_hostname`` and ``host`` in this order to verify connections.</span>
<span class=sd>    If ``assert_hostname`` is False, no verification is done.</span>

<span class=sd>    The ``key_file``, ``cert_file``, ``cert_reqs``, ``ca_certs``,</span>
<span class=sd>    ``ca_cert_dir``, ``ssl_version``, ``key_password`` are only used if :mod:`ssl`</span>
<span class=sd>    is available and are fed into :meth:`urllib3.util.ssl_wrap_socket` to upgrade</span>
<span class=sd>    the connection socket into an SSL socket.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>scheme</span> <span class=o>=</span> <span class=s2>&quot;https&quot;</span>
    <span class=n>ConnectionCls</span> <span class=o>=</span> <span class=n>HTTPSConnection</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>host</span><span class=p>,</span>
        <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>strict</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>timeout</span><span class=o>=</span><span class=n>Timeout</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span><span class=p>,</span>
        <span class=n>maxsize</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
        <span class=n>block</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>retries</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_proxy</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_proxy_headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>key_file</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>cert_file</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>cert_reqs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>key_password</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>ca_certs</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>ssl_version</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>assert_hostname</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>assert_fingerprint</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>ca_cert_dir</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=o>**</span><span class=n>conn_kw</span>
    <span class=p>):</span>

        <span class=n>HTTPConnectionPool</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span>
            <span class=bp>self</span><span class=p>,</span>
            <span class=n>host</span><span class=p>,</span>
            <span class=n>port</span><span class=p>,</span>
            <span class=n>strict</span><span class=p>,</span>
            <span class=n>timeout</span><span class=p>,</span>
            <span class=n>maxsize</span><span class=p>,</span>
            <span class=n>block</span><span class=p>,</span>
            <span class=n>headers</span><span class=p>,</span>
            <span class=n>retries</span><span class=p>,</span>
            <span class=n>_proxy</span><span class=p>,</span>
            <span class=n>_proxy_headers</span><span class=p>,</span>
            <span class=o>**</span><span class=n>conn_kw</span>
        <span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>key_file</span> <span class=o>=</span> <span class=n>key_file</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>cert_file</span> <span class=o>=</span> <span class=n>cert_file</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>cert_reqs</span> <span class=o>=</span> <span class=n>cert_reqs</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>key_password</span> <span class=o>=</span> <span class=n>key_password</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>ca_certs</span> <span class=o>=</span> <span class=n>ca_certs</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>ca_cert_dir</span> <span class=o>=</span> <span class=n>ca_cert_dir</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>ssl_version</span> <span class=o>=</span> <span class=n>ssl_version</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>assert_hostname</span> <span class=o>=</span> <span class=n>assert_hostname</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>assert_fingerprint</span> <span class=o>=</span> <span class=n>assert_fingerprint</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_prepare_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Prepare the ``connection`` for :meth:`urllib3.util.ssl_wrap_socket`</span>
<span class=sd>        and establish the tunnel if proxy is used.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=n>VerifiedHTTPSConnection</span><span class=p>):</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>set_cert</span><span class=p>(</span>
                <span class=n>key_file</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>key_file</span><span class=p>,</span>
                <span class=n>key_password</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>key_password</span><span class=p>,</span>
                <span class=n>cert_file</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>cert_file</span><span class=p>,</span>
                <span class=n>cert_reqs</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>cert_reqs</span><span class=p>,</span>
                <span class=n>ca_certs</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>ca_certs</span><span class=p>,</span>
                <span class=n>ca_cert_dir</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>ca_cert_dir</span><span class=p>,</span>
                <span class=n>assert_hostname</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>assert_hostname</span><span class=p>,</span>
                <span class=n>assert_fingerprint</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>assert_fingerprint</span><span class=p>,</span>
            <span class=p>)</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>ssl_version</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ssl_version</span>
        <span class=k>return</span> <span class=n>conn</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_prepare_proxy</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Establishes a tunnel connection through HTTP CONNECT.</span>

<span class=sd>        Tunnel connection is established early because otherwise httplib would</span>
<span class=sd>        improperly set Host: header to proxy&#39;s IP:port.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=n>conn</span><span class=o>.</span><span class=n>set_tunnel</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_proxy_host</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_headers</span><span class=p>)</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=o>.</span><span class=n>scheme</span> <span class=o>==</span> <span class=s2>&quot;https&quot;</span><span class=p>:</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>tls_in_tls_required</span> <span class=o>=</span> <span class=kc>True</span>

        <span class=n>conn</span><span class=o>.</span><span class=n>connect</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_new_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Return a fresh :class:`http.client.HTTPSConnection`.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>num_connections</span> <span class=o>+=</span> <span class=mi>1</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span>
            <span class=s2>&quot;Starting new HTTPS connection (</span><span class=si>%d</span><span class=s2>): </span><span class=si>%s</span><span class=s2>:</span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>num_connections</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>host</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>port</span> <span class=ow>or</span> <span class=s2>&quot;443&quot;</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>ConnectionCls</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>ConnectionCls</span> <span class=ow>is</span> <span class=n>DummyConnection</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>SSLError</span><span class=p>(</span>
                <span class=s2>&quot;Can&#39;t connect to HTTPS URL because the SSL module is not available.&quot;</span>
            <span class=p>)</span>

        <span class=n>actual_host</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>host</span>
        <span class=n>actual_port</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>port</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>actual_host</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=o>.</span><span class=n>host</span>
            <span class=n>actual_port</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=o>.</span><span class=n>port</span>

        <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>ConnectionCls</span><span class=p>(</span>
            <span class=n>host</span><span class=o>=</span><span class=n>actual_host</span><span class=p>,</span>
            <span class=n>port</span><span class=o>=</span><span class=n>actual_port</span><span class=p>,</span>
            <span class=n>timeout</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>timeout</span><span class=o>.</span><span class=n>connect_timeout</span><span class=p>,</span>
            <span class=n>strict</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>strict</span><span class=p>,</span>
            <span class=n>cert_file</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>cert_file</span><span class=p>,</span>
            <span class=n>key_file</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>key_file</span><span class=p>,</span>
            <span class=n>key_password</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>key_password</span><span class=p>,</span>
            <span class=o>**</span><span class=bp>self</span><span class=o>.</span><span class=n>conn_kw</span>
        <span class=p>)</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_prepare_conn</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_validate_conn</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>conn</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Called right before a request is made, after the socket is created.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=nb>super</span><span class=p>(</span><span class=n>HTTPSConnectionPool</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>_validate_conn</span><span class=p>(</span><span class=n>conn</span><span class=p>)</span>

        <span class=c1># Force connect early to allow us to validate the connection.</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>conn</span><span class=p>,</span> <span class=s2>&quot;sock&quot;</span><span class=p>,</span> <span class=kc>None</span><span class=p>):</span>  <span class=c1># AppEngine might not have  `.sock`</span>
            <span class=n>conn</span><span class=o>.</span><span class=n>connect</span><span class=p>()</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>conn</span><span class=o>.</span><span class=n>is_verified</span><span class=p>:</span>
            <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span>
                <span class=p>(</span>
                    <span class=s2>&quot;Unverified HTTPS request is being made to host &#39;</span><span class=si>%s</span><span class=s2>&#39;. &quot;</span>
                    <span class=s2>&quot;Adding certificate verification is strongly advised. See: &quot;</span>
                    <span class=s2>&quot;https://urllib3.readthedocs.io/en/1.26.x/advanced-usage.html&quot;</span>
                    <span class=s2>&quot;#ssl-warnings&quot;</span> <span class=o>%</span> <span class=n>conn</span><span class=o>.</span><span class=n>host</span>
                <span class=p>),</span>
                <span class=n>InsecureRequestWarning</span><span class=p>,</span>
            <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_fusion.vendor.urllib3.PoolManager class="doc doc-heading"> <code>PoolManager</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="RequestMethods (client.ayon_fusion.vendor.urllib3.request.RequestMethods)" href=request.html#client.ayon_fusion.vendor.urllib3.request.RequestMethods>RequestMethods</a></code></p> <p>Allows for arbitrary requests while transparently keeping track of necessary connection pools for you.</p> <p>:param num_pools: Number of connection pools to cache before discarding the least recently used pool.</p> <p>:param headers: Headers to include with all requests, unless other headers are given explicitly.</p> <p>:param **connection_pool_kw: Additional parameters are used to create fresh :class:<code>urllib3.connectionpool.ConnectionPool</code> instances.</p> <p>Example::</p> <pre><code>&gt;&gt;&gt; manager = PoolManager(num_pools=2)
&gt;&gt;&gt; r = manager.request('GET', 'http://google.com/')
&gt;&gt;&gt; r = manager.request('GET', 'http://google.com/mail')
&gt;&gt;&gt; r = manager.request('GET', 'http://yahoo.com/')
&gt;&gt;&gt; len(manager.pools)
2
</code></pre> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/poolmanager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>PoolManager</span><span class=p>(</span><span class=n>RequestMethods</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Allows for arbitrary requests while transparently keeping track of</span>
<span class=sd>    necessary connection pools for you.</span>

<span class=sd>    :param num_pools:</span>
<span class=sd>        Number of connection pools to cache before discarding the least</span>
<span class=sd>        recently used pool.</span>

<span class=sd>    :param headers:</span>
<span class=sd>        Headers to include with all requests, unless other headers are given</span>
<span class=sd>        explicitly.</span>

<span class=sd>    :param \\**connection_pool_kw:</span>
<span class=sd>        Additional parameters are used to create fresh</span>
<span class=sd>        :class:`urllib3.connectionpool.ConnectionPool` instances.</span>

<span class=sd>    Example::</span>

<span class=sd>        &gt;&gt;&gt; manager = PoolManager(num_pools=2)</span>
<span class=sd>        &gt;&gt;&gt; r = manager.request(&#39;GET&#39;, &#39;http://google.com/&#39;)</span>
<span class=sd>        &gt;&gt;&gt; r = manager.request(&#39;GET&#39;, &#39;http://google.com/mail&#39;)</span>
<span class=sd>        &gt;&gt;&gt; r = manager.request(&#39;GET&#39;, &#39;http://yahoo.com/&#39;)</span>
<span class=sd>        &gt;&gt;&gt; len(manager.pools)</span>
<span class=sd>        2</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=n>proxy</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>proxy_config</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>num_pools</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=o>**</span><span class=n>connection_pool_kw</span><span class=p>):</span>
        <span class=n>RequestMethods</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>headers</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>connection_pool_kw</span> <span class=o>=</span> <span class=n>connection_pool_kw</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>pools</span> <span class=o>=</span> <span class=n>RecentlyUsedContainer</span><span class=p>(</span><span class=n>num_pools</span><span class=p>,</span> <span class=n>dispose_func</span><span class=o>=</span><span class=k>lambda</span> <span class=n>p</span><span class=p>:</span> <span class=n>p</span><span class=o>.</span><span class=n>close</span><span class=p>())</span>

        <span class=c1># Locally set the pool classes and keys so other PoolManagers can</span>
        <span class=c1># override them.</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>pool_classes_by_scheme</span> <span class=o>=</span> <span class=n>pool_classes_by_scheme</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>key_fn_by_scheme</span> <span class=o>=</span> <span class=n>key_fn_by_scheme</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__enter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=bp>self</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__exit__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>exc_type</span><span class=p>,</span> <span class=n>exc_val</span><span class=p>,</span> <span class=n>exc_tb</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
        <span class=c1># Return False to re-raise any potential exceptions</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_new_pool</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>,</span> <span class=n>request_context</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Create a new :class:`urllib3.connectionpool.ConnectionPool` based on host, port, scheme, and</span>
<span class=sd>        any additional pool keyword arguments.</span>

<span class=sd>        If ``request_context`` is provided, it is provided as keyword arguments</span>
<span class=sd>        to the pool class used. This method is used to actually create the</span>
<span class=sd>        connection pools handed out by :meth:`connection_from_url` and</span>
<span class=sd>        companion methods. It is intended to be overridden for customization.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>pool_cls</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pool_classes_by_scheme</span><span class=p>[</span><span class=n>scheme</span><span class=p>]</span>
        <span class=k>if</span> <span class=n>request_context</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>request_context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_pool_kw</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>

        <span class=c1># Although the context has everything necessary to create the pool,</span>
        <span class=c1># this function has historically only used the scheme, host, and port</span>
        <span class=c1># in the positional args. When an API change is acceptable these can</span>
        <span class=c1># be removed.</span>
        <span class=k>for</span> <span class=n>key</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;scheme&quot;</span><span class=p>,</span> <span class=s2>&quot;host&quot;</span><span class=p>,</span> <span class=s2>&quot;port&quot;</span><span class=p>):</span>
            <span class=n>request_context</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>key</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>scheme</span> <span class=o>==</span> <span class=s2>&quot;http&quot;</span><span class=p>:</span>
            <span class=k>for</span> <span class=n>kw</span> <span class=ow>in</span> <span class=n>SSL_KEYWORDS</span><span class=p>:</span>
                <span class=n>request_context</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>kw</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>pool_cls</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>,</span> <span class=o>**</span><span class=n>request_context</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>clear</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Empty our store of pools and direct them all to close.</span>

<span class=sd>        This will not affect in-flight connections, but they will not be</span>
<span class=sd>        re-used after completion.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>pools</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>connection_from_host</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=s2>&quot;http&quot;</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Get a :class:`urllib3.connectionpool.ConnectionPool` based on the host, port, and scheme.</span>

<span class=sd>        If ``port`` isn&#39;t given, it will be derived from the ``scheme`` using</span>
<span class=sd>        ``urllib3.connectionpool.port_by_scheme``. If ``pool_kwargs`` is</span>
<span class=sd>        provided, it is merged with the instance&#39;s ``connection_pool_kw``</span>
<span class=sd>        variable and used to create the new connection pool, if one is</span>
<span class=sd>        needed.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>host</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>LocationValueError</span><span class=p>(</span><span class=s2>&quot;No host specified.&quot;</span><span class=p>)</span>

        <span class=n>request_context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_merge_pool_kwargs</span><span class=p>(</span><span class=n>pool_kwargs</span><span class=p>)</span>
        <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;scheme&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>scheme</span> <span class=ow>or</span> <span class=s2>&quot;http&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>port</span><span class=p>:</span>
            <span class=n>port</span> <span class=o>=</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;scheme&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>lower</span><span class=p>(),</span> <span class=mi>80</span><span class=p>)</span>
        <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>port</span>
        <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;host&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>host</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_from_context</span><span class=p>(</span><span class=n>request_context</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>connection_from_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request_context</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Get a :class:`urllib3.connectionpool.ConnectionPool` based on the request context.</span>

<span class=sd>        ``request_context`` must at least contain the ``scheme`` key and its</span>
<span class=sd>        value must be a key in ``key_fn_by_scheme`` instance variable.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>scheme</span> <span class=o>=</span> <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;scheme&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
        <span class=n>pool_key_constructor</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>key_fn_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>pool_key_constructor</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>URLSchemeUnknown</span><span class=p>(</span><span class=n>scheme</span><span class=p>)</span>
        <span class=n>pool_key</span> <span class=o>=</span> <span class=n>pool_key_constructor</span><span class=p>(</span><span class=n>request_context</span><span class=p>)</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_from_pool_key</span><span class=p>(</span><span class=n>pool_key</span><span class=p>,</span> <span class=n>request_context</span><span class=o>=</span><span class=n>request_context</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>connection_from_pool_key</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pool_key</span><span class=p>,</span> <span class=n>request_context</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Get a :class:`urllib3.connectionpool.ConnectionPool` based on the provided pool key.</span>

<span class=sd>        ``pool_key`` should be a namedtuple that only contains immutable</span>
<span class=sd>        objects. At a minimum it must have the ``scheme``, ``host``, and</span>
<span class=sd>        ``port`` fields.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>pools</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
            <span class=c1># If the scheme, host, or port doesn&#39;t match existing open</span>
            <span class=c1># connections, open a new ConnectionPool.</span>
            <span class=n>pool</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pools</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>pool_key</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>pool</span><span class=p>:</span>
                <span class=k>return</span> <span class=n>pool</span>

            <span class=c1># Make a fresh ConnectionPool of the desired type</span>
            <span class=n>scheme</span> <span class=o>=</span> <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;scheme&quot;</span><span class=p>]</span>
            <span class=n>host</span> <span class=o>=</span> <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;host&quot;</span><span class=p>]</span>
            <span class=n>port</span> <span class=o>=</span> <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>]</span>
            <span class=n>pool</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_new_pool</span><span class=p>(</span><span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>,</span> <span class=n>request_context</span><span class=o>=</span><span class=n>request_context</span><span class=p>)</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>pools</span><span class=p>[</span><span class=n>pool_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>pool</span>

        <span class=k>return</span> <span class=n>pool</span>

    <span class=k>def</span><span class=w> </span><span class=nf>connection_from_url</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Similar to :func:`urllib3.connectionpool.connection_from_url`.</span>

<span class=sd>        If ``pool_kwargs`` is not provided and a new pool needs to be</span>
<span class=sd>        constructed, ``self.connection_pool_kw`` is used to initialize</span>
<span class=sd>        the :class:`urllib3.connectionpool.ConnectionPool`. If ``pool_kwargs``</span>
<span class=sd>        is provided, it is used instead. Note that if a new pool does not</span>
<span class=sd>        need to be created for the request, the provided ``pool_kwargs`` are</span>
<span class=sd>        not used.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>u</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_from_host</span><span class=p>(</span>
            <span class=n>u</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=n>u</span><span class=o>.</span><span class=n>port</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=n>u</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=n>pool_kwargs</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_merge_pool_kwargs</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>override</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Merge a dictionary of override values for self.connection_pool_kw.</span>

<span class=sd>        This does not modify self.connection_pool_kw and returns a new dict.</span>
<span class=sd>        Any keys in the override dictionary with a value of ``None`` are</span>
<span class=sd>        removed from the merged dictionary.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>base_pool_kwargs</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_pool_kw</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>override</span><span class=p>:</span>
            <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>override</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
                <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=k>try</span><span class=p>:</span>
                        <span class=k>del</span> <span class=n>base_pool_kwargs</span><span class=p>[</span><span class=n>key</span><span class=p>]</span>
                    <span class=k>except</span> <span class=ne>KeyError</span><span class=p>:</span>
                        <span class=k>pass</span>
                <span class=k>else</span><span class=p>:</span>
                    <span class=n>base_pool_kwargs</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
        <span class=k>return</span> <span class=n>base_pool_kwargs</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_proxy_requires_url_absolute_form</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>parsed_url</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Indicates if the proxy requires the complete destination URL in the</span>
<span class=sd>        request.  Normally this is only needed when not using an HTTP CONNECT</span>
<span class=sd>        tunnel.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=k>return</span> <span class=ow>not</span> <span class=n>connection_requires_http_tunnel</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span><span class=p>,</span> <span class=n>parsed_url</span><span class=o>.</span><span class=n>scheme</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_validate_proxy_scheme_url_selection</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url_scheme</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Validates that were not attempting to do TLS in TLS connections on</span>
<span class=sd>        Python2 or with unsupported SSL implementations.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=n>url_scheme</span> <span class=o>!=</span> <span class=s2>&quot;https&quot;</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=o>.</span><span class=n>scheme</span> <span class=o>!=</span> <span class=s2>&quot;https&quot;</span><span class=p>:</span>
            <span class=k>return</span>

        <span class=k>if</span> <span class=n>six</span><span class=o>.</span><span class=n>PY2</span> <span class=ow>and</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span><span class=o>.</span><span class=n>use_forwarding_for_https</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>ProxySchemeUnsupported</span><span class=p>(</span>
                <span class=s2>&quot;Contacting HTTPS destinations through HTTPS proxies &quot;</span>
                <span class=s2>&quot;&#39;via CONNECT tunnels&#39; is not supported in Python 2&quot;</span>
            <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>urlopen</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Same as :meth:`urllib3.HTTPConnectionPool.urlopen`</span>
<span class=sd>        with custom cross-host redirect logic and only sends the request-uri</span>
<span class=sd>        portion of the ``url``.</span>

<span class=sd>        The given ``url`` parameter must be absolute, such that an appropriate</span>
<span class=sd>        :class:`urllib3.connectionpool.ConnectionPool` can be chosen for it.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>u</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_validate_proxy_scheme_url_selection</span><span class=p>(</span><span class=n>u</span><span class=o>.</span><span class=n>scheme</span><span class=p>)</span>

        <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_from_host</span><span class=p>(</span><span class=n>u</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=n>u</span><span class=o>.</span><span class=n>port</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=n>u</span><span class=o>.</span><span class=n>scheme</span><span class=p>)</span>

        <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;assert_same_host&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
        <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;redirect&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=k>if</span> <span class=s2>&quot;headers&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>kw</span><span class=p>:</span>
            <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;headers&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_proxy_requires_url_absolute_form</span><span class=p>(</span><span class=n>u</span><span class=p>):</span>
            <span class=n>response</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>response</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>u</span><span class=o>.</span><span class=n>request_uri</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>

        <span class=n>redirect_location</span> <span class=o>=</span> <span class=n>redirect</span> <span class=ow>and</span> <span class=n>response</span><span class=o>.</span><span class=n>get_redirect_location</span><span class=p>()</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>redirect_location</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>response</span>

        <span class=c1># Support relative URLs for redirecting.</span>
        <span class=n>redirect_location</span> <span class=o>=</span> <span class=n>urljoin</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>)</span>

        <span class=c1># RFC 7231, Section 6.4.4</span>
        <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>303</span><span class=p>:</span>
            <span class=n>method</span> <span class=o>=</span> <span class=s2>&quot;GET&quot;</span>

        <span class=n>retries</span> <span class=o>=</span> <span class=n>kw</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;retries&quot;</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>Retry</span><span class=p>):</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>Retry</span><span class=o>.</span><span class=n>from_int</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>)</span>

        <span class=c1># Strip headers marked as unsafe to forward to the redirected location.</span>
        <span class=c1># Check remove_headers_on_redirect to avoid a potential network call within</span>
        <span class=c1># conn.is_same_host() which may use socket.gethostbyname() in the future.</span>
        <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>remove_headers_on_redirect</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>conn</span><span class=o>.</span><span class=n>is_same_host</span><span class=p>(</span>
            <span class=n>redirect_location</span>
        <span class=p>):</span>
            <span class=n>headers</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>six</span><span class=o>.</span><span class=n>iterkeys</span><span class=p>(</span><span class=n>kw</span><span class=p>[</span><span class=s2>&quot;headers&quot;</span><span class=p>]))</span>
            <span class=k>for</span> <span class=n>header</span> <span class=ow>in</span> <span class=n>headers</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>header</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=ow>in</span> <span class=n>retries</span><span class=o>.</span><span class=n>remove_headers_on_redirect</span><span class=p>:</span>
                    <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;headers&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>header</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=n>response</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=n>conn</span><span class=p>)</span>
        <span class=k>except</span> <span class=n>MaxRetryError</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>raise_on_redirect</span><span class=p>:</span>
                <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
                <span class=k>raise</span>
            <span class=k>return</span> <span class=n>response</span>

        <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;retries&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>retries</span>
        <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;redirect&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>redirect</span>

        <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Redirecting </span><span class=si>%s</span><span class=s2> -&gt; </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>)</span>

        <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.PoolManager.clear class="doc doc-heading"> <code class="highlight language-python"><span class=n>clear</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Empty our store of pools and direct them all to close.</p> <p>This will not affect in-flight connections, but they will not be re-used after completion.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/poolmanager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>clear</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Empty our store of pools and direct them all to close.</span>

<span class=sd>    This will not affect in-flight connections, but they will not be</span>
<span class=sd>    re-used after completion.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>pools</span><span class=o>.</span><span class=n>clear</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.PoolManager.connection_from_context class="doc doc-heading"> <code class="highlight language-python"><span class=n>connection_from_context</span><span class=p>(</span><span class=n>request_context</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get a :class:<code>urllib3.connectionpool.ConnectionPool</code> based on the request context.</p> <p><code>request_context</code> must at least contain the <code>scheme</code> key and its value must be a key in <code>key_fn_by_scheme</code> instance variable.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/poolmanager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>connection_from_context</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>request_context</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Get a :class:`urllib3.connectionpool.ConnectionPool` based on the request context.</span>

<span class=sd>    ``request_context`` must at least contain the ``scheme`` key and its</span>
<span class=sd>    value must be a key in ``key_fn_by_scheme`` instance variable.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>scheme</span> <span class=o>=</span> <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;scheme&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span>
    <span class=n>pool_key_constructor</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>key_fn_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>pool_key_constructor</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>URLSchemeUnknown</span><span class=p>(</span><span class=n>scheme</span><span class=p>)</span>
    <span class=n>pool_key</span> <span class=o>=</span> <span class=n>pool_key_constructor</span><span class=p>(</span><span class=n>request_context</span><span class=p>)</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_from_pool_key</span><span class=p>(</span><span class=n>pool_key</span><span class=p>,</span> <span class=n>request_context</span><span class=o>=</span><span class=n>request_context</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.PoolManager.connection_from_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>connection_from_host</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=s1>&#39;http&#39;</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get a :class:<code>urllib3.connectionpool.ConnectionPool</code> based on the host, port, and scheme.</p> <p>If <code>port</code> isn't given, it will be derived from the <code>scheme</code> using <code>urllib3.connectionpool.port_by_scheme</code>. If <code>pool_kwargs</code> is provided, it is merged with the instance's <code>connection_pool_kw</code> variable and used to create the new connection pool, if one is needed.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/poolmanager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>connection_from_host</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=s2>&quot;http&quot;</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Get a :class:`urllib3.connectionpool.ConnectionPool` based on the host, port, and scheme.</span>

<span class=sd>    If ``port`` isn&#39;t given, it will be derived from the ``scheme`` using</span>
<span class=sd>    ``urllib3.connectionpool.port_by_scheme``. If ``pool_kwargs`` is</span>
<span class=sd>    provided, it is merged with the instance&#39;s ``connection_pool_kw``</span>
<span class=sd>    variable and used to create the new connection pool, if one is</span>
<span class=sd>    needed.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=ow>not</span> <span class=n>host</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>LocationValueError</span><span class=p>(</span><span class=s2>&quot;No host specified.&quot;</span><span class=p>)</span>

    <span class=n>request_context</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_merge_pool_kwargs</span><span class=p>(</span><span class=n>pool_kwargs</span><span class=p>)</span>
    <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;scheme&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>scheme</span> <span class=ow>or</span> <span class=s2>&quot;http&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>port</span><span class=p>:</span>
        <span class=n>port</span> <span class=o>=</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;scheme&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>lower</span><span class=p>(),</span> <span class=mi>80</span><span class=p>)</span>
    <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>port</span>
    <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;host&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>host</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_from_context</span><span class=p>(</span><span class=n>request_context</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.PoolManager.connection_from_pool_key class="doc doc-heading"> <code class="highlight language-python"><span class=n>connection_from_pool_key</span><span class=p>(</span><span class=n>pool_key</span><span class=p>,</span> <span class=n>request_context</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get a :class:<code>urllib3.connectionpool.ConnectionPool</code> based on the provided pool key.</p> <p><code>pool_key</code> should be a namedtuple that only contains immutable objects. At a minimum it must have the <code>scheme</code>, <code>host</code>, and <code>port</code> fields.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/poolmanager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>connection_from_pool_key</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>pool_key</span><span class=p>,</span> <span class=n>request_context</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Get a :class:`urllib3.connectionpool.ConnectionPool` based on the provided pool key.</span>

<span class=sd>    ``pool_key`` should be a namedtuple that only contains immutable</span>
<span class=sd>    objects. At a minimum it must have the ``scheme``, ``host``, and</span>
<span class=sd>    ``port`` fields.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>with</span> <span class=bp>self</span><span class=o>.</span><span class=n>pools</span><span class=o>.</span><span class=n>lock</span><span class=p>:</span>
        <span class=c1># If the scheme, host, or port doesn&#39;t match existing open</span>
        <span class=c1># connections, open a new ConnectionPool.</span>
        <span class=n>pool</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>pools</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>pool_key</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>pool</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>pool</span>

        <span class=c1># Make a fresh ConnectionPool of the desired type</span>
        <span class=n>scheme</span> <span class=o>=</span> <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;scheme&quot;</span><span class=p>]</span>
        <span class=n>host</span> <span class=o>=</span> <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;host&quot;</span><span class=p>]</span>
        <span class=n>port</span> <span class=o>=</span> <span class=n>request_context</span><span class=p>[</span><span class=s2>&quot;port&quot;</span><span class=p>]</span>
        <span class=n>pool</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_new_pool</span><span class=p>(</span><span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>,</span> <span class=n>request_context</span><span class=o>=</span><span class=n>request_context</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>pools</span><span class=p>[</span><span class=n>pool_key</span><span class=p>]</span> <span class=o>=</span> <span class=n>pool</span>

    <span class=k>return</span> <span class=n>pool</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.PoolManager.connection_from_url class="doc doc-heading"> <code class="highlight language-python"><span class=n>connection_from_url</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Similar to :func:<code>urllib3.connectionpool.connection_from_url</code>.</p> <p>If <code>pool_kwargs</code> is not provided and a new pool needs to be constructed, <code>self.connection_pool_kw</code> is used to initialize the :class:<code>urllib3.connectionpool.ConnectionPool</code>. If <code>pool_kwargs</code> is provided, it is used instead. Note that if a new pool does not need to be created for the request, the provided <code>pool_kwargs</code> are not used.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/poolmanager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>connection_from_url</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Similar to :func:`urllib3.connectionpool.connection_from_url`.</span>

<span class=sd>    If ``pool_kwargs`` is not provided and a new pool needs to be</span>
<span class=sd>    constructed, ``self.connection_pool_kw`` is used to initialize</span>
<span class=sd>    the :class:`urllib3.connectionpool.ConnectionPool`. If ``pool_kwargs``</span>
<span class=sd>    is provided, it is used instead. Note that if a new pool does not</span>
<span class=sd>    need to be created for the request, the provided ``pool_kwargs`` are</span>
<span class=sd>    not used.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>u</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_from_host</span><span class=p>(</span>
        <span class=n>u</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=n>u</span><span class=o>.</span><span class=n>port</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=n>u</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=n>pool_kwargs</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.PoolManager.urlopen class="doc doc-heading"> <code class="highlight language-python"><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Same as :meth:<code>urllib3.HTTPConnectionPool.urlopen</code> with custom cross-host redirect logic and only sends the request-uri portion of the <code>url</code>.</p> <p>The given <code>url</code> parameter must be absolute, such that an appropriate :class:<code>urllib3.connectionpool.ConnectionPool</code> can be chosen for it.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/poolmanager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>urlopen</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Same as :meth:`urllib3.HTTPConnectionPool.urlopen`</span>
<span class=sd>    with custom cross-host redirect logic and only sends the request-uri</span>
<span class=sd>    portion of the ``url``.</span>

<span class=sd>    The given ``url`` parameter must be absolute, such that an appropriate</span>
<span class=sd>    :class:`urllib3.connectionpool.ConnectionPool` can be chosen for it.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>u</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_validate_proxy_scheme_url_selection</span><span class=p>(</span><span class=n>u</span><span class=o>.</span><span class=n>scheme</span><span class=p>)</span>

    <span class=n>conn</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>connection_from_host</span><span class=p>(</span><span class=n>u</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=n>u</span><span class=o>.</span><span class=n>port</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=n>u</span><span class=o>.</span><span class=n>scheme</span><span class=p>)</span>

    <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;assert_same_host&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
    <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;redirect&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>

    <span class=k>if</span> <span class=s2>&quot;headers&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>kw</span><span class=p>:</span>
        <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;headers&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_proxy_requires_url_absolute_form</span><span class=p>(</span><span class=n>u</span><span class=p>):</span>
        <span class=n>response</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=n>response</span> <span class=o>=</span> <span class=n>conn</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>u</span><span class=o>.</span><span class=n>request_uri</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>

    <span class=n>redirect_location</span> <span class=o>=</span> <span class=n>redirect</span> <span class=ow>and</span> <span class=n>response</span><span class=o>.</span><span class=n>get_redirect_location</span><span class=p>()</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>redirect_location</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>response</span>

    <span class=c1># Support relative URLs for redirecting.</span>
    <span class=n>redirect_location</span> <span class=o>=</span> <span class=n>urljoin</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>)</span>

    <span class=c1># RFC 7231, Section 6.4.4</span>
    <span class=k>if</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span> <span class=o>==</span> <span class=mi>303</span><span class=p>:</span>
        <span class=n>method</span> <span class=o>=</span> <span class=s2>&quot;GET&quot;</span>

    <span class=n>retries</span> <span class=o>=</span> <span class=n>kw</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;retries&quot;</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>Retry</span><span class=p>):</span>
        <span class=n>retries</span> <span class=o>=</span> <span class=n>Retry</span><span class=o>.</span><span class=n>from_int</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>)</span>

    <span class=c1># Strip headers marked as unsafe to forward to the redirected location.</span>
    <span class=c1># Check remove_headers_on_redirect to avoid a potential network call within</span>
    <span class=c1># conn.is_same_host() which may use socket.gethostbyname() in the future.</span>
    <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>remove_headers_on_redirect</span> <span class=ow>and</span> <span class=ow>not</span> <span class=n>conn</span><span class=o>.</span><span class=n>is_same_host</span><span class=p>(</span>
        <span class=n>redirect_location</span>
    <span class=p>):</span>
        <span class=n>headers</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=n>six</span><span class=o>.</span><span class=n>iterkeys</span><span class=p>(</span><span class=n>kw</span><span class=p>[</span><span class=s2>&quot;headers&quot;</span><span class=p>]))</span>
        <span class=k>for</span> <span class=n>header</span> <span class=ow>in</span> <span class=n>headers</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>header</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=ow>in</span> <span class=n>retries</span><span class=o>.</span><span class=n>remove_headers_on_redirect</span><span class=p>:</span>
                <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;headers&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>pop</span><span class=p>(</span><span class=n>header</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>

    <span class=k>try</span><span class=p>:</span>
        <span class=n>retries</span> <span class=o>=</span> <span class=n>retries</span><span class=o>.</span><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=n>response</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=n>conn</span><span class=p>)</span>
    <span class=k>except</span> <span class=n>MaxRetryError</span><span class=p>:</span>
        <span class=k>if</span> <span class=n>retries</span><span class=o>.</span><span class=n>raise_on_redirect</span><span class=p>:</span>
            <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
            <span class=k>raise</span>
        <span class=k>return</span> <span class=n>response</span>

    <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;retries&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>retries</span>
    <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;redirect&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>redirect</span>

    <span class=n>log</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=s2>&quot;Redirecting </span><span class=si>%s</span><span class=s2> -&gt; </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>)</span>

    <span class=n>response</span><span class=o>.</span><span class=n>drain_conn</span><span class=p>()</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_fusion.vendor.urllib3.ProxyManager class="doc doc-heading"> <code>ProxyManager</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title="PoolManager (client.ayon_fusion.vendor.urllib3.poolmanager.PoolManager)" href=poolmanager.html#client.ayon_fusion.vendor.urllib3.poolmanager.PoolManager>PoolManager</a></code></p> <p>Behaves just like :class:<code>PoolManager</code>, but sends all requests through the defined proxy, using the CONNECT method for HTTPS URLs.</p> <p>:param proxy_url: The URL of the proxy to be used.</p> <p>:param proxy_headers: A dictionary containing headers that will be sent to the proxy. In case of HTTP they are being sent with each request, while in the HTTPS/CONNECT case they are sent only once. Could be used for proxy authentication.</p> <p>:param proxy_ssl_context: The proxy SSL context is used to establish the TLS connection to the proxy when using HTTPS proxies.</p> <p>:param use_forwarding_for_https: (Defaults to False) If set to True will forward requests to the HTTPS proxy to be made on behalf of the client instead of creating a TLS tunnel via the CONNECT method. <strong>Enabling this flag means that request and response headers and content will be visible from the HTTPS proxy</strong> whereas tunneling keeps request and response headers and content private. IP address, target hostname, SNI, and port are always visible to an HTTPS proxy even when this flag is disabled.</p> <details class=example open> <summary>Example</summary> <blockquote> <blockquote> <blockquote> <p>proxy = urllib3.ProxyManager('http://localhost:3128/') r1 = proxy.request('GET', 'http://google.com/') r2 = proxy.request('GET', 'http://httpbin.org/') len(proxy.pools) 1 r3 = proxy.request('GET', 'https://httpbin.org/') r4 = proxy.request('GET', 'https://twitter.com/') len(proxy.pools) 3</p> </blockquote> </blockquote> </blockquote> </details> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/poolmanager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>ProxyManager</span><span class=p>(</span><span class=n>PoolManager</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Behaves just like :class:`PoolManager`, but sends all requests through</span>
<span class=sd>    the defined proxy, using the CONNECT method for HTTPS URLs.</span>

<span class=sd>    :param proxy_url:</span>
<span class=sd>        The URL of the proxy to be used.</span>

<span class=sd>    :param proxy_headers:</span>
<span class=sd>        A dictionary containing headers that will be sent to the proxy. In case</span>
<span class=sd>        of HTTP they are being sent with each request, while in the</span>
<span class=sd>        HTTPS/CONNECT case they are sent only once. Could be used for proxy</span>
<span class=sd>        authentication.</span>

<span class=sd>    :param proxy_ssl_context:</span>
<span class=sd>        The proxy SSL context is used to establish the TLS connection to the</span>
<span class=sd>        proxy when using HTTPS proxies.</span>

<span class=sd>    :param use_forwarding_for_https:</span>
<span class=sd>        (Defaults to False) If set to True will forward requests to the HTTPS</span>
<span class=sd>        proxy to be made on behalf of the client instead of creating a TLS</span>
<span class=sd>        tunnel via the CONNECT method. **Enabling this flag means that request</span>
<span class=sd>        and response headers and content will be visible from the HTTPS proxy**</span>
<span class=sd>        whereas tunneling keeps request and response headers and content</span>
<span class=sd>        private.  IP address, target hostname, SNI, and port are always visible</span>
<span class=sd>        to an HTTPS proxy even when this flag is disabled.</span>

<span class=sd>    Example:</span>
<span class=sd>        &gt;&gt;&gt; proxy = urllib3.ProxyManager(&#39;http://localhost:3128/&#39;)</span>
<span class=sd>        &gt;&gt;&gt; r1 = proxy.request(&#39;GET&#39;, &#39;http://google.com/&#39;)</span>
<span class=sd>        &gt;&gt;&gt; r2 = proxy.request(&#39;GET&#39;, &#39;http://httpbin.org/&#39;)</span>
<span class=sd>        &gt;&gt;&gt; len(proxy.pools)</span>
<span class=sd>        1</span>
<span class=sd>        &gt;&gt;&gt; r3 = proxy.request(&#39;GET&#39;, &#39;https://httpbin.org/&#39;)</span>
<span class=sd>        &gt;&gt;&gt; r4 = proxy.request(&#39;GET&#39;, &#39;https://twitter.com/&#39;)</span>
<span class=sd>        &gt;&gt;&gt; len(proxy.pools)</span>
<span class=sd>        3</span>

<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>proxy_url</span><span class=p>,</span>
        <span class=n>num_pools</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
        <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>proxy_headers</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>proxy_ssl_context</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>use_forwarding_for_https</span><span class=o>=</span><span class=kc>False</span><span class=p>,</span>
        <span class=o>**</span><span class=n>connection_pool_kw</span>
    <span class=p>):</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>proxy_url</span><span class=p>,</span> <span class=n>HTTPConnectionPool</span><span class=p>):</span>
            <span class=n>proxy_url</span> <span class=o>=</span> <span class=s2>&quot;</span><span class=si>%s</span><span class=s2>://</span><span class=si>%s</span><span class=s2>:</span><span class=si>%i</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=p>(</span>
                <span class=n>proxy_url</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span>
                <span class=n>proxy_url</span><span class=o>.</span><span class=n>host</span><span class=p>,</span>
                <span class=n>proxy_url</span><span class=o>.</span><span class=n>port</span><span class=p>,</span>
            <span class=p>)</span>
        <span class=n>proxy</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>proxy_url</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>proxy</span><span class=o>.</span><span class=n>scheme</span> <span class=ow>not</span> <span class=ow>in</span> <span class=p>(</span><span class=s2>&quot;http&quot;</span><span class=p>,</span> <span class=s2>&quot;https&quot;</span><span class=p>):</span>
            <span class=k>raise</span> <span class=n>ProxySchemeUnknown</span><span class=p>(</span><span class=n>proxy</span><span class=o>.</span><span class=n>scheme</span><span class=p>)</span>

        <span class=k>if</span> <span class=ow>not</span> <span class=n>proxy</span><span class=o>.</span><span class=n>port</span><span class=p>:</span>
            <span class=n>port</span> <span class=o>=</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>proxy</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span> <span class=mi>80</span><span class=p>)</span>
            <span class=n>proxy</span> <span class=o>=</span> <span class=n>proxy</span><span class=o>.</span><span class=n>_replace</span><span class=p>(</span><span class=n>port</span><span class=o>=</span><span class=n>port</span><span class=p>)</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span> <span class=o>=</span> <span class=n>proxy</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>proxy_headers</span> <span class=o>=</span> <span class=n>proxy_headers</span> <span class=ow>or</span> <span class=p>{}</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>proxy_ssl_context</span> <span class=o>=</span> <span class=n>proxy_ssl_context</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span> <span class=o>=</span> <span class=n>ProxyConfig</span><span class=p>(</span><span class=n>proxy_ssl_context</span><span class=p>,</span> <span class=n>use_forwarding_for_https</span><span class=p>)</span>

        <span class=n>connection_pool_kw</span><span class=p>[</span><span class=s2>&quot;_proxy&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span>
        <span class=n>connection_pool_kw</span><span class=p>[</span><span class=s2>&quot;_proxy_headers&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_headers</span>
        <span class=n>connection_pool_kw</span><span class=p>[</span><span class=s2>&quot;_proxy_config&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span>

        <span class=nb>super</span><span class=p>(</span><span class=n>ProxyManager</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>num_pools</span><span class=p>,</span> <span class=n>headers</span><span class=p>,</span> <span class=o>**</span><span class=n>connection_pool_kw</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>connection_from_host</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>scheme</span><span class=o>=</span><span class=s2>&quot;http&quot;</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>scheme</span> <span class=o>==</span> <span class=s2>&quot;https&quot;</span><span class=p>:</span>
            <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>ProxyManager</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>connection_from_host</span><span class=p>(</span>
                <span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=p>,</span> <span class=n>scheme</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=n>pool_kwargs</span>
            <span class=p>)</span>

        <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>ProxyManager</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>connection_from_host</span><span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=o>.</span><span class=n>host</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=o>.</span><span class=n>port</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=o>.</span><span class=n>scheme</span><span class=p>,</span> <span class=n>pool_kwargs</span><span class=o>=</span><span class=n>pool_kwargs</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_set_proxy_headers</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>headers</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>        Sets headers needed by proxies: specifically, the Accept and Host</span>
<span class=sd>        headers. Only sets headers not provided by the user.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=n>headers_</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;Accept&quot;</span><span class=p>:</span> <span class=s2>&quot;*/*&quot;</span><span class=p>}</span>

        <span class=n>netloc</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span><span class=o>.</span><span class=n>netloc</span>
        <span class=k>if</span> <span class=n>netloc</span><span class=p>:</span>
            <span class=n>headers_</span><span class=p>[</span><span class=s2>&quot;Host&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>netloc</span>

        <span class=k>if</span> <span class=n>headers</span><span class=p>:</span>
            <span class=n>headers_</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>headers</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>headers_</span>

    <span class=k>def</span><span class=w> </span><span class=nf>urlopen</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>):</span>
        <span class=s2>&quot;Same as HTTP(S)ConnectionPool.urlopen, ``url`` must be absolute.&quot;</span>
        <span class=n>u</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>connection_requires_http_tunnel</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span><span class=p>,</span> <span class=n>u</span><span class=o>.</span><span class=n>scheme</span><span class=p>):</span>
            <span class=c1># For connections using HTTP CONNECT, httplib sets the necessary</span>
            <span class=c1># headers on the CONNECT to the proxy. If we&#39;re not using CONNECT,</span>
            <span class=c1># we&#39;ll definitely need to set &#39;Host&#39; at the very least.</span>
            <span class=n>headers</span> <span class=o>=</span> <span class=n>kw</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;headers&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=p>)</span>
            <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;headers&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_set_proxy_headers</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>headers</span><span class=p>)</span>

        <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>ProxyManager</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.ProxyManager.urlopen class="doc doc-heading"> <code class="highlight language-python"><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Same as HTTP(S)ConnectionPool.urlopen, <code>url</code> must be absolute.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/poolmanager.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>urlopen</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>):</span>
    <span class=s2>&quot;Same as HTTP(S)ConnectionPool.urlopen, ``url`` must be absolute.&quot;</span>
    <span class=n>u</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>connection_requires_http_tunnel</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>proxy</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>proxy_config</span><span class=p>,</span> <span class=n>u</span><span class=o>.</span><span class=n>scheme</span><span class=p>):</span>
        <span class=c1># For connections using HTTP CONNECT, httplib sets the necessary</span>
        <span class=c1># headers on the CONNECT to the proxy. If we&#39;re not using CONNECT,</span>
        <span class=c1># we&#39;ll definitely need to set &#39;Host&#39; at the very least.</span>
        <span class=n>headers</span> <span class=o>=</span> <span class=n>kw</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;headers&quot;</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>headers</span><span class=p>)</span>
        <span class=n>kw</span><span class=p>[</span><span class=s2>&quot;headers&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_set_proxy_headers</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=n>headers</span><span class=p>)</span>

    <span class=k>return</span> <span class=nb>super</span><span class=p>(</span><span class=n>ProxyManager</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=n>urlopen</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_fusion.vendor.urllib3.Retry class="doc doc-heading"> <code>Retry</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>Retry configuration.</p> <p>Each retry attempt will create a new Retry object with updated values, so they can be safely reused.</p> <p>Retries can be defined as a default for a pool::</p> <pre><code>retries = Retry(connect=5, read=2, redirect=5)
http = PoolManager(retries=retries)
response = http.request('GET', 'http://example.com/')
</code></pre> <p>Or per-request (which overrides the default for the pool)::</p> <pre><code>response = http.request('GET', 'http://example.com/', retries=Retry(10))
</code></pre> <p>Retries can be disabled by passing <code>False</code>::</p> <pre><code>response = http.request('GET', 'http://example.com/', retries=False)
</code></pre> <p>Errors will be wrapped in :class:<code>~urllib3.exceptions.MaxRetryError</code> unless retries are disabled, in which case the causing exception will be raised.</p> <p>:param int total: Total number of retries to allow. Takes precedence over other counts.</p> <pre><code>Set to ``None`` to remove this constraint and fall back on other
counts.

Set to ``0`` to fail on the first retry.

Set to ``False`` to disable and imply ``raise_on_redirect=False``.
</code></pre> <p>:param int connect: How many connection-related errors to retry on.</p> <pre><code>These are errors raised before the request is sent to the remote server,
which we assume has not triggered the server to process the request.

Set to ``0`` to fail on the first retry of this type.
</code></pre> <p>:param int read: How many times to retry on read errors.</p> <pre><code>These errors are raised after the request was sent to the server, so the
request may have side-effects.

Set to ``0`` to fail on the first retry of this type.
</code></pre> <p>:param int redirect: How many redirects to perform. Limit this to avoid infinite redirect loops.</p> <pre><code>A redirect is a HTTP response with a status code 301, 302, 303, 307 or
308.

Set to ``0`` to fail on the first retry of this type.

Set to ``False`` to disable and imply ``raise_on_redirect=False``.
</code></pre> <p>:param int status: How many times to retry on bad status codes.</p> <pre><code>These are retries made on responses, where status code matches
``status_forcelist``.

Set to ``0`` to fail on the first retry of this type.
</code></pre> <p>:param int other: How many times to retry on other errors.</p> <pre><code>Other errors are errors that are not connect, read, redirect or status errors.
These errors might be raised after the request was sent to the server, so the
request might have side-effects.

Set to ``0`` to fail on the first retry of this type.

If ``total`` is not set, it's a good idea to set this to 0 to account
for unexpected edge cases and avoid infinite retry loops.
</code></pre> <p>:param iterable allowed_methods: Set of uppercased HTTP method verbs that we should retry on.</p> <pre><code>By default, we only retry on methods which are considered to be
idempotent (multiple requests with the same parameters end with the
same state). See :attr:`Retry.DEFAULT_ALLOWED_METHODS`.

Set to a ``False`` value to retry on any verb.

.. warning::

    Previously this parameter was named ``method_whitelist``, that
    usage is deprecated in v1.26.0 and will be removed in v2.0.
</code></pre> <p>:param iterable status_forcelist: A set of integer HTTP status codes that we should force a retry on. A retry is initiated if the request method is in <code>allowed_methods</code> and the response status code is in <code>status_forcelist</code>.</p> <pre><code>By default, this is disabled with ``None``.
</code></pre> <p>:param float backoff_factor: A backoff factor to apply between attempts after the second try (most errors are resolved immediately by a second try without a delay). urllib3 will sleep for::</p> <pre><code>    {backoff factor} * (2 ** ({number of total retries} - 1))

seconds. If the backoff_factor is 0.1, then :func:`.sleep` will sleep
for [0.0s, 0.2s, 0.4s, ...] between retries. It will never be longer
than :attr:`Retry.BACKOFF_MAX`.

By default, backoff is disabled (set to 0).
</code></pre> <p>:param bool raise_on_redirect: Whether, if the number of redirects is exhausted, to raise a MaxRetryError, or to return a response with a response code in the 3xx range.</p> <p>:param bool raise_on_status: Similar meaning to <code>raise_on_redirect</code>: whether we should raise an exception, or return a response, if status falls in <code>status_forcelist</code> range and retries have been exhausted.</p> <p>:param tuple history: The history of the request encountered during each call to :meth:<code>~Retry.increment</code>. The list is in the order the requests occurred. Each list item is of class :class:<code>RequestHistory</code>.</p> <p>:param bool respect_retry_after_header: Whether to respect Retry-After header on status codes defined as :attr:<code>Retry.RETRY_AFTER_STATUS_CODES</code> or not.</p> <p>:param iterable remove_headers_on_redirect: Sequence of headers to remove from the request when a response indicating a redirect is returned before firing off the redirected request.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/retry.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span>
<span class=normal>269</span>
<span class=normal>270</span>
<span class=normal>271</span>
<span class=normal>272</span>
<span class=normal>273</span>
<span class=normal>274</span>
<span class=normal>275</span>
<span class=normal>276</span>
<span class=normal>277</span>
<span class=normal>278</span>
<span class=normal>279</span>
<span class=normal>280</span>
<span class=normal>281</span>
<span class=normal>282</span>
<span class=normal>283</span>
<span class=normal>284</span>
<span class=normal>285</span>
<span class=normal>286</span>
<span class=normal>287</span>
<span class=normal>288</span>
<span class=normal>289</span>
<span class=normal>290</span>
<span class=normal>291</span>
<span class=normal>292</span>
<span class=normal>293</span>
<span class=normal>294</span>
<span class=normal>295</span>
<span class=normal>296</span>
<span class=normal>297</span>
<span class=normal>298</span>
<span class=normal>299</span>
<span class=normal>300</span>
<span class=normal>301</span>
<span class=normal>302</span>
<span class=normal>303</span>
<span class=normal>304</span>
<span class=normal>305</span>
<span class=normal>306</span>
<span class=normal>307</span>
<span class=normal>308</span>
<span class=normal>309</span>
<span class=normal>310</span>
<span class=normal>311</span>
<span class=normal>312</span>
<span class=normal>313</span>
<span class=normal>314</span>
<span class=normal>315</span>
<span class=normal>316</span>
<span class=normal>317</span>
<span class=normal>318</span>
<span class=normal>319</span>
<span class=normal>320</span>
<span class=normal>321</span>
<span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span>
<span class=normal>335</span>
<span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span>
<span class=normal>352</span>
<span class=normal>353</span>
<span class=normal>354</span>
<span class=normal>355</span>
<span class=normal>356</span>
<span class=normal>357</span>
<span class=normal>358</span>
<span class=normal>359</span>
<span class=normal>360</span>
<span class=normal>361</span>
<span class=normal>362</span>
<span class=normal>363</span>
<span class=normal>364</span>
<span class=normal>365</span>
<span class=normal>366</span>
<span class=normal>367</span>
<span class=normal>368</span>
<span class=normal>369</span>
<span class=normal>370</span>
<span class=normal>371</span>
<span class=normal>372</span>
<span class=normal>373</span>
<span class=normal>374</span>
<span class=normal>375</span>
<span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span>
<span class=normal>385</span>
<span class=normal>386</span>
<span class=normal>387</span>
<span class=normal>388</span>
<span class=normal>389</span>
<span class=normal>390</span>
<span class=normal>391</span>
<span class=normal>392</span>
<span class=normal>393</span>
<span class=normal>394</span>
<span class=normal>395</span>
<span class=normal>396</span>
<span class=normal>397</span>
<span class=normal>398</span>
<span class=normal>399</span>
<span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span>
<span class=normal>415</span>
<span class=normal>416</span>
<span class=normal>417</span>
<span class=normal>418</span>
<span class=normal>419</span>
<span class=normal>420</span>
<span class=normal>421</span>
<span class=normal>422</span>
<span class=normal>423</span>
<span class=normal>424</span>
<span class=normal>425</span>
<span class=normal>426</span>
<span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span>
<span class=normal>433</span>
<span class=normal>434</span>
<span class=normal>435</span>
<span class=normal>436</span>
<span class=normal>437</span>
<span class=normal>438</span>
<span class=normal>439</span>
<span class=normal>440</span>
<span class=normal>441</span>
<span class=normal>442</span>
<span class=normal>443</span>
<span class=normal>444</span>
<span class=normal>445</span>
<span class=normal>446</span>
<span class=normal>447</span>
<span class=normal>448</span>
<span class=normal>449</span>
<span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span>
<span class=normal>469</span>
<span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span>
<span class=normal>485</span>
<span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span>
<span class=normal>579</span>
<span class=normal>580</span>
<span class=normal>581</span>
<span class=normal>582</span>
<span class=normal>583</span>
<span class=normal>584</span>
<span class=normal>585</span>
<span class=normal>586</span>
<span class=normal>587</span>
<span class=normal>588</span>
<span class=normal>589</span>
<span class=normal>590</span>
<span class=normal>591</span>
<span class=normal>592</span>
<span class=normal>593</span>
<span class=normal>594</span>
<span class=normal>595</span>
<span class=normal>596</span>
<span class=normal>597</span>
<span class=normal>598</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@six</span><span class=o>.</span><span class=n>add_metaclass</span><span class=p>(</span><span class=n>_RetryMeta</span><span class=p>)</span>
<span class=k>class</span><span class=w> </span><span class=nc>Retry</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Retry configuration.</span>

<span class=sd>    Each retry attempt will create a new Retry object with updated values, so</span>
<span class=sd>    they can be safely reused.</span>

<span class=sd>    Retries can be defined as a default for a pool::</span>

<span class=sd>        retries = Retry(connect=5, read=2, redirect=5)</span>
<span class=sd>        http = PoolManager(retries=retries)</span>
<span class=sd>        response = http.request(&#39;GET&#39;, &#39;http://example.com/&#39;)</span>

<span class=sd>    Or per-request (which overrides the default for the pool)::</span>

<span class=sd>        response = http.request(&#39;GET&#39;, &#39;http://example.com/&#39;, retries=Retry(10))</span>

<span class=sd>    Retries can be disabled by passing ``False``::</span>

<span class=sd>        response = http.request(&#39;GET&#39;, &#39;http://example.com/&#39;, retries=False)</span>

<span class=sd>    Errors will be wrapped in :class:`~urllib3.exceptions.MaxRetryError` unless</span>
<span class=sd>    retries are disabled, in which case the causing exception will be raised.</span>

<span class=sd>    :param int total:</span>
<span class=sd>        Total number of retries to allow. Takes precedence over other counts.</span>

<span class=sd>        Set to ``None`` to remove this constraint and fall back on other</span>
<span class=sd>        counts.</span>

<span class=sd>        Set to ``0`` to fail on the first retry.</span>

<span class=sd>        Set to ``False`` to disable and imply ``raise_on_redirect=False``.</span>

<span class=sd>    :param int connect:</span>
<span class=sd>        How many connection-related errors to retry on.</span>

<span class=sd>        These are errors raised before the request is sent to the remote server,</span>
<span class=sd>        which we assume has not triggered the server to process the request.</span>

<span class=sd>        Set to ``0`` to fail on the first retry of this type.</span>

<span class=sd>    :param int read:</span>
<span class=sd>        How many times to retry on read errors.</span>

<span class=sd>        These errors are raised after the request was sent to the server, so the</span>
<span class=sd>        request may have side-effects.</span>

<span class=sd>        Set to ``0`` to fail on the first retry of this type.</span>

<span class=sd>    :param int redirect:</span>
<span class=sd>        How many redirects to perform. Limit this to avoid infinite redirect</span>
<span class=sd>        loops.</span>

<span class=sd>        A redirect is a HTTP response with a status code 301, 302, 303, 307 or</span>
<span class=sd>        308.</span>

<span class=sd>        Set to ``0`` to fail on the first retry of this type.</span>

<span class=sd>        Set to ``False`` to disable and imply ``raise_on_redirect=False``.</span>

<span class=sd>    :param int status:</span>
<span class=sd>        How many times to retry on bad status codes.</span>

<span class=sd>        These are retries made on responses, where status code matches</span>
<span class=sd>        ``status_forcelist``.</span>

<span class=sd>        Set to ``0`` to fail on the first retry of this type.</span>

<span class=sd>    :param int other:</span>
<span class=sd>        How many times to retry on other errors.</span>

<span class=sd>        Other errors are errors that are not connect, read, redirect or status errors.</span>
<span class=sd>        These errors might be raised after the request was sent to the server, so the</span>
<span class=sd>        request might have side-effects.</span>

<span class=sd>        Set to ``0`` to fail on the first retry of this type.</span>

<span class=sd>        If ``total`` is not set, it&#39;s a good idea to set this to 0 to account</span>
<span class=sd>        for unexpected edge cases and avoid infinite retry loops.</span>

<span class=sd>    :param iterable allowed_methods:</span>
<span class=sd>        Set of uppercased HTTP method verbs that we should retry on.</span>

<span class=sd>        By default, we only retry on methods which are considered to be</span>
<span class=sd>        idempotent (multiple requests with the same parameters end with the</span>
<span class=sd>        same state). See :attr:`Retry.DEFAULT_ALLOWED_METHODS`.</span>

<span class=sd>        Set to a ``False`` value to retry on any verb.</span>

<span class=sd>        .. warning::</span>

<span class=sd>            Previously this parameter was named ``method_whitelist``, that</span>
<span class=sd>            usage is deprecated in v1.26.0 and will be removed in v2.0.</span>

<span class=sd>    :param iterable status_forcelist:</span>
<span class=sd>        A set of integer HTTP status codes that we should force a retry on.</span>
<span class=sd>        A retry is initiated if the request method is in ``allowed_methods``</span>
<span class=sd>        and the response status code is in ``status_forcelist``.</span>

<span class=sd>        By default, this is disabled with ``None``.</span>

<span class=sd>    :param float backoff_factor:</span>
<span class=sd>        A backoff factor to apply between attempts after the second try</span>
<span class=sd>        (most errors are resolved immediately by a second try without a</span>
<span class=sd>        delay). urllib3 will sleep for::</span>

<span class=sd>            {backoff factor} * (2 ** ({number of total retries} - 1))</span>

<span class=sd>        seconds. If the backoff_factor is 0.1, then :func:`.sleep` will sleep</span>
<span class=sd>        for [0.0s, 0.2s, 0.4s, ...] between retries. It will never be longer</span>
<span class=sd>        than :attr:`Retry.BACKOFF_MAX`.</span>

<span class=sd>        By default, backoff is disabled (set to 0).</span>

<span class=sd>    :param bool raise_on_redirect: Whether, if the number of redirects is</span>
<span class=sd>        exhausted, to raise a MaxRetryError, or to return a response with a</span>
<span class=sd>        response code in the 3xx range.</span>

<span class=sd>    :param bool raise_on_status: Similar meaning to ``raise_on_redirect``:</span>
<span class=sd>        whether we should raise an exception, or return a response,</span>
<span class=sd>        if status falls in ``status_forcelist`` range and retries have</span>
<span class=sd>        been exhausted.</span>

<span class=sd>    :param tuple history: The history of the request encountered during</span>
<span class=sd>        each call to :meth:`~Retry.increment`. The list is in the order</span>
<span class=sd>        the requests occurred. Each list item is of class :class:`RequestHistory`.</span>

<span class=sd>    :param bool respect_retry_after_header:</span>
<span class=sd>        Whether to respect Retry-After header on status codes defined as</span>
<span class=sd>        :attr:`Retry.RETRY_AFTER_STATUS_CODES` or not.</span>

<span class=sd>    :param iterable remove_headers_on_redirect:</span>
<span class=sd>        Sequence of headers to remove from the request when a response</span>
<span class=sd>        indicating a redirect is returned before firing off the redirected</span>
<span class=sd>        request.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1>#: Default methods to be used for ``allowed_methods``</span>
    <span class=n>DEFAULT_ALLOWED_METHODS</span> <span class=o>=</span> <span class=nb>frozenset</span><span class=p>(</span>
        <span class=p>[</span><span class=s2>&quot;HEAD&quot;</span><span class=p>,</span> <span class=s2>&quot;GET&quot;</span><span class=p>,</span> <span class=s2>&quot;PUT&quot;</span><span class=p>,</span> <span class=s2>&quot;DELETE&quot;</span><span class=p>,</span> <span class=s2>&quot;OPTIONS&quot;</span><span class=p>,</span> <span class=s2>&quot;TRACE&quot;</span><span class=p>]</span>
    <span class=p>)</span>

    <span class=c1>#: Default status codes to be used for ``status_forcelist``</span>
    <span class=n>RETRY_AFTER_STATUS_CODES</span> <span class=o>=</span> <span class=nb>frozenset</span><span class=p>([</span><span class=mi>413</span><span class=p>,</span> <span class=mi>429</span><span class=p>,</span> <span class=mi>503</span><span class=p>])</span>

    <span class=c1>#: Default headers to be used for ``remove_headers_on_redirect``</span>
    <span class=n>DEFAULT_REMOVE_HEADERS_ON_REDIRECT</span> <span class=o>=</span> <span class=nb>frozenset</span><span class=p>([</span><span class=s2>&quot;Authorization&quot;</span><span class=p>])</span>

    <span class=c1>#: Maximum backoff time.</span>
    <span class=n>BACKOFF_MAX</span> <span class=o>=</span> <span class=mi>120</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>total</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
        <span class=n>connect</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>read</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>redirect</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>status</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>other</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>allowed_methods</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span>
        <span class=n>status_forcelist</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>backoff_factor</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span>
        <span class=n>raise_on_redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
        <span class=n>raise_on_status</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
        <span class=n>history</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>respect_retry_after_header</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span>
        <span class=n>remove_headers_on_redirect</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span>
        <span class=c1># TODO: Deprecated, remove in v2.0</span>
        <span class=n>method_whitelist</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span>
    <span class=p>):</span>

        <span class=k>if</span> <span class=n>method_whitelist</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>_Default</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>allowed_methods</span> <span class=ow>is</span> <span class=ow>not</span> <span class=n>_Default</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                    <span class=s2>&quot;Using both &#39;allowed_methods&#39; and &quot;</span>
                    <span class=s2>&quot;&#39;method_whitelist&#39; together is not allowed. &quot;</span>
                    <span class=s2>&quot;Instead only use &#39;allowed_methods&#39;&quot;</span>
                <span class=p>)</span>
            <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span>
                <span class=s2>&quot;Using &#39;method_whitelist&#39; with Retry is deprecated and &quot;</span>
                <span class=s2>&quot;will be removed in v2.0. Use &#39;allowed_methods&#39; instead&quot;</span><span class=p>,</span>
                <span class=ne>DeprecationWarning</span><span class=p>,</span>
                <span class=n>stacklevel</span><span class=o>=</span><span class=mi>2</span><span class=p>,</span>
            <span class=p>)</span>
            <span class=n>allowed_methods</span> <span class=o>=</span> <span class=n>method_whitelist</span>
        <span class=k>if</span> <span class=n>allowed_methods</span> <span class=ow>is</span> <span class=n>_Default</span><span class=p>:</span>
            <span class=n>allowed_methods</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>DEFAULT_ALLOWED_METHODS</span>
        <span class=k>if</span> <span class=n>remove_headers_on_redirect</span> <span class=ow>is</span> <span class=n>_Default</span><span class=p>:</span>
            <span class=n>remove_headers_on_redirect</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>DEFAULT_REMOVE_HEADERS_ON_REDIRECT</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=o>=</span> <span class=n>total</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>connect</span> <span class=o>=</span> <span class=n>connect</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>read</span> <span class=o>=</span> <span class=n>read</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>status</span> <span class=o>=</span> <span class=n>status</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>other</span> <span class=o>=</span> <span class=n>other</span>

        <span class=k>if</span> <span class=n>redirect</span> <span class=ow>is</span> <span class=kc>False</span> <span class=ow>or</span> <span class=n>total</span> <span class=ow>is</span> <span class=kc>False</span><span class=p>:</span>
            <span class=n>redirect</span> <span class=o>=</span> <span class=mi>0</span>
            <span class=n>raise_on_redirect</span> <span class=o>=</span> <span class=kc>False</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>redirect</span> <span class=o>=</span> <span class=n>redirect</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>status_forcelist</span> <span class=o>=</span> <span class=n>status_forcelist</span> <span class=ow>or</span> <span class=nb>set</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>allowed_methods</span> <span class=o>=</span> <span class=n>allowed_methods</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>backoff_factor</span> <span class=o>=</span> <span class=n>backoff_factor</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>raise_on_redirect</span> <span class=o>=</span> <span class=n>raise_on_redirect</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>raise_on_status</span> <span class=o>=</span> <span class=n>raise_on_status</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>history</span> <span class=o>=</span> <span class=n>history</span> <span class=ow>or</span> <span class=nb>tuple</span><span class=p>()</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>respect_retry_after_header</span> <span class=o>=</span> <span class=n>respect_retry_after_header</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>remove_headers_on_redirect</span> <span class=o>=</span> <span class=nb>frozenset</span><span class=p>(</span>
            <span class=p>[</span><span class=n>h</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=k>for</span> <span class=n>h</span> <span class=ow>in</span> <span class=n>remove_headers_on_redirect</span><span class=p>]</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>new</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>):</span>
        <span class=n>params</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>(</span>
            <span class=n>total</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>total</span><span class=p>,</span>
            <span class=n>connect</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>connect</span><span class=p>,</span>
            <span class=n>read</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>read</span><span class=p>,</span>
            <span class=n>redirect</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>redirect</span><span class=p>,</span>
            <span class=n>status</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>status</span><span class=p>,</span>
            <span class=n>other</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>other</span><span class=p>,</span>
            <span class=n>status_forcelist</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>status_forcelist</span><span class=p>,</span>
            <span class=n>backoff_factor</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>backoff_factor</span><span class=p>,</span>
            <span class=n>raise_on_redirect</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>raise_on_redirect</span><span class=p>,</span>
            <span class=n>raise_on_status</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>raise_on_status</span><span class=p>,</span>
            <span class=n>history</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>history</span><span class=p>,</span>
            <span class=n>remove_headers_on_redirect</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>remove_headers_on_redirect</span><span class=p>,</span>
            <span class=n>respect_retry_after_header</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>respect_retry_after_header</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=c1># TODO: If already given in **kw we use what&#39;s given to us</span>
        <span class=c1># If not given we need to figure out what to pass. We decide</span>
        <span class=c1># based on whether our class has the &#39;method_whitelist&#39; property</span>
        <span class=c1># and if so we pass the deprecated &#39;method_whitelist&#39; otherwise</span>
        <span class=c1># we use &#39;allowed_methods&#39;. Remove in v2.0</span>
        <span class=k>if</span> <span class=s2>&quot;method_whitelist&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>kw</span> <span class=ow>and</span> <span class=s2>&quot;allowed_methods&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>kw</span><span class=p>:</span>
            <span class=k>if</span> <span class=s2>&quot;method_whitelist&quot;</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__dict__</span><span class=p>:</span>
                <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span>
                    <span class=s2>&quot;Using &#39;method_whitelist&#39; with Retry is deprecated and &quot;</span>
                    <span class=s2>&quot;will be removed in v2.0. Use &#39;allowed_methods&#39; instead&quot;</span><span class=p>,</span>
                    <span class=ne>DeprecationWarning</span><span class=p>,</span>
                <span class=p>)</span>
                <span class=n>params</span><span class=p>[</span><span class=s2>&quot;method_whitelist&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>allowed_methods</span>
            <span class=k>else</span><span class=p>:</span>
                <span class=n>params</span><span class=p>[</span><span class=s2>&quot;allowed_methods&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>allowed_methods</span>

        <span class=n>params</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>kw</span><span class=p>)</span>
        <span class=k>return</span> <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)(</span><span class=o>**</span><span class=n>params</span><span class=p>)</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_int</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Backwards-compatibility for the old retries format.&quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>retries</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>retries</span> <span class=o>=</span> <span class=n>default</span> <span class=k>if</span> <span class=n>default</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=bp>cls</span><span class=o>.</span><span class=n>DEFAULT</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>Retry</span><span class=p>):</span>
            <span class=k>return</span> <span class=n>retries</span>

        <span class=n>redirect</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=n>redirect</span><span class=p>)</span> <span class=ow>and</span> <span class=kc>None</span>
        <span class=n>new_retries</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>)</span>
        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Converted retries value: </span><span class=si>%r</span><span class=s2> -&gt; </span><span class=si>%r</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>retries</span><span class=p>,</span> <span class=n>new_retries</span><span class=p>)</span>
        <span class=k>return</span> <span class=n>new_retries</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_backoff_time</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Formula for computing the current backoff</span>

<span class=sd>        :rtype: float</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># We want to consider only the last consecutive errors sequence (Ignore redirects).</span>
        <span class=n>consecutive_errors_len</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span>
            <span class=nb>list</span><span class=p>(</span>
                <span class=n>takewhile</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>redirect_location</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>,</span> <span class=nb>reversed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>history</span><span class=p>))</span>
            <span class=p>)</span>
        <span class=p>)</span>
        <span class=k>if</span> <span class=n>consecutive_errors_len</span> <span class=o>&lt;=</span> <span class=mi>1</span><span class=p>:</span>
            <span class=k>return</span> <span class=mi>0</span>

        <span class=n>backoff_value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>backoff_factor</span> <span class=o>*</span> <span class=p>(</span><span class=mi>2</span> <span class=o>**</span> <span class=p>(</span><span class=n>consecutive_errors_len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>))</span>
        <span class=k>return</span> <span class=nb>min</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>BACKOFF_MAX</span><span class=p>,</span> <span class=n>backoff_value</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>parse_retry_after</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>retry_after</span><span class=p>):</span>
        <span class=c1># Whitespace: https://tools.ietf.org/html/rfc7230#section-3.2.4</span>
        <span class=k>if</span> <span class=n>re</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=sa>r</span><span class=s2>&quot;^\s*[0-9]+\s*$&quot;</span><span class=p>,</span> <span class=n>retry_after</span><span class=p>):</span>
            <span class=n>seconds</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>retry_after</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>retry_date_tuple</span> <span class=o>=</span> <span class=n>email</span><span class=o>.</span><span class=n>utils</span><span class=o>.</span><span class=n>parsedate_tz</span><span class=p>(</span><span class=n>retry_after</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>retry_date_tuple</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>raise</span> <span class=n>InvalidHeader</span><span class=p>(</span><span class=s2>&quot;Invalid Retry-After header: </span><span class=si>%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=n>retry_after</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>retry_date_tuple</span><span class=p>[</span><span class=mi>9</span><span class=p>]</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>  <span class=c1># Python 2</span>
                <span class=c1># Assume UTC if no timezone was specified</span>
                <span class=c1># On Python2.7, parsedate_tz returns None for a timezone offset</span>
                <span class=c1># instead of 0 if no timezone is given, where mktime_tz treats</span>
                <span class=c1># a None timezone offset as local time.</span>
                <span class=n>retry_date_tuple</span> <span class=o>=</span> <span class=n>retry_date_tuple</span><span class=p>[:</span><span class=mi>9</span><span class=p>]</span> <span class=o>+</span> <span class=p>(</span><span class=mi>0</span><span class=p>,)</span> <span class=o>+</span> <span class=n>retry_date_tuple</span><span class=p>[</span><span class=mi>10</span><span class=p>:]</span>

            <span class=n>retry_date</span> <span class=o>=</span> <span class=n>email</span><span class=o>.</span><span class=n>utils</span><span class=o>.</span><span class=n>mktime_tz</span><span class=p>(</span><span class=n>retry_date_tuple</span><span class=p>)</span>
            <span class=n>seconds</span> <span class=o>=</span> <span class=n>retry_date</span> <span class=o>-</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>

        <span class=k>if</span> <span class=n>seconds</span> <span class=o>&lt;</span> <span class=mi>0</span><span class=p>:</span>
            <span class=n>seconds</span> <span class=o>=</span> <span class=mi>0</span>

        <span class=k>return</span> <span class=n>seconds</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_retry_after</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>response</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get the value of Retry-After in seconds.&quot;&quot;&quot;</span>

        <span class=n>retry_after</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>getheader</span><span class=p>(</span><span class=s2>&quot;Retry-After&quot;</span><span class=p>)</span>

        <span class=k>if</span> <span class=n>retry_after</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>None</span>

        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>parse_retry_after</span><span class=p>(</span><span class=n>retry_after</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>sleep_for_retry</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
        <span class=n>retry_after</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_retry_after</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>retry_after</span><span class=p>:</span>
            <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>retry_after</span><span class=p>)</span>
            <span class=k>return</span> <span class=kc>True</span>

        <span class=k>return</span> <span class=kc>False</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_sleep_backoff</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=n>backoff</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_backoff_time</span><span class=p>()</span>
        <span class=k>if</span> <span class=n>backoff</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
            <span class=k>return</span>
        <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=n>backoff</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>sleep</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Sleep between retry attempts.</span>

<span class=sd>        This method will respect a server&#39;s ``Retry-After`` response header</span>
<span class=sd>        and sleep the duration of the time requested. If that is not present, it</span>
<span class=sd>        will use an exponential backoff. By default, the backoff factor is 0 and</span>
<span class=sd>        this method will return immediately.</span>
<span class=sd>        &quot;&quot;&quot;</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>respect_retry_after_header</span> <span class=ow>and</span> <span class=n>response</span><span class=p>:</span>
            <span class=n>slept</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>sleep_for_retry</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
            <span class=k>if</span> <span class=n>slept</span><span class=p>:</span>
                <span class=k>return</span>

        <span class=bp>self</span><span class=o>.</span><span class=n>_sleep_backoff</span><span class=p>()</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_is_connection_error</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>err</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Errors when we&#39;re fairly sure that the server did not receive the</span>
<span class=sd>        request, so it should be safe to retry.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>err</span><span class=p>,</span> <span class=n>ProxyError</span><span class=p>):</span>
            <span class=n>err</span> <span class=o>=</span> <span class=n>err</span><span class=o>.</span><span class=n>original_error</span>
        <span class=k>return</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>err</span><span class=p>,</span> <span class=n>ConnectTimeoutError</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_is_read_error</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>err</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Errors that occur after the request has been started, so we should</span>
<span class=sd>        assume that the server began processing it.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>err</span><span class=p>,</span> <span class=p>(</span><span class=n>ReadTimeoutError</span><span class=p>,</span> <span class=n>ProtocolError</span><span class=p>))</span>

    <span class=k>def</span><span class=w> </span><span class=nf>_is_method_retryable</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>method</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Checks if a given HTTP method should be retried upon, depending if</span>
<span class=sd>        it is included in the allowed_methods</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># TODO: For now favor if the Retry implementation sets its own method_whitelist</span>
        <span class=c1># property outside of our constructor to avoid breaking custom implementations.</span>
        <span class=k>if</span> <span class=s2>&quot;method_whitelist&quot;</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=vm>__dict__</span><span class=p>:</span>
            <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span>
                <span class=s2>&quot;Using &#39;method_whitelist&#39; with Retry is deprecated and &quot;</span>
                <span class=s2>&quot;will be removed in v2.0. Use &#39;allowed_methods&#39; instead&quot;</span><span class=p>,</span>
                <span class=ne>DeprecationWarning</span><span class=p>,</span>
            <span class=p>)</span>
            <span class=n>allowed_methods</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>method_whitelist</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>allowed_methods</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>allowed_methods</span>

        <span class=k>if</span> <span class=n>allowed_methods</span> <span class=ow>and</span> <span class=n>method</span><span class=o>.</span><span class=n>upper</span><span class=p>()</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>allowed_methods</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_retry</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>method</span><span class=p>,</span> <span class=n>status_code</span><span class=p>,</span> <span class=n>has_retry_after</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Is this method/status code retryable? (Based on allowlists and control</span>
<span class=sd>        variables such as the number of total retries to allow, whether to</span>
<span class=sd>        respect the Retry-After header, whether this header is present, and</span>
<span class=sd>        whether the returned status code is on the list of status codes to</span>
<span class=sd>        be retried upon on the presence of the aforementioned header)</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_method_retryable</span><span class=p>(</span><span class=n>method</span><span class=p>):</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>status_forcelist</span> <span class=ow>and</span> <span class=n>status_code</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>status_forcelist</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>True</span>

        <span class=k>return</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>total</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>respect_retry_after_header</span>
            <span class=ow>and</span> <span class=n>has_retry_after</span>
            <span class=ow>and</span> <span class=p>(</span><span class=n>status_code</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>RETRY_AFTER_STATUS_CODES</span><span class=p>)</span>
        <span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>is_exhausted</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Are we out of retries?&quot;&quot;&quot;</span>
        <span class=n>retry_counts</span> <span class=o>=</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>total</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>connect</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>read</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>redirect</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>status</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>other</span><span class=p>,</span>
        <span class=p>)</span>
        <span class=n>retry_counts</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>filter</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=n>retry_counts</span><span class=p>))</span>
        <span class=k>if</span> <span class=ow>not</span> <span class=n>retry_counts</span><span class=p>:</span>
            <span class=k>return</span> <span class=kc>False</span>

        <span class=k>return</span> <span class=nb>min</span><span class=p>(</span><span class=n>retry_counts</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>0</span>

    <span class=k>def</span><span class=w> </span><span class=nf>increment</span><span class=p>(</span>
        <span class=bp>self</span><span class=p>,</span>
        <span class=n>method</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>url</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>response</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>error</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_pool</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
        <span class=n>_stacktrace</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Return a new Retry object with incremented retry counters.</span>

<span class=sd>        :param response: A response object, or None, if the server did not</span>
<span class=sd>            return a response.</span>
<span class=sd>        :type response: :class:`~urllib3.response.HTTPResponse`</span>
<span class=sd>        :param Exception error: An error encountered during the request, or</span>
<span class=sd>            None if the response was received successfully.</span>

<span class=sd>        :return: A new ``Retry`` object.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=ow>is</span> <span class=kc>False</span> <span class=ow>and</span> <span class=n>error</span><span class=p>:</span>
            <span class=c1># Disabled, indicate to re-raise the error.</span>
            <span class=k>raise</span> <span class=n>six</span><span class=o>.</span><span class=n>reraise</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>error</span><span class=p>),</span> <span class=n>error</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=p>)</span>

        <span class=n>total</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span>
        <span class=k>if</span> <span class=n>total</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>total</span> <span class=o>-=</span> <span class=mi>1</span>

        <span class=n>connect</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>connect</span>
        <span class=n>read</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>read</span>
        <span class=n>redirect</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>redirect</span>
        <span class=n>status_count</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span>
        <span class=n>other</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>other</span>
        <span class=n>cause</span> <span class=o>=</span> <span class=s2>&quot;unknown&quot;</span>
        <span class=n>status</span> <span class=o>=</span> <span class=kc>None</span>
        <span class=n>redirect_location</span> <span class=o>=</span> <span class=kc>None</span>

        <span class=k>if</span> <span class=n>error</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_connection_error</span><span class=p>(</span><span class=n>error</span><span class=p>):</span>
            <span class=c1># Connect retry?</span>
            <span class=k>if</span> <span class=n>connect</span> <span class=ow>is</span> <span class=kc>False</span><span class=p>:</span>
                <span class=k>raise</span> <span class=n>six</span><span class=o>.</span><span class=n>reraise</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>error</span><span class=p>),</span> <span class=n>error</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=p>)</span>
            <span class=k>elif</span> <span class=n>connect</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>connect</span> <span class=o>-=</span> <span class=mi>1</span>

        <span class=k>elif</span> <span class=n>error</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_read_error</span><span class=p>(</span><span class=n>error</span><span class=p>):</span>
            <span class=c1># Read retry?</span>
            <span class=k>if</span> <span class=n>read</span> <span class=ow>is</span> <span class=kc>False</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_method_retryable</span><span class=p>(</span><span class=n>method</span><span class=p>):</span>
                <span class=k>raise</span> <span class=n>six</span><span class=o>.</span><span class=n>reraise</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>error</span><span class=p>),</span> <span class=n>error</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=p>)</span>
            <span class=k>elif</span> <span class=n>read</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>read</span> <span class=o>-=</span> <span class=mi>1</span>

        <span class=k>elif</span> <span class=n>error</span><span class=p>:</span>
            <span class=c1># Other retry?</span>
            <span class=k>if</span> <span class=n>other</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>other</span> <span class=o>-=</span> <span class=mi>1</span>

        <span class=k>elif</span> <span class=n>response</span> <span class=ow>and</span> <span class=n>response</span><span class=o>.</span><span class=n>get_redirect_location</span><span class=p>():</span>
            <span class=c1># Redirect retry?</span>
            <span class=k>if</span> <span class=n>redirect</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>redirect</span> <span class=o>-=</span> <span class=mi>1</span>
            <span class=n>cause</span> <span class=o>=</span> <span class=s2>&quot;too many redirects&quot;</span>
            <span class=n>redirect_location</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>get_redirect_location</span><span class=p>()</span>
            <span class=n>status</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span>

        <span class=k>else</span><span class=p>:</span>
            <span class=c1># Incrementing because of a server error like a 500 in</span>
            <span class=c1># status_forcelist and the given method is in the allowed_methods</span>
            <span class=n>cause</span> <span class=o>=</span> <span class=n>ResponseError</span><span class=o>.</span><span class=n>GENERIC_ERROR</span>
            <span class=k>if</span> <span class=n>response</span> <span class=ow>and</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span><span class=p>:</span>
                <span class=k>if</span> <span class=n>status_count</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                    <span class=n>status_count</span> <span class=o>-=</span> <span class=mi>1</span>
                <span class=n>cause</span> <span class=o>=</span> <span class=n>ResponseError</span><span class=o>.</span><span class=n>SPECIFIC_ERROR</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>status_code</span><span class=o>=</span><span class=n>response</span><span class=o>.</span><span class=n>status</span><span class=p>)</span>
                <span class=n>status</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span>

        <span class=n>history</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>history</span> <span class=o>+</span> <span class=p>(</span>
            <span class=n>RequestHistory</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>error</span><span class=p>,</span> <span class=n>status</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>),</span>
        <span class=p>)</span>

        <span class=n>new_retry</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>new</span><span class=p>(</span>
            <span class=n>total</span><span class=o>=</span><span class=n>total</span><span class=p>,</span>
            <span class=n>connect</span><span class=o>=</span><span class=n>connect</span><span class=p>,</span>
            <span class=n>read</span><span class=o>=</span><span class=n>read</span><span class=p>,</span>
            <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span>
            <span class=n>status</span><span class=o>=</span><span class=n>status_count</span><span class=p>,</span>
            <span class=n>other</span><span class=o>=</span><span class=n>other</span><span class=p>,</span>
            <span class=n>history</span><span class=o>=</span><span class=n>history</span><span class=p>,</span>
        <span class=p>)</span>

        <span class=k>if</span> <span class=n>new_retry</span><span class=o>.</span><span class=n>is_exhausted</span><span class=p>():</span>
            <span class=k>raise</span> <span class=n>MaxRetryError</span><span class=p>(</span><span class=n>_pool</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>error</span> <span class=ow>or</span> <span class=n>ResponseError</span><span class=p>(</span><span class=n>cause</span><span class=p>))</span>

        <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Incremented Retry for (url=&#39;</span><span class=si>%s</span><span class=s2>&#39;): </span><span class=si>%r</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>new_retry</span><span class=p>)</span>

        <span class=k>return</span> <span class=n>new_retry</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=p>(</span>
            <span class=s2>&quot;</span><span class=si>{cls.__name__}</span><span class=s2>(total=</span><span class=si>{self.total}</span><span class=s2>, connect=</span><span class=si>{self.connect}</span><span class=s2>, &quot;</span>
            <span class=s2>&quot;read=</span><span class=si>{self.read}</span><span class=s2>, redirect=</span><span class=si>{self.redirect}</span><span class=s2>, status=</span><span class=si>{self.status}</span><span class=s2>)&quot;</span>
        <span class=p>)</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>cls</span><span class=o>=</span><span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>),</span> <span class=bp>self</span><span class=o>=</span><span class=bp>self</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__getattr__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>item</span><span class=p>):</span>
        <span class=k>if</span> <span class=n>item</span> <span class=o>==</span> <span class=s2>&quot;method_whitelist&quot;</span><span class=p>:</span>
            <span class=c1># TODO: Remove this deprecated alias in v2.0</span>
            <span class=n>warnings</span><span class=o>.</span><span class=n>warn</span><span class=p>(</span>
                <span class=s2>&quot;Using &#39;method_whitelist&#39; with Retry is deprecated and &quot;</span>
                <span class=s2>&quot;will be removed in v2.0. Use &#39;allowed_methods&#39; instead&quot;</span><span class=p>,</span>
                <span class=ne>DeprecationWarning</span><span class=p>,</span>
            <span class=p>)</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>allowed_methods</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=k>return</span> <span class=nb>getattr</span><span class=p>(</span><span class=nb>super</span><span class=p>(</span><span class=n>Retry</span><span class=p>,</span> <span class=bp>self</span><span class=p>),</span> <span class=n>item</span><span class=p>)</span>
        <span class=k>except</span> <span class=ne>AttributeError</span><span class=p>:</span>
            <span class=k>return</span> <span class=nb>getattr</span><span class=p>(</span><span class=n>Retry</span><span class=p>,</span> <span class=n>item</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Retry.from_int class="doc doc-heading"> <code class="highlight language-python"><span class=n>from_int</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Backwards-compatibility for the old retries format.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/retry.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>322</span>
<span class=normal>323</span>
<span class=normal>324</span>
<span class=normal>325</span>
<span class=normal>326</span>
<span class=normal>327</span>
<span class=normal>328</span>
<span class=normal>329</span>
<span class=normal>330</span>
<span class=normal>331</span>
<span class=normal>332</span>
<span class=normal>333</span>
<span class=normal>334</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>from_int</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Backwards-compatibility for the old retries format.&quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=n>retries</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>retries</span> <span class=o>=</span> <span class=n>default</span> <span class=k>if</span> <span class=n>default</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=bp>cls</span><span class=o>.</span><span class=n>DEFAULT</span>

    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>Retry</span><span class=p>):</span>
        <span class=k>return</span> <span class=n>retries</span>

    <span class=n>redirect</span> <span class=o>=</span> <span class=nb>bool</span><span class=p>(</span><span class=n>redirect</span><span class=p>)</span> <span class=ow>and</span> <span class=kc>None</span>
    <span class=n>new_retries</span> <span class=o>=</span> <span class=bp>cls</span><span class=p>(</span><span class=n>retries</span><span class=p>,</span> <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>)</span>
    <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Converted retries value: </span><span class=si>%r</span><span class=s2> -&gt; </span><span class=si>%r</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>retries</span><span class=p>,</span> <span class=n>new_retries</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>new_retries</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Retry.get_backoff_time class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_backoff_time</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Formula for computing the current backoff</p> <p>:rtype: float</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/retry.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>336</span>
<span class=normal>337</span>
<span class=normal>338</span>
<span class=normal>339</span>
<span class=normal>340</span>
<span class=normal>341</span>
<span class=normal>342</span>
<span class=normal>343</span>
<span class=normal>344</span>
<span class=normal>345</span>
<span class=normal>346</span>
<span class=normal>347</span>
<span class=normal>348</span>
<span class=normal>349</span>
<span class=normal>350</span>
<span class=normal>351</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_backoff_time</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Formula for computing the current backoff</span>

<span class=sd>    :rtype: float</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># We want to consider only the last consecutive errors sequence (Ignore redirects).</span>
    <span class=n>consecutive_errors_len</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span>
        <span class=nb>list</span><span class=p>(</span>
            <span class=n>takewhile</span><span class=p>(</span><span class=k>lambda</span> <span class=n>x</span><span class=p>:</span> <span class=n>x</span><span class=o>.</span><span class=n>redirect_location</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>,</span> <span class=nb>reversed</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>history</span><span class=p>))</span>
        <span class=p>)</span>
    <span class=p>)</span>
    <span class=k>if</span> <span class=n>consecutive_errors_len</span> <span class=o>&lt;=</span> <span class=mi>1</span><span class=p>:</span>
        <span class=k>return</span> <span class=mi>0</span>

    <span class=n>backoff_value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>backoff_factor</span> <span class=o>*</span> <span class=p>(</span><span class=mi>2</span> <span class=o>**</span> <span class=p>(</span><span class=n>consecutive_errors_len</span> <span class=o>-</span> <span class=mi>1</span><span class=p>))</span>
    <span class=k>return</span> <span class=nb>min</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>BACKOFF_MAX</span><span class=p>,</span> <span class=n>backoff_value</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Retry.get_retry_after class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_retry_after</span><span class=p>(</span><span class=n>response</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Get the value of Retry-After in seconds.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/retry.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>376</span>
<span class=normal>377</span>
<span class=normal>378</span>
<span class=normal>379</span>
<span class=normal>380</span>
<span class=normal>381</span>
<span class=normal>382</span>
<span class=normal>383</span>
<span class=normal>384</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_retry_after</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>response</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Get the value of Retry-After in seconds.&quot;&quot;&quot;</span>

    <span class=n>retry_after</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>getheader</span><span class=p>(</span><span class=s2>&quot;Retry-After&quot;</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>retry_after</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>None</span>

    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>parse_retry_after</span><span class=p>(</span><span class=n>retry_after</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Retry.increment class="doc doc-heading"> <code class="highlight language-python"><span class=n>increment</span><span class=p>(</span><span class=n>method</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>url</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>error</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>_pool</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Return a new Retry object with incremented retry counters.</p> <p>:param response: A response object, or None, if the server did not return a response. :type response: :class:<code>~urllib3.response.HTTPResponse</code> :param Exception error: An error encountered during the request, or None if the response was received successfully.</p> <p>:return: A new <code>Retry</code> object.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/retry.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>486</span>
<span class=normal>487</span>
<span class=normal>488</span>
<span class=normal>489</span>
<span class=normal>490</span>
<span class=normal>491</span>
<span class=normal>492</span>
<span class=normal>493</span>
<span class=normal>494</span>
<span class=normal>495</span>
<span class=normal>496</span>
<span class=normal>497</span>
<span class=normal>498</span>
<span class=normal>499</span>
<span class=normal>500</span>
<span class=normal>501</span>
<span class=normal>502</span>
<span class=normal>503</span>
<span class=normal>504</span>
<span class=normal>505</span>
<span class=normal>506</span>
<span class=normal>507</span>
<span class=normal>508</span>
<span class=normal>509</span>
<span class=normal>510</span>
<span class=normal>511</span>
<span class=normal>512</span>
<span class=normal>513</span>
<span class=normal>514</span>
<span class=normal>515</span>
<span class=normal>516</span>
<span class=normal>517</span>
<span class=normal>518</span>
<span class=normal>519</span>
<span class=normal>520</span>
<span class=normal>521</span>
<span class=normal>522</span>
<span class=normal>523</span>
<span class=normal>524</span>
<span class=normal>525</span>
<span class=normal>526</span>
<span class=normal>527</span>
<span class=normal>528</span>
<span class=normal>529</span>
<span class=normal>530</span>
<span class=normal>531</span>
<span class=normal>532</span>
<span class=normal>533</span>
<span class=normal>534</span>
<span class=normal>535</span>
<span class=normal>536</span>
<span class=normal>537</span>
<span class=normal>538</span>
<span class=normal>539</span>
<span class=normal>540</span>
<span class=normal>541</span>
<span class=normal>542</span>
<span class=normal>543</span>
<span class=normal>544</span>
<span class=normal>545</span>
<span class=normal>546</span>
<span class=normal>547</span>
<span class=normal>548</span>
<span class=normal>549</span>
<span class=normal>550</span>
<span class=normal>551</span>
<span class=normal>552</span>
<span class=normal>553</span>
<span class=normal>554</span>
<span class=normal>555</span>
<span class=normal>556</span>
<span class=normal>557</span>
<span class=normal>558</span>
<span class=normal>559</span>
<span class=normal>560</span>
<span class=normal>561</span>
<span class=normal>562</span>
<span class=normal>563</span>
<span class=normal>564</span>
<span class=normal>565</span>
<span class=normal>566</span>
<span class=normal>567</span>
<span class=normal>568</span>
<span class=normal>569</span>
<span class=normal>570</span>
<span class=normal>571</span>
<span class=normal>572</span>
<span class=normal>573</span>
<span class=normal>574</span>
<span class=normal>575</span>
<span class=normal>576</span>
<span class=normal>577</span>
<span class=normal>578</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>increment</span><span class=p>(</span>
    <span class=bp>self</span><span class=p>,</span>
    <span class=n>method</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>url</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>response</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>error</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>_pool</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>_stacktrace</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Return a new Retry object with incremented retry counters.</span>

<span class=sd>    :param response: A response object, or None, if the server did not</span>
<span class=sd>        return a response.</span>
<span class=sd>    :type response: :class:`~urllib3.response.HTTPResponse`</span>
<span class=sd>    :param Exception error: An error encountered during the request, or</span>
<span class=sd>        None if the response was received successfully.</span>

<span class=sd>    :return: A new ``Retry`` object.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=ow>is</span> <span class=kc>False</span> <span class=ow>and</span> <span class=n>error</span><span class=p>:</span>
        <span class=c1># Disabled, indicate to re-raise the error.</span>
        <span class=k>raise</span> <span class=n>six</span><span class=o>.</span><span class=n>reraise</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>error</span><span class=p>),</span> <span class=n>error</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=p>)</span>

    <span class=n>total</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span>
    <span class=k>if</span> <span class=n>total</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>total</span> <span class=o>-=</span> <span class=mi>1</span>

    <span class=n>connect</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>connect</span>
    <span class=n>read</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>read</span>
    <span class=n>redirect</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>redirect</span>
    <span class=n>status_count</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>status</span>
    <span class=n>other</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>other</span>
    <span class=n>cause</span> <span class=o>=</span> <span class=s2>&quot;unknown&quot;</span>
    <span class=n>status</span> <span class=o>=</span> <span class=kc>None</span>
    <span class=n>redirect_location</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>if</span> <span class=n>error</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_connection_error</span><span class=p>(</span><span class=n>error</span><span class=p>):</span>
        <span class=c1># Connect retry?</span>
        <span class=k>if</span> <span class=n>connect</span> <span class=ow>is</span> <span class=kc>False</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>six</span><span class=o>.</span><span class=n>reraise</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>error</span><span class=p>),</span> <span class=n>error</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>connect</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>connect</span> <span class=o>-=</span> <span class=mi>1</span>

    <span class=k>elif</span> <span class=n>error</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_read_error</span><span class=p>(</span><span class=n>error</span><span class=p>):</span>
        <span class=c1># Read retry?</span>
        <span class=k>if</span> <span class=n>read</span> <span class=ow>is</span> <span class=kc>False</span> <span class=ow>or</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_method_retryable</span><span class=p>(</span><span class=n>method</span><span class=p>):</span>
            <span class=k>raise</span> <span class=n>six</span><span class=o>.</span><span class=n>reraise</span><span class=p>(</span><span class=nb>type</span><span class=p>(</span><span class=n>error</span><span class=p>),</span> <span class=n>error</span><span class=p>,</span> <span class=n>_stacktrace</span><span class=p>)</span>
        <span class=k>elif</span> <span class=n>read</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>read</span> <span class=o>-=</span> <span class=mi>1</span>

    <span class=k>elif</span> <span class=n>error</span><span class=p>:</span>
        <span class=c1># Other retry?</span>
        <span class=k>if</span> <span class=n>other</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>other</span> <span class=o>-=</span> <span class=mi>1</span>

    <span class=k>elif</span> <span class=n>response</span> <span class=ow>and</span> <span class=n>response</span><span class=o>.</span><span class=n>get_redirect_location</span><span class=p>():</span>
        <span class=c1># Redirect retry?</span>
        <span class=k>if</span> <span class=n>redirect</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=n>redirect</span> <span class=o>-=</span> <span class=mi>1</span>
        <span class=n>cause</span> <span class=o>=</span> <span class=s2>&quot;too many redirects&quot;</span>
        <span class=n>redirect_location</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>get_redirect_location</span><span class=p>()</span>
        <span class=n>status</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span>

    <span class=k>else</span><span class=p>:</span>
        <span class=c1># Incrementing because of a server error like a 500 in</span>
        <span class=c1># status_forcelist and the given method is in the allowed_methods</span>
        <span class=n>cause</span> <span class=o>=</span> <span class=n>ResponseError</span><span class=o>.</span><span class=n>GENERIC_ERROR</span>
        <span class=k>if</span> <span class=n>response</span> <span class=ow>and</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>status_count</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
                <span class=n>status_count</span> <span class=o>-=</span> <span class=mi>1</span>
            <span class=n>cause</span> <span class=o>=</span> <span class=n>ResponseError</span><span class=o>.</span><span class=n>SPECIFIC_ERROR</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>status_code</span><span class=o>=</span><span class=n>response</span><span class=o>.</span><span class=n>status</span><span class=p>)</span>
            <span class=n>status</span> <span class=o>=</span> <span class=n>response</span><span class=o>.</span><span class=n>status</span>

    <span class=n>history</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>history</span> <span class=o>+</span> <span class=p>(</span>
        <span class=n>RequestHistory</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>error</span><span class=p>,</span> <span class=n>status</span><span class=p>,</span> <span class=n>redirect_location</span><span class=p>),</span>
    <span class=p>)</span>

    <span class=n>new_retry</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>new</span><span class=p>(</span>
        <span class=n>total</span><span class=o>=</span><span class=n>total</span><span class=p>,</span>
        <span class=n>connect</span><span class=o>=</span><span class=n>connect</span><span class=p>,</span>
        <span class=n>read</span><span class=o>=</span><span class=n>read</span><span class=p>,</span>
        <span class=n>redirect</span><span class=o>=</span><span class=n>redirect</span><span class=p>,</span>
        <span class=n>status</span><span class=o>=</span><span class=n>status_count</span><span class=p>,</span>
        <span class=n>other</span><span class=o>=</span><span class=n>other</span><span class=p>,</span>
        <span class=n>history</span><span class=o>=</span><span class=n>history</span><span class=p>,</span>
    <span class=p>)</span>

    <span class=k>if</span> <span class=n>new_retry</span><span class=o>.</span><span class=n>is_exhausted</span><span class=p>():</span>
        <span class=k>raise</span> <span class=n>MaxRetryError</span><span class=p>(</span><span class=n>_pool</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>error</span> <span class=ow>or</span> <span class=n>ResponseError</span><span class=p>(</span><span class=n>cause</span><span class=p>))</span>

    <span class=n>log</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Incremented Retry for (url=&#39;</span><span class=si>%s</span><span class=s2>&#39;): </span><span class=si>%r</span><span class=s2>&quot;</span><span class=p>,</span> <span class=n>url</span><span class=p>,</span> <span class=n>new_retry</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>new_retry</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Retry.is_exhausted class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_exhausted</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Are we out of retries?</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/retry.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>470</span>
<span class=normal>471</span>
<span class=normal>472</span>
<span class=normal>473</span>
<span class=normal>474</span>
<span class=normal>475</span>
<span class=normal>476</span>
<span class=normal>477</span>
<span class=normal>478</span>
<span class=normal>479</span>
<span class=normal>480</span>
<span class=normal>481</span>
<span class=normal>482</span>
<span class=normal>483</span>
<span class=normal>484</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_exhausted</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Are we out of retries?&quot;&quot;&quot;</span>
    <span class=n>retry_counts</span> <span class=o>=</span> <span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>total</span><span class=p>,</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>connect</span><span class=p>,</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>read</span><span class=p>,</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>redirect</span><span class=p>,</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>status</span><span class=p>,</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>other</span><span class=p>,</span>
    <span class=p>)</span>
    <span class=n>retry_counts</span> <span class=o>=</span> <span class=nb>list</span><span class=p>(</span><span class=nb>filter</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=n>retry_counts</span><span class=p>))</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=n>retry_counts</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=k>return</span> <span class=nb>min</span><span class=p>(</span><span class=n>retry_counts</span><span class=p>)</span> <span class=o>&lt;</span> <span class=mi>0</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Retry.is_retry class="doc doc-heading"> <code class="highlight language-python"><span class=n>is_retry</span><span class=p>(</span><span class=n>method</span><span class=p>,</span> <span class=n>status_code</span><span class=p>,</span> <span class=n>has_retry_after</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Is this method/status code retryable? (Based on allowlists and control variables such as the number of total retries to allow, whether to respect the Retry-After header, whether this header is present, and whether the returned status code is on the list of status codes to be retried upon on the presence of the aforementioned header)</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/retry.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>450</span>
<span class=normal>451</span>
<span class=normal>452</span>
<span class=normal>453</span>
<span class=normal>454</span>
<span class=normal>455</span>
<span class=normal>456</span>
<span class=normal>457</span>
<span class=normal>458</span>
<span class=normal>459</span>
<span class=normal>460</span>
<span class=normal>461</span>
<span class=normal>462</span>
<span class=normal>463</span>
<span class=normal>464</span>
<span class=normal>465</span>
<span class=normal>466</span>
<span class=normal>467</span>
<span class=normal>468</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>is_retry</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>method</span><span class=p>,</span> <span class=n>status_code</span><span class=p>,</span> <span class=n>has_retry_after</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Is this method/status code retryable? (Based on allowlists and control</span>
<span class=sd>    variables such as the number of total retries to allow, whether to</span>
<span class=sd>    respect the Retry-After header, whether this header is present, and</span>
<span class=sd>    whether the returned status code is on the list of status codes to</span>
<span class=sd>    be retried upon on the presence of the aforementioned header)</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_is_method_retryable</span><span class=p>(</span><span class=n>method</span><span class=p>):</span>
        <span class=k>return</span> <span class=kc>False</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>status_forcelist</span> <span class=ow>and</span> <span class=n>status_code</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>status_forcelist</span><span class=p>:</span>
        <span class=k>return</span> <span class=kc>True</span>

    <span class=k>return</span> <span class=p>(</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>total</span>
        <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>respect_retry_after_header</span>
        <span class=ow>and</span> <span class=n>has_retry_after</span>
        <span class=ow>and</span> <span class=p>(</span><span class=n>status_code</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>RETRY_AFTER_STATUS_CODES</span><span class=p>)</span>
    <span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Retry.sleep class="doc doc-heading"> <code class="highlight language-python"><span class=n>sleep</span><span class=p>(</span><span class=n>response</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h3> <div class="doc doc-contents "> <p>Sleep between retry attempts.</p> <p>This method will respect a server's <code>Retry-After</code> response header and sleep the duration of the time requested. If that is not present, it will use an exponential backoff. By default, the backoff factor is 0 and this method will return immediately.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/retry.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>400</span>
<span class=normal>401</span>
<span class=normal>402</span>
<span class=normal>403</span>
<span class=normal>404</span>
<span class=normal>405</span>
<span class=normal>406</span>
<span class=normal>407</span>
<span class=normal>408</span>
<span class=normal>409</span>
<span class=normal>410</span>
<span class=normal>411</span>
<span class=normal>412</span>
<span class=normal>413</span>
<span class=normal>414</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>sleep</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>response</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Sleep between retry attempts.</span>

<span class=sd>    This method will respect a server&#39;s ``Retry-After`` response header</span>
<span class=sd>    and sleep the duration of the time requested. If that is not present, it</span>
<span class=sd>    will use an exponential backoff. By default, the backoff factor is 0 and</span>
<span class=sd>    this method will return immediately.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>respect_retry_after_header</span> <span class=ow>and</span> <span class=n>response</span><span class=p>:</span>
        <span class=n>slept</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>sleep_for_retry</span><span class=p>(</span><span class=n>response</span><span class=p>)</span>
        <span class=k>if</span> <span class=n>slept</span><span class=p>:</span>
            <span class=k>return</span>

    <span class=bp>self</span><span class=o>.</span><span class=n>_sleep_backoff</span><span class=p>()</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-class"> <h2 id=client.ayon_fusion.vendor.urllib3.Timeout class="doc doc-heading"> <code>Timeout</code> </h2> <div class="doc doc-contents "> <p class="doc doc-class-bases"> Bases: <code><span title=object>object</span></code></p> <p>Timeout configuration.</p> <p>Timeouts can be defined as a default for a pool:</p> <p>.. code-block:: python</p> <p>timeout = Timeout(connect=2.0, read=7.0) http = PoolManager(timeout=timeout) response = http.request('GET', 'http://example.com/')</p> <p>Or per-request (which overrides the default for the pool):</p> <p>.. code-block:: python</p> <p>response = http.request('GET', 'http://example.com/', timeout=Timeout(10))</p> <p>Timeouts can be disabled by setting all the parameters to <code>None</code>:</p> <p>.. code-block:: python</p> <p>no_timeout = Timeout(connect=None, read=None) response = http.request('GET', 'http://example.com/, timeout=no_timeout)</p> <p>:param total: This combines the connect and read timeouts into one; the read timeout will be set to the time leftover from the connect attempt. In the event that both a connect timeout and a total are specified, or a read timeout and a total are specified, the shorter timeout will be applied.</p> <pre><code>Defaults to None.
</code></pre> <p>:type total: int, float, or None</p> <p>:param connect: The maximum amount of time (in seconds) to wait for a connection attempt to a server to succeed. Omitting the parameter will default the connect timeout to the system default, probably <code>the global default timeout in socket.py &lt;http://hg.python.org/cpython/file/603b4d593758/Lib/socket.py#l535&gt;</code>_. None will set an infinite timeout for connection attempts.</p> <p>:type connect: int, float, or None</p> <p>:param read: The maximum amount of time (in seconds) to wait between consecutive read operations for a response from the server. Omitting the parameter will default the read timeout to the system default, probably <code>the global default timeout in socket.py &lt;http://hg.python.org/cpython/file/603b4d593758/Lib/socket.py#l535&gt;</code>_. None will set an infinite timeout.</p> <p>:type read: int, float, or None</p> <p>.. note::</p> <pre><code>Many factors can affect the total amount of time for urllib3 to return
an HTTP response.

For example, Python's DNS resolver does not obey the timeout specified
on the socket. Other factors that can affect total request time include
high CPU load, high swap, the program running at a low priority level,
or other behaviors.

In addition, the read and total timeouts only measure the time between
read operations on the socket connecting the client and the server,
not the total amount of time for the request to return a complete
response. For most requests, the timeout is raised because the server
has not sent the first byte in the specified time. This is not always
the case; if a server streams one byte every fifteen seconds, a timeout
of 20 seconds will not trigger, even though the request will take
several minutes to complete.

If your goal is to cut off any request after a set amount of wall clock
time, consider having a second "watcher" thread to cut off a slow
request.
</code></pre> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/timeout.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal> 20</span>
<span class=normal> 21</span>
<span class=normal> 22</span>
<span class=normal> 23</span>
<span class=normal> 24</span>
<span class=normal> 25</span>
<span class=normal> 26</span>
<span class=normal> 27</span>
<span class=normal> 28</span>
<span class=normal> 29</span>
<span class=normal> 30</span>
<span class=normal> 31</span>
<span class=normal> 32</span>
<span class=normal> 33</span>
<span class=normal> 34</span>
<span class=normal> 35</span>
<span class=normal> 36</span>
<span class=normal> 37</span>
<span class=normal> 38</span>
<span class=normal> 39</span>
<span class=normal> 40</span>
<span class=normal> 41</span>
<span class=normal> 42</span>
<span class=normal> 43</span>
<span class=normal> 44</span>
<span class=normal> 45</span>
<span class=normal> 46</span>
<span class=normal> 47</span>
<span class=normal> 48</span>
<span class=normal> 49</span>
<span class=normal> 50</span>
<span class=normal> 51</span>
<span class=normal> 52</span>
<span class=normal> 53</span>
<span class=normal> 54</span>
<span class=normal> 55</span>
<span class=normal> 56</span>
<span class=normal> 57</span>
<span class=normal> 58</span>
<span class=normal> 59</span>
<span class=normal> 60</span>
<span class=normal> 61</span>
<span class=normal> 62</span>
<span class=normal> 63</span>
<span class=normal> 64</span>
<span class=normal> 65</span>
<span class=normal> 66</span>
<span class=normal> 67</span>
<span class=normal> 68</span>
<span class=normal> 69</span>
<span class=normal> 70</span>
<span class=normal> 71</span>
<span class=normal> 72</span>
<span class=normal> 73</span>
<span class=normal> 74</span>
<span class=normal> 75</span>
<span class=normal> 76</span>
<span class=normal> 77</span>
<span class=normal> 78</span>
<span class=normal> 79</span>
<span class=normal> 80</span>
<span class=normal> 81</span>
<span class=normal> 82</span>
<span class=normal> 83</span>
<span class=normal> 84</span>
<span class=normal> 85</span>
<span class=normal> 86</span>
<span class=normal> 87</span>
<span class=normal> 88</span>
<span class=normal> 89</span>
<span class=normal> 90</span>
<span class=normal> 91</span>
<span class=normal> 92</span>
<span class=normal> 93</span>
<span class=normal> 94</span>
<span class=normal> 95</span>
<span class=normal> 96</span>
<span class=normal> 97</span>
<span class=normal> 98</span>
<span class=normal> 99</span>
<span class=normal>100</span>
<span class=normal>101</span>
<span class=normal>102</span>
<span class=normal>103</span>
<span class=normal>104</span>
<span class=normal>105</span>
<span class=normal>106</span>
<span class=normal>107</span>
<span class=normal>108</span>
<span class=normal>109</span>
<span class=normal>110</span>
<span class=normal>111</span>
<span class=normal>112</span>
<span class=normal>113</span>
<span class=normal>114</span>
<span class=normal>115</span>
<span class=normal>116</span>
<span class=normal>117</span>
<span class=normal>118</span>
<span class=normal>119</span>
<span class=normal>120</span>
<span class=normal>121</span>
<span class=normal>122</span>
<span class=normal>123</span>
<span class=normal>124</span>
<span class=normal>125</span>
<span class=normal>126</span>
<span class=normal>127</span>
<span class=normal>128</span>
<span class=normal>129</span>
<span class=normal>130</span>
<span class=normal>131</span>
<span class=normal>132</span>
<span class=normal>133</span>
<span class=normal>134</span>
<span class=normal>135</span>
<span class=normal>136</span>
<span class=normal>137</span>
<span class=normal>138</span>
<span class=normal>139</span>
<span class=normal>140</span>
<span class=normal>141</span>
<span class=normal>142</span>
<span class=normal>143</span>
<span class=normal>144</span>
<span class=normal>145</span>
<span class=normal>146</span>
<span class=normal>147</span>
<span class=normal>148</span>
<span class=normal>149</span>
<span class=normal>150</span>
<span class=normal>151</span>
<span class=normal>152</span>
<span class=normal>153</span>
<span class=normal>154</span>
<span class=normal>155</span>
<span class=normal>156</span>
<span class=normal>157</span>
<span class=normal>158</span>
<span class=normal>159</span>
<span class=normal>160</span>
<span class=normal>161</span>
<span class=normal>162</span>
<span class=normal>163</span>
<span class=normal>164</span>
<span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span>
<span class=normal>180</span>
<span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span>
<span class=normal>194</span>
<span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span>
<span class=normal>205</span>
<span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span>
<span class=normal>219</span>
<span class=normal>220</span>
<span class=normal>221</span>
<span class=normal>222</span>
<span class=normal>223</span>
<span class=normal>224</span>
<span class=normal>225</span>
<span class=normal>226</span>
<span class=normal>227</span>
<span class=normal>228</span>
<span class=normal>229</span>
<span class=normal>230</span>
<span class=normal>231</span>
<span class=normal>232</span>
<span class=normal>233</span>
<span class=normal>234</span>
<span class=normal>235</span>
<span class=normal>236</span>
<span class=normal>237</span>
<span class=normal>238</span>
<span class=normal>239</span>
<span class=normal>240</span>
<span class=normal>241</span>
<span class=normal>242</span>
<span class=normal>243</span>
<span class=normal>244</span>
<span class=normal>245</span>
<span class=normal>246</span>
<span class=normal>247</span>
<span class=normal>248</span>
<span class=normal>249</span>
<span class=normal>250</span>
<span class=normal>251</span>
<span class=normal>252</span>
<span class=normal>253</span>
<span class=normal>254</span>
<span class=normal>255</span>
<span class=normal>256</span>
<span class=normal>257</span>
<span class=normal>258</span>
<span class=normal>259</span>
<span class=normal>260</span>
<span class=normal>261</span>
<span class=normal>262</span>
<span class=normal>263</span>
<span class=normal>264</span>
<span class=normal>265</span>
<span class=normal>266</span>
<span class=normal>267</span>
<span class=normal>268</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>class</span><span class=w> </span><span class=nc>Timeout</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Timeout configuration.</span>

<span class=sd>    Timeouts can be defined as a default for a pool:</span>

<span class=sd>    .. code-block:: python</span>

<span class=sd>       timeout = Timeout(connect=2.0, read=7.0)</span>
<span class=sd>       http = PoolManager(timeout=timeout)</span>
<span class=sd>       response = http.request(&#39;GET&#39;, &#39;http://example.com/&#39;)</span>

<span class=sd>    Or per-request (which overrides the default for the pool):</span>

<span class=sd>    .. code-block:: python</span>

<span class=sd>       response = http.request(&#39;GET&#39;, &#39;http://example.com/&#39;, timeout=Timeout(10))</span>

<span class=sd>    Timeouts can be disabled by setting all the parameters to ``None``:</span>

<span class=sd>    .. code-block:: python</span>

<span class=sd>       no_timeout = Timeout(connect=None, read=None)</span>
<span class=sd>       response = http.request(&#39;GET&#39;, &#39;http://example.com/, timeout=no_timeout)</span>


<span class=sd>    :param total:</span>
<span class=sd>        This combines the connect and read timeouts into one; the read timeout</span>
<span class=sd>        will be set to the time leftover from the connect attempt. In the</span>
<span class=sd>        event that both a connect timeout and a total are specified, or a read</span>
<span class=sd>        timeout and a total are specified, the shorter timeout will be applied.</span>

<span class=sd>        Defaults to None.</span>

<span class=sd>    :type total: int, float, or None</span>

<span class=sd>    :param connect:</span>
<span class=sd>        The maximum amount of time (in seconds) to wait for a connection</span>
<span class=sd>        attempt to a server to succeed. Omitting the parameter will default the</span>
<span class=sd>        connect timeout to the system default, probably `the global default</span>
<span class=sd>        timeout in socket.py</span>
<span class=sd>        &lt;http://hg.python.org/cpython/file/603b4d593758/Lib/socket.py#l535&gt;`_.</span>
<span class=sd>        None will set an infinite timeout for connection attempts.</span>

<span class=sd>    :type connect: int, float, or None</span>

<span class=sd>    :param read:</span>
<span class=sd>        The maximum amount of time (in seconds) to wait between consecutive</span>
<span class=sd>        read operations for a response from the server. Omitting the parameter</span>
<span class=sd>        will default the read timeout to the system default, probably `the</span>
<span class=sd>        global default timeout in socket.py</span>
<span class=sd>        &lt;http://hg.python.org/cpython/file/603b4d593758/Lib/socket.py#l535&gt;`_.</span>
<span class=sd>        None will set an infinite timeout.</span>

<span class=sd>    :type read: int, float, or None</span>

<span class=sd>    .. note::</span>

<span class=sd>        Many factors can affect the total amount of time for urllib3 to return</span>
<span class=sd>        an HTTP response.</span>

<span class=sd>        For example, Python&#39;s DNS resolver does not obey the timeout specified</span>
<span class=sd>        on the socket. Other factors that can affect total request time include</span>
<span class=sd>        high CPU load, high swap, the program running at a low priority level,</span>
<span class=sd>        or other behaviors.</span>

<span class=sd>        In addition, the read and total timeouts only measure the time between</span>
<span class=sd>        read operations on the socket connecting the client and the server,</span>
<span class=sd>        not the total amount of time for the request to return a complete</span>
<span class=sd>        response. For most requests, the timeout is raised because the server</span>
<span class=sd>        has not sent the first byte in the specified time. This is not always</span>
<span class=sd>        the case; if a server streams one byte every fifteen seconds, a timeout</span>
<span class=sd>        of 20 seconds will not trigger, even though the request will take</span>
<span class=sd>        several minutes to complete.</span>

<span class=sd>        If your goal is to cut off any request after a set amount of wall clock</span>
<span class=sd>        time, consider having a second &quot;watcher&quot; thread to cut off a slow</span>
<span class=sd>        request.</span>
<span class=sd>    &quot;&quot;&quot;</span>

    <span class=c1>#: A sentinel object representing the default timeout value</span>
    <span class=n>DEFAULT_TIMEOUT</span> <span class=o>=</span> <span class=n>_GLOBAL_DEFAULT_TIMEOUT</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>total</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>connect</span><span class=o>=</span><span class=n>_Default</span><span class=p>,</span> <span class=n>read</span><span class=o>=</span><span class=n>_Default</span><span class=p>):</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_connect</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_validate_timeout</span><span class=p>(</span><span class=n>connect</span><span class=p>,</span> <span class=s2>&quot;connect&quot;</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_read</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_validate_timeout</span><span class=p>(</span><span class=n>read</span><span class=p>,</span> <span class=s2>&quot;read&quot;</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_validate_timeout</span><span class=p>(</span><span class=n>total</span><span class=p>,</span> <span class=s2>&quot;total&quot;</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span> <span class=o>=</span> <span class=kc>None</span>

    <span class=k>def</span><span class=w> </span><span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
        <span class=k>return</span> <span class=s2>&quot;</span><span class=si>%s</span><span class=s2>(connect=</span><span class=si>%r</span><span class=s2>, read=</span><span class=si>%r</span><span class=s2>, total=</span><span class=si>%r</span><span class=s2>)&quot;</span> <span class=o>%</span> <span class=p>(</span>
            <span class=nb>type</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=vm>__name__</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_connect</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>_read</span><span class=p>,</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>total</span><span class=p>,</span>
        <span class=p>)</span>

    <span class=c1># __str__ provided for backwards compatibility</span>
    <span class=fm>__str__</span> <span class=o>=</span> <span class=fm>__repr__</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>_validate_timeout</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>value</span><span class=p>,</span> <span class=n>name</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Check that a timeout attribute is valid.</span>

<span class=sd>        :param value: The timeout value to validate</span>
<span class=sd>        :param name: The name of the timeout attribute to validate. This is</span>
<span class=sd>            used to specify in error messages.</span>
<span class=sd>        :return: The validated and casted version of the given value.</span>
<span class=sd>        :raises ValueError: If it is a numeric value less than or equal to</span>
<span class=sd>            zero, or the type is not an integer, float, or None.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=n>_Default</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>cls</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span>

        <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=n>value</span> <span class=ow>is</span> <span class=bp>cls</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span><span class=p>:</span>
            <span class=k>return</span> <span class=n>value</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>value</span><span class=p>,</span> <span class=nb>bool</span><span class=p>):</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=s2>&quot;Timeout cannot be a boolean value. It must &quot;</span>
                <span class=s2>&quot;be an int, float or None.&quot;</span>
            <span class=p>)</span>
        <span class=k>try</span><span class=p>:</span>
            <span class=nb>float</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
        <span class=k>except</span> <span class=p>(</span><span class=ne>TypeError</span><span class=p>,</span> <span class=ne>ValueError</span><span class=p>):</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=s2>&quot;Timeout value </span><span class=si>%s</span><span class=s2> was </span><span class=si>%s</span><span class=s2>, but it must be an &quot;</span>
                <span class=s2>&quot;int, float or None.&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
            <span class=p>)</span>

        <span class=k>try</span><span class=p>:</span>
            <span class=k>if</span> <span class=n>value</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>
                <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                    <span class=s2>&quot;Attempted to set </span><span class=si>%s</span><span class=s2> timeout to </span><span class=si>%s</span><span class=s2>, but the &quot;</span>
                    <span class=s2>&quot;timeout cannot be set to a value less &quot;</span>
                    <span class=s2>&quot;than or equal to 0.&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
                <span class=p>)</span>
        <span class=k>except</span> <span class=ne>TypeError</span><span class=p>:</span>
            <span class=c1># Python 3</span>
            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span>
                <span class=s2>&quot;Timeout value </span><span class=si>%s</span><span class=s2> was </span><span class=si>%s</span><span class=s2>, but it must be an &quot;</span>
                <span class=s2>&quot;int, float or None.&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>name</span><span class=p>,</span> <span class=n>value</span><span class=p>)</span>
            <span class=p>)</span>

        <span class=k>return</span> <span class=n>value</span>

    <span class=nd>@classmethod</span>
    <span class=k>def</span><span class=w> </span><span class=nf>from_float</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>timeout</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create a new Timeout from a legacy timeout value.</span>

<span class=sd>        The timeout value used by httplib.py sets the same timeout on the</span>
<span class=sd>        connect(), and recv() socket requests. This creates a :class:`Timeout`</span>
<span class=sd>        object that sets the individual timeouts to the ``timeout`` value</span>
<span class=sd>        passed to this function.</span>

<span class=sd>        :param timeout: The legacy timeout value.</span>
<span class=sd>        :type timeout: integer, float, sentinel default object, or None</span>
<span class=sd>        :return: Timeout object</span>
<span class=sd>        :rtype: :class:`Timeout`</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>return</span> <span class=n>Timeout</span><span class=p>(</span><span class=n>read</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span> <span class=n>connect</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>clone</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Create a copy of the timeout object</span>

<span class=sd>        Timeout properties are stored per-pool but each request needs a fresh</span>
<span class=sd>        Timeout object to ensure each one has its own start/stop configured.</span>

<span class=sd>        :return: a copy of the timeout object</span>
<span class=sd>        :rtype: :class:`Timeout`</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=c1># We can&#39;t use copy.deepcopy because that will also create a new object</span>
        <span class=c1># for _GLOBAL_DEFAULT_TIMEOUT, which socket.py uses as a sentinel to</span>
        <span class=c1># detect the user default.</span>
        <span class=k>return</span> <span class=n>Timeout</span><span class=p>(</span><span class=n>connect</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_connect</span><span class=p>,</span> <span class=n>read</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_read</span><span class=p>,</span> <span class=n>total</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>total</span><span class=p>)</span>

    <span class=k>def</span><span class=w> </span><span class=nf>start_connect</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Start the timeout clock, used during a connect() attempt</span>

<span class=sd>        :raises urllib3.exceptions.TimeoutStateError: if you attempt</span>
<span class=sd>            to start a timer that has been started already.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>TimeoutStateError</span><span class=p>(</span><span class=s2>&quot;Timeout timer has already been started.&quot;</span><span class=p>)</span>
        <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span> <span class=o>=</span> <span class=n>current_time</span><span class=p>()</span>
        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span>

    <span class=k>def</span><span class=w> </span><span class=nf>get_connect_duration</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Gets the time elapsed since the call to :meth:`start_connect`.</span>

<span class=sd>        :return: Elapsed time in seconds.</span>
<span class=sd>        :rtype: float</span>
<span class=sd>        :raises urllib3.exceptions.TimeoutStateError: if you attempt</span>
<span class=sd>            to get duration for a timer that hasn&#39;t been started.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>raise</span> <span class=n>TimeoutStateError</span><span class=p>(</span>
                <span class=s2>&quot;Can&#39;t get connect duration for timer that has not started.&quot;</span>
            <span class=p>)</span>
        <span class=k>return</span> <span class=n>current_time</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>connect_timeout</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get the value to use when setting a connection timeout.</span>

<span class=sd>        This will be a positive float or integer, the value None</span>
<span class=sd>        (never timeout), or the default system timeout.</span>

<span class=sd>        :return: Connect timeout.</span>
<span class=sd>        :rtype: int, float, :attr:`Timeout.DEFAULT_TIMEOUT` or None</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connect</span>

        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connect</span> <span class=ow>is</span> <span class=kc>None</span> <span class=ow>or</span> <span class=bp>self</span><span class=o>.</span><span class=n>_connect</span> <span class=ow>is</span> <span class=bp>self</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span>

        <span class=k>return</span> <span class=nb>min</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_connect</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span><span class=p>)</span>

    <span class=nd>@property</span>
    <span class=k>def</span><span class=w> </span><span class=nf>read_timeout</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>        </span><span class=sd>&quot;&quot;&quot;Get the value for the read timeout.</span>

<span class=sd>        This assumes some time has elapsed in the connection timeout and</span>
<span class=sd>        computes the read timeout appropriately.</span>

<span class=sd>        If self.total is set, the read timeout is dependent on the amount of</span>
<span class=sd>        time taken by the connect timeout. If the connection time has not been</span>
<span class=sd>        established, a :exc:`~urllib3.exceptions.TimeoutStateError` will be</span>
<span class=sd>        raised.</span>

<span class=sd>        :return: Value to use for the read timeout.</span>
<span class=sd>        :rtype: int, float, :attr:`Timeout.DEFAULT_TIMEOUT` or None</span>
<span class=sd>        :raises urllib3.exceptions.TimeoutStateError: If :meth:`start_connect`</span>
<span class=sd>            has not yet been called on this object.</span>
<span class=sd>        &quot;&quot;&quot;</span>
        <span class=k>if</span> <span class=p>(</span>
            <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=ow>is</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_read</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span>
            <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>_read</span> <span class=ow>is</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span>
        <span class=p>):</span>
            <span class=c1># In case the connect timeout has not yet been established.</span>
            <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
                <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_read</span>
            <span class=k>return</span> <span class=nb>max</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=nb>min</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_connect_duration</span><span class=p>(),</span> <span class=bp>self</span><span class=o>.</span><span class=n>_read</span><span class=p>))</span>
        <span class=k>elif</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=ow>and</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=ow>is</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>DEFAULT_TIMEOUT</span><span class=p>:</span>
            <span class=k>return</span> <span class=nb>max</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>total</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_connect_duration</span><span class=p>())</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_read</span>
</code></pre></div></td></tr></table></div> </details> <div class="doc doc-children"> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_fusion.vendor.urllib3.Timeout.connect_timeout class="doc doc-heading"> <code class="highlight language-python"><span class=n>connect_timeout</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get the value to use when setting a connection timeout.</p> <p>This will be a positive float or integer, the value None (never timeout), or the default system timeout.</p> <p>:return: Connect timeout. :rtype: int, float, :attr:<code>Timeout.DEFAULT_TIMEOUT</code> or None</p> </div> </div> <div class="doc doc-object doc-attribute"> <h3 id=client.ayon_fusion.vendor.urllib3.Timeout.read_timeout class="doc doc-heading"> <code class="highlight language-python"><span class=n>read_timeout</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-property"><code>property</code></small> </span> </h3> <div class="doc doc-contents "> <p>Get the value for the read timeout.</p> <p>This assumes some time has elapsed in the connection timeout and computes the read timeout appropriately.</p> <p>If self.total is set, the read timeout is dependent on the amount of time taken by the connect timeout. If the connection time has not been established, a :exc:<code>~urllib3.exceptions.TimeoutStateError</code> will be raised.</p> <p>:return: Value to use for the read timeout. :rtype: int, float, :attr:<code>Timeout.DEFAULT_TIMEOUT</code> or None :raises urllib3.exceptions.TimeoutStateError: If :meth:<code>start_connect</code> has not yet been called on this object.</p> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Timeout.clone class="doc doc-heading"> <code class="highlight language-python"><span class=n>clone</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Create a copy of the timeout object</p> <p>Timeout properties are stored per-pool but each request needs a fresh Timeout object to ensure each one has its own start/stop configured.</p> <p>:return: a copy of the timeout object :rtype: :class:<code>Timeout</code></p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/timeout.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>181</span>
<span class=normal>182</span>
<span class=normal>183</span>
<span class=normal>184</span>
<span class=normal>185</span>
<span class=normal>186</span>
<span class=normal>187</span>
<span class=normal>188</span>
<span class=normal>189</span>
<span class=normal>190</span>
<span class=normal>191</span>
<span class=normal>192</span>
<span class=normal>193</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>clone</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a copy of the timeout object</span>

<span class=sd>    Timeout properties are stored per-pool but each request needs a fresh</span>
<span class=sd>    Timeout object to ensure each one has its own start/stop configured.</span>

<span class=sd>    :return: a copy of the timeout object</span>
<span class=sd>    :rtype: :class:`Timeout`</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># We can&#39;t use copy.deepcopy because that will also create a new object</span>
    <span class=c1># for _GLOBAL_DEFAULT_TIMEOUT, which socket.py uses as a sentinel to</span>
    <span class=c1># detect the user default.</span>
    <span class=k>return</span> <span class=n>Timeout</span><span class=p>(</span><span class=n>connect</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_connect</span><span class=p>,</span> <span class=n>read</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>_read</span><span class=p>,</span> <span class=n>total</span><span class=o>=</span><span class=bp>self</span><span class=o>.</span><span class=n>total</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Timeout.from_float class="doc doc-heading"> <code class="highlight language-python"><span class=n>from_float</span><span class=p>(</span><span class=n>timeout</span><span class=p>)</span></code> <span class="doc doc-labels"> <small class="doc doc-label doc-label-classmethod"><code>classmethod</code></small> </span> </h3> <div class="doc doc-contents "> <p>Create a new Timeout from a legacy timeout value.</p> <p>The timeout value used by httplib.py sets the same timeout on the connect(), and recv() socket requests. This creates a :class:<code>Timeout</code> object that sets the individual timeouts to the <code>timeout</code> value passed to this function.</p> <p>:param timeout: The legacy timeout value. :type timeout: integer, float, sentinel default object, or None :return: Timeout object :rtype: :class:<code>Timeout</code></p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/timeout.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>165</span>
<span class=normal>166</span>
<span class=normal>167</span>
<span class=normal>168</span>
<span class=normal>169</span>
<span class=normal>170</span>
<span class=normal>171</span>
<span class=normal>172</span>
<span class=normal>173</span>
<span class=normal>174</span>
<span class=normal>175</span>
<span class=normal>176</span>
<span class=normal>177</span>
<span class=normal>178</span>
<span class=normal>179</span></pre></div></td><td class=code><div><pre><span></span><code><span class=nd>@classmethod</span>
<span class=k>def</span><span class=w> </span><span class=nf>from_float</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>timeout</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Create a new Timeout from a legacy timeout value.</span>

<span class=sd>    The timeout value used by httplib.py sets the same timeout on the</span>
<span class=sd>    connect(), and recv() socket requests. This creates a :class:`Timeout`</span>
<span class=sd>    object that sets the individual timeouts to the ``timeout`` value</span>
<span class=sd>    passed to this function.</span>

<span class=sd>    :param timeout: The legacy timeout value.</span>
<span class=sd>    :type timeout: integer, float, sentinel default object, or None</span>
<span class=sd>    :return: Timeout object</span>
<span class=sd>    :rtype: :class:`Timeout`</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>return</span> <span class=n>Timeout</span><span class=p>(</span><span class=n>read</span><span class=o>=</span><span class=n>timeout</span><span class=p>,</span> <span class=n>connect</span><span class=o>=</span><span class=n>timeout</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Timeout.get_connect_duration class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_connect_duration</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Gets the time elapsed since the call to :meth:<code>start_connect</code>.</p> <p>:return: Elapsed time in seconds. :rtype: float :raises urllib3.exceptions.TimeoutStateError: if you attempt to get duration for a timer that hasn't been started.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/timeout.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>206</span>
<span class=normal>207</span>
<span class=normal>208</span>
<span class=normal>209</span>
<span class=normal>210</span>
<span class=normal>211</span>
<span class=normal>212</span>
<span class=normal>213</span>
<span class=normal>214</span>
<span class=normal>215</span>
<span class=normal>216</span>
<span class=normal>217</span>
<span class=normal>218</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_connect_duration</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Gets the time elapsed since the call to :meth:`start_connect`.</span>

<span class=sd>    :return: Elapsed time in seconds.</span>
<span class=sd>    :rtype: float</span>
<span class=sd>    :raises urllib3.exceptions.TimeoutStateError: if you attempt</span>
<span class=sd>        to get duration for a timer that hasn&#39;t been started.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>TimeoutStateError</span><span class=p>(</span>
            <span class=s2>&quot;Can&#39;t get connect duration for timer that has not started.&quot;</span>
        <span class=p>)</span>
    <span class=k>return</span> <span class=n>current_time</span><span class=p>()</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h3 id=client.ayon_fusion.vendor.urllib3.Timeout.start_connect class="doc doc-heading"> <code class="highlight language-python"><span class=n>start_connect</span><span class=p>()</span></code> </h3> <div class="doc doc-contents "> <p>Start the timeout clock, used during a connect() attempt</p> <p>:raises urllib3.exceptions.TimeoutStateError: if you attempt to start a timer that has been started already.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/timeout.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>195</span>
<span class=normal>196</span>
<span class=normal>197</span>
<span class=normal>198</span>
<span class=normal>199</span>
<span class=normal>200</span>
<span class=normal>201</span>
<span class=normal>202</span>
<span class=normal>203</span>
<span class=normal>204</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>start_connect</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;Start the timeout clock, used during a connect() attempt</span>

<span class=sd>    :raises urllib3.exceptions.TimeoutStateError: if you attempt</span>
<span class=sd>        to start a timer that has been started already.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
        <span class=k>raise</span> <span class=n>TimeoutStateError</span><span class=p>(</span><span class=s2>&quot;Timeout timer has already been started.&quot;</span><span class=p>)</span>
    <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span> <span class=o>=</span> <span class=n>current_time</span><span class=p>()</span>
    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>_start_connect</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_fusion.vendor.urllib3.add_stderr_logger class="doc doc-heading"> <code class="highlight language-python"><span class=n>add_stderr_logger</span><span class=p>(</span><span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>DEBUG</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Helper for quickly adding a StreamHandler to the logger. Useful for debugging.</p> <p>Returns the handler after adding it.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/__init__.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>add_stderr_logger</span><span class=p>(</span><span class=n>level</span><span class=o>=</span><span class=n>logging</span><span class=o>.</span><span class=n>DEBUG</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Helper for quickly adding a StreamHandler to the logger. Useful for</span>
<span class=sd>    debugging.</span>

<span class=sd>    Returns the handler after adding it.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=c1># This method needs to be in this __init__.py to get the __name__ correct</span>
    <span class=c1># even if urllib3 is vendored within another package.</span>
    <span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
    <span class=n>handler</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>StreamHandler</span><span class=p>()</span>
    <span class=n>handler</span><span class=o>.</span><span class=n>setFormatter</span><span class=p>(</span><span class=n>logging</span><span class=o>.</span><span class=n>Formatter</span><span class=p>(</span><span class=s2>&quot;</span><span class=si>%(asctime)s</span><span class=s2> </span><span class=si>%(levelname)s</span><span class=s2> </span><span class=si>%(message)s</span><span class=s2>&quot;</span><span class=p>))</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>addHandler</span><span class=p>(</span><span class=n>handler</span><span class=p>)</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>setLevel</span><span class=p>(</span><span class=n>level</span><span class=p>)</span>
    <span class=n>logger</span><span class=o>.</span><span class=n>debug</span><span class=p>(</span><span class=s2>&quot;Added a stderr logging handler to logger: </span><span class=si>%s</span><span class=s2>&quot;</span><span class=p>,</span> <span class=vm>__name__</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>handler</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_fusion.vendor.urllib3.connection_from_url class="doc doc-heading"> <code class="highlight language-python"><span class=n>connection_from_url</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Given a url, return an :class:<code>.ConnectionPool</code> instance of its host.</p> <p>This is a shortcut for not having to parse out the scheme, host, and port of the url before creating an :class:<code>.ConnectionPool</code> instance.</p> <p>:param url: Absolute URL string that must include the scheme. Port is optional.</p> <p>:param **kw: Passes additional parameters to the constructor of the appropriate :class:<code>.ConnectionPool</code>. Useful for specifying things like timeout, maxsize, headers, etc.</p> <p>Example::</p> <pre><code>&gt;&gt;&gt; conn = connection_from_url('http://google.com/')
&gt;&gt;&gt; r = conn.request('GET', '/')
</code></pre> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/connectionpool.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>1024</span>
<span class=normal>1025</span>
<span class=normal>1026</span>
<span class=normal>1027</span>
<span class=normal>1028</span>
<span class=normal>1029</span>
<span class=normal>1030</span>
<span class=normal>1031</span>
<span class=normal>1032</span>
<span class=normal>1033</span>
<span class=normal>1034</span>
<span class=normal>1035</span>
<span class=normal>1036</span>
<span class=normal>1037</span>
<span class=normal>1038</span>
<span class=normal>1039</span>
<span class=normal>1040</span>
<span class=normal>1041</span>
<span class=normal>1042</span>
<span class=normal>1043</span>
<span class=normal>1044</span>
<span class=normal>1045</span>
<span class=normal>1046</span>
<span class=normal>1047</span>
<span class=normal>1048</span>
<span class=normal>1049</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>connection_from_url</span><span class=p>(</span><span class=n>url</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Given a url, return an :class:`.ConnectionPool` instance of its host.</span>

<span class=sd>    This is a shortcut for not having to parse out the scheme, host, and port</span>
<span class=sd>    of the url before creating an :class:`.ConnectionPool` instance.</span>

<span class=sd>    :param url:</span>
<span class=sd>        Absolute URL string that must include the scheme. Port is optional.</span>

<span class=sd>    :param \\**kw:</span>
<span class=sd>        Passes additional parameters to the constructor of the appropriate</span>
<span class=sd>        :class:`.ConnectionPool`. Useful for specifying things like</span>
<span class=sd>        timeout, maxsize, headers, etc.</span>

<span class=sd>    Example::</span>

<span class=sd>        &gt;&gt;&gt; conn = connection_from_url(&#39;http://google.com/&#39;)</span>
<span class=sd>        &gt;&gt;&gt; r = conn.request(&#39;GET&#39;, &#39;/&#39;)</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>scheme</span><span class=p>,</span> <span class=n>host</span><span class=p>,</span> <span class=n>port</span> <span class=o>=</span> <span class=n>get_host</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=n>port</span> <span class=o>=</span> <span class=n>port</span> <span class=ow>or</span> <span class=n>port_by_scheme</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>scheme</span><span class=p>,</span> <span class=mi>80</span><span class=p>)</span>
    <span class=k>if</span> <span class=n>scheme</span> <span class=o>==</span> <span class=s2>&quot;https&quot;</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>HTTPSConnectionPool</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=n>port</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>
    <span class=k>else</span><span class=p>:</span>
        <span class=k>return</span> <span class=n>HTTPConnectionPool</span><span class=p>(</span><span class=n>host</span><span class=p>,</span> <span class=n>port</span><span class=o>=</span><span class=n>port</span><span class=p>,</span> <span class=o>**</span><span class=n>kw</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_fusion.vendor.urllib3.disable_warnings class="doc doc-heading"> <code class="highlight language-python"><span class=n>disable_warnings</span><span class=p>(</span><span class=n>category</span><span class=o>=</span><span class=n>exceptions</span><span class=o>.</span><span class=n>HTTPWarning</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Helper for quickly disabling all urllib3 warnings.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/__init__.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>disable_warnings</span><span class=p>(</span><span class=n>category</span><span class=o>=</span><span class=n>exceptions</span><span class=o>.</span><span class=n>HTTPWarning</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Helper for quickly disabling all urllib3 warnings.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>warnings</span><span class=o>.</span><span class=n>simplefilter</span><span class=p>(</span><span class=s2>&quot;ignore&quot;</span><span class=p>,</span> <span class=n>category</span><span class=p>)</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_fusion.vendor.urllib3.encode_multipart_formdata class="doc doc-heading"> <code class="highlight language-python"><span class=n>encode_multipart_formdata</span><span class=p>(</span><span class=n>fields</span><span class=p>,</span> <span class=n>boundary</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Encode a dictionary of <code>fields</code> using the multipart/form-data MIME format.</p> <p>:param fields: Dictionary of fields or list of (key, :class:<code>~urllib3.fields.RequestField</code>).</p> <p>:param boundary: If not specified, then a random boundary will be generated using :func:<code>urllib3.filepost.choose_boundary</code>.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/filepost.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span>
<span class=normal>96</span>
<span class=normal>97</span>
<span class=normal>98</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>encode_multipart_formdata</span><span class=p>(</span><span class=n>fields</span><span class=p>,</span> <span class=n>boundary</span><span class=o>=</span><span class=kc>None</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Encode a dictionary of ``fields`` using the multipart/form-data MIME format.</span>

<span class=sd>    :param fields:</span>
<span class=sd>        Dictionary of fields or list of (key, :class:`~urllib3.fields.RequestField`).</span>

<span class=sd>    :param boundary:</span>
<span class=sd>        If not specified, then a random boundary will be generated using</span>
<span class=sd>        :func:`urllib3.filepost.choose_boundary`.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>body</span> <span class=o>=</span> <span class=n>BytesIO</span><span class=p>()</span>
    <span class=k>if</span> <span class=n>boundary</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
        <span class=n>boundary</span> <span class=o>=</span> <span class=n>choose_boundary</span><span class=p>()</span>

    <span class=k>for</span> <span class=n>field</span> <span class=ow>in</span> <span class=n>iter_field_objects</span><span class=p>(</span><span class=n>fields</span><span class=p>):</span>
        <span class=n>body</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>b</span><span class=p>(</span><span class=s2>&quot;--</span><span class=si>%s</span><span class=se>\r\n</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>boundary</span><span class=p>)))</span>

        <span class=n>writer</span><span class=p>(</span><span class=n>body</span><span class=p>)</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>field</span><span class=o>.</span><span class=n>render_headers</span><span class=p>())</span>
        <span class=n>data</span> <span class=o>=</span> <span class=n>field</span><span class=o>.</span><span class=n>data</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=nb>int</span><span class=p>):</span>
            <span class=n>data</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>  <span class=c1># Backwards compatibility</span>

        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=n>six</span><span class=o>.</span><span class=n>text_type</span><span class=p>):</span>
            <span class=n>writer</span><span class=p>(</span><span class=n>body</span><span class=p>)</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>body</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>

        <span class=n>body</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=sa>b</span><span class=s2>&quot;</span><span class=se>\r\n</span><span class=s2>&quot;</span><span class=p>)</span>

    <span class=n>body</span><span class=o>.</span><span class=n>write</span><span class=p>(</span><span class=n>b</span><span class=p>(</span><span class=s2>&quot;--</span><span class=si>%s</span><span class=s2>--</span><span class=se>\r\n</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=p>(</span><span class=n>boundary</span><span class=p>)))</span>

    <span class=n>content_type</span> <span class=o>=</span> <span class=nb>str</span><span class=p>(</span><span class=s2>&quot;multipart/form-data; boundary=</span><span class=si>%s</span><span class=s2>&quot;</span> <span class=o>%</span> <span class=n>boundary</span><span class=p>)</span>

    <span class=k>return</span> <span class=n>body</span><span class=o>.</span><span class=n>getvalue</span><span class=p>(),</span> <span class=n>content_type</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_fusion.vendor.urllib3.get_host class="doc doc-heading"> <code class="highlight language-python"><span class=n>get_host</span><span class=p>(</span><span class=n>url</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Deprecated. Use :func:<code>parse_url</code> instead.</p> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/url.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>427</span>
<span class=normal>428</span>
<span class=normal>429</span>
<span class=normal>430</span>
<span class=normal>431</span>
<span class=normal>432</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>get_host</span><span class=p>(</span><span class=n>url</span><span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Deprecated. Use :func:`parse_url` instead.</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>p</span> <span class=o>=</span> <span class=n>parse_url</span><span class=p>(</span><span class=n>url</span><span class=p>)</span>
    <span class=k>return</span> <span class=n>p</span><span class=o>.</span><span class=n>scheme</span> <span class=ow>or</span> <span class=s2>&quot;http&quot;</span><span class=p>,</span> <span class=n>p</span><span class=o>.</span><span class=n>hostname</span><span class=p>,</span> <span class=n>p</span><span class=o>.</span><span class=n>port</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> <div class="doc doc-object doc-function"> <h2 id=client.ayon_fusion.vendor.urllib3.make_headers class="doc doc-heading"> <code class="highlight language-python"><span class=n>make_headers</span><span class=p>(</span><span class=n>keep_alive</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>accept_encoding</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>user_agent</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>basic_auth</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>proxy_basic_auth</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span> <span class=n>disable_cache</span><span class=o>=</span><span class=kc>None</span><span class=p>)</span></code> </h2> <div class="doc doc-contents "> <p>Shortcuts for generating request headers.</p> <p>:param keep_alive: If <code>True</code>, adds 'connection: keep-alive' header.</p> <p>:param accept_encoding: Can be a boolean, list, or string. <code>True</code> translates to 'gzip,deflate'. List will get joined by comma. String will be used as provided.</p> <p>:param user_agent: String representing the user-agent you want, such as "python-urllib3/0.6"</p> <p>:param basic_auth: Colon-separated username:password string for 'authorization: basic ...' auth header.</p> <p>:param proxy_basic_auth: Colon-separated username:password string for 'proxy-authorization: basic ...' auth header.</p> <p>:param disable_cache: If <code>True</code>, adds 'cache-control: no-cache' header.</p> <p>Example::</p> <pre><code>&gt;&gt;&gt; make_headers(keep_alive=True, user_agent="Batman/1.0")
{'connection': 'keep-alive', 'user-agent': 'Batman/1.0'}
&gt;&gt;&gt; make_headers(accept_encoding=True)
{'accept-encoding': 'gzip,deflate'}
</code></pre> <details class=quote> <summary>Source code in <code>client/ayon_fusion/vendor/urllib3/util/request.py</code></summary> <div class=highlight><table class=highlighttable><tr><td class=linenos><div class=linenodiv><pre><span></span><span class=normal>26</span>
<span class=normal>27</span>
<span class=normal>28</span>
<span class=normal>29</span>
<span class=normal>30</span>
<span class=normal>31</span>
<span class=normal>32</span>
<span class=normal>33</span>
<span class=normal>34</span>
<span class=normal>35</span>
<span class=normal>36</span>
<span class=normal>37</span>
<span class=normal>38</span>
<span class=normal>39</span>
<span class=normal>40</span>
<span class=normal>41</span>
<span class=normal>42</span>
<span class=normal>43</span>
<span class=normal>44</span>
<span class=normal>45</span>
<span class=normal>46</span>
<span class=normal>47</span>
<span class=normal>48</span>
<span class=normal>49</span>
<span class=normal>50</span>
<span class=normal>51</span>
<span class=normal>52</span>
<span class=normal>53</span>
<span class=normal>54</span>
<span class=normal>55</span>
<span class=normal>56</span>
<span class=normal>57</span>
<span class=normal>58</span>
<span class=normal>59</span>
<span class=normal>60</span>
<span class=normal>61</span>
<span class=normal>62</span>
<span class=normal>63</span>
<span class=normal>64</span>
<span class=normal>65</span>
<span class=normal>66</span>
<span class=normal>67</span>
<span class=normal>68</span>
<span class=normal>69</span>
<span class=normal>70</span>
<span class=normal>71</span>
<span class=normal>72</span>
<span class=normal>73</span>
<span class=normal>74</span>
<span class=normal>75</span>
<span class=normal>76</span>
<span class=normal>77</span>
<span class=normal>78</span>
<span class=normal>79</span>
<span class=normal>80</span>
<span class=normal>81</span>
<span class=normal>82</span>
<span class=normal>83</span>
<span class=normal>84</span>
<span class=normal>85</span>
<span class=normal>86</span>
<span class=normal>87</span>
<span class=normal>88</span>
<span class=normal>89</span>
<span class=normal>90</span>
<span class=normal>91</span>
<span class=normal>92</span>
<span class=normal>93</span>
<span class=normal>94</span>
<span class=normal>95</span></pre></div></td><td class=code><div><pre><span></span><code><span class=k>def</span><span class=w> </span><span class=nf>make_headers</span><span class=p>(</span>
    <span class=n>keep_alive</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>accept_encoding</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>user_agent</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>basic_auth</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>proxy_basic_auth</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
    <span class=n>disable_cache</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<span class=p>):</span>
<span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<span class=sd>    Shortcuts for generating request headers.</span>

<span class=sd>    :param keep_alive:</span>
<span class=sd>        If ``True``, adds &#39;connection: keep-alive&#39; header.</span>

<span class=sd>    :param accept_encoding:</span>
<span class=sd>        Can be a boolean, list, or string.</span>
<span class=sd>        ``True`` translates to &#39;gzip,deflate&#39;.</span>
<span class=sd>        List will get joined by comma.</span>
<span class=sd>        String will be used as provided.</span>

<span class=sd>    :param user_agent:</span>
<span class=sd>        String representing the user-agent you want, such as</span>
<span class=sd>        &quot;python-urllib3/0.6&quot;</span>

<span class=sd>    :param basic_auth:</span>
<span class=sd>        Colon-separated username:password string for &#39;authorization: basic ...&#39;</span>
<span class=sd>        auth header.</span>

<span class=sd>    :param proxy_basic_auth:</span>
<span class=sd>        Colon-separated username:password string for &#39;proxy-authorization: basic ...&#39;</span>
<span class=sd>        auth header.</span>

<span class=sd>    :param disable_cache:</span>
<span class=sd>        If ``True``, adds &#39;cache-control: no-cache&#39; header.</span>

<span class=sd>    Example::</span>

<span class=sd>        &gt;&gt;&gt; make_headers(keep_alive=True, user_agent=&quot;Batman/1.0&quot;)</span>
<span class=sd>        {&#39;connection&#39;: &#39;keep-alive&#39;, &#39;user-agent&#39;: &#39;Batman/1.0&#39;}</span>
<span class=sd>        &gt;&gt;&gt; make_headers(accept_encoding=True)</span>
<span class=sd>        {&#39;accept-encoding&#39;: &#39;gzip,deflate&#39;}</span>
<span class=sd>    &quot;&quot;&quot;</span>
    <span class=n>headers</span> <span class=o>=</span> <span class=p>{}</span>
    <span class=k>if</span> <span class=n>accept_encoding</span><span class=p>:</span>
        <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>accept_encoding</span><span class=p>,</span> <span class=nb>str</span><span class=p>):</span>
            <span class=k>pass</span>
        <span class=k>elif</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>accept_encoding</span><span class=p>,</span> <span class=nb>list</span><span class=p>):</span>
            <span class=n>accept_encoding</span> <span class=o>=</span> <span class=s2>&quot;,&quot;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>accept_encoding</span><span class=p>)</span>
        <span class=k>else</span><span class=p>:</span>
            <span class=n>accept_encoding</span> <span class=o>=</span> <span class=n>ACCEPT_ENCODING</span>
        <span class=n>headers</span><span class=p>[</span><span class=s2>&quot;accept-encoding&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>accept_encoding</span>

    <span class=k>if</span> <span class=n>user_agent</span><span class=p>:</span>
        <span class=n>headers</span><span class=p>[</span><span class=s2>&quot;user-agent&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>user_agent</span>

    <span class=k>if</span> <span class=n>keep_alive</span><span class=p>:</span>
        <span class=n>headers</span><span class=p>[</span><span class=s2>&quot;connection&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;keep-alive&quot;</span>

    <span class=k>if</span> <span class=n>basic_auth</span><span class=p>:</span>
        <span class=n>headers</span><span class=p>[</span><span class=s2>&quot;authorization&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;Basic &quot;</span> <span class=o>+</span> <span class=n>b64encode</span><span class=p>(</span><span class=n>b</span><span class=p>(</span><span class=n>basic_auth</span><span class=p>))</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&quot;utf-8&quot;</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>proxy_basic_auth</span><span class=p>:</span>
        <span class=n>headers</span><span class=p>[</span><span class=s2>&quot;proxy-authorization&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;Basic &quot;</span> <span class=o>+</span> <span class=n>b64encode</span><span class=p>(</span>
            <span class=n>b</span><span class=p>(</span><span class=n>proxy_basic_auth</span><span class=p>)</span>
        <span class=p>)</span><span class=o>.</span><span class=n>decode</span><span class=p>(</span><span class=s2>&quot;utf-8&quot;</span><span class=p>)</span>

    <span class=k>if</span> <span class=n>disable_cache</span><span class=p>:</span>
        <span class=n>headers</span><span class=p>[</span><span class=s2>&quot;cache-control&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;no-cache&quot;</span>

    <span class=k>return</span> <span class=n>headers</span>
</code></pre></div></td></tr></table></div> </details> </div> </div> </div> </div> </div> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.sections", "navigation.path", "navigation.prune"], "search": "../../../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script> <script src=../../../../../assets/javascripts/bundle.c8b220af.min.js></script> </body> </html>